[debug] [2020-04-18T16:59:01.549Z] ----------------------------------------------------------------------
[debug] [2020-04-18T16:59:01.552Z] Command:       C:\Program Files\nodejs\node.exe C:\Users\Bjarte\AppData\Roaming\npm\node_modules\firebase-tools\lib\bin\firebase.js serve --only functions
[debug] [2020-04-18T16:59:01.553Z] CLI Version:   7.11.0
[debug] [2020-04-18T16:59:01.553Z] Platform:      win32
[debug] [2020-04-18T16:59:01.553Z] Node Version:  v10.15.0
[debug] [2020-04-18T16:59:01.555Z] Time:          Sat Apr 18 2020 18:59:01 GMT+0200 (GMT+02:00)
[debug] [2020-04-18T16:59:01.555Z] ----------------------------------------------------------------------
[debug] [2020-04-18T16:59:01.555Z] 
[debug] [2020-04-18T16:59:01.599Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2020-04-18T16:59:01.599Z] > authorizing via signed-in user
[debug] [2020-04-18T16:59:01.599Z] [iam] checking project pencil-test-98d8d for permissions ["firebase.projects.get"]
[debug] [2020-04-18T16:59:01.601Z] > refreshing access token with scopes: ["email","https://www.googleapis.com/auth/cloud-platform","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","openid"]
[debug] [2020-04-18T16:59:01.601Z] >>> HTTP REQUEST POST https://www.googleapis.com/oauth2/v3/token  
 <request body omitted>
[debug] [2020-04-18T16:59:01.844Z] <<< HTTP RESPONSE 200
[debug] [2020-04-18T16:59:01.858Z] >>> HTTP REQUEST POST https://cloudresourcemanager.googleapis.com/v1/projects/pencil-test-98d8d:testIamPermissions  

[debug] [2020-04-18T16:59:02.916Z] <<< HTTP RESPONSE 200
[debug] [2020-04-18T16:59:02.919Z] >>> HTTP REQUEST GET https://firebase.googleapis.com/v1beta1/projects/pencil-test-98d8d  
 
[debug] [2020-04-18T16:59:03.297Z] <<< HTTP RESPONSE 200
[warn] !  Your requested "node" version "8" doesn't match your global version "10"
[info] +  functions: Emulator started at http://localhost:5000
[info] i  functions: Watching "C:\Applications\pencil-analytics\functions" for Cloud Functions...
[debug] [2020-04-18T16:59:05.863Z] [worker-pool] addWorker(~diagnostic~)
[debug] [2020-04-18T16:59:05.863Z] [worker-pool] Adding worker with key ~diagnostic~, total=1
[debug] [2020-04-18T16:59:05.863Z] [worker-pool] submitWork(triggerId=)
[debug] [2020-04-18T16:59:05.863Z] [worker-~diagnostic~-5f51089a-da23-4716-bf0e-da149ea46636]: Assigning socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\19640
[debug] [2020-04-18T16:59:05.864Z] [worker-~diagnostic~-5f51089a-da23-4716-bf0e-da149ea46636]: BUSY
[debug] [2020-04-18T16:59:06.357Z] [runtime-status] [19640] Functions runtime initialized. {"cwd":"C:\\Applications\\pencil-analytics\\functions","node_version":"10.15.0"}
[debug] [2020-04-18T16:59:06.358Z] [runtime-status] [19640] Disabled runtime features: {"functions_config_helper":true,"network_filtering":true,"timeout":true,"memory_limiting":true,"admin_stubs":true,"pubsub_emulator":true}
[debug] [2020-04-18T16:59:06.362Z] [runtime-status] [19640] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-admin\\lib\\index.js"}
[debug] [2020-04-18T16:59:06.364Z] [runtime-status] [19640] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[debug] [2020-04-18T16:59:06.365Z] [runtime-status] [19640] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[info] >  [Nest] 19640   - 2020-04-18 18:59:16   [NestFactory] Starting Nest application...
[info] +  functions[api]: http function initialized (http://localhost:5000/pencil-test-98d8d/us-central1/api).
[debug] [2020-04-18T16:59:16.242Z] [worker-~diagnostic~-5f51089a-da23-4716-bf0e-da149ea46636]: IDLE
[info] >  [Nest] 19640   - 2020-04-18 18:59:16   [InstanceLoader] AppModule dependencies initialized +24ms
[info] >  [Nest] 19640   - 2020-04-18 18:59:16   [ExceptionHandler] Nest can't resolve dependencies of the StripeService (ConfigService, ?). Please make sure that the argument FirestoreService at index [1] is available in the StripeModule context.
[info] >  
[info] >  Potential solutions:
[info] >  - If FirestoreService is a provider, is it part of the current StripeModule?
[info] >  - If FirestoreService is exported from a separate @Module, is that module imported within StripeModule?
[info] >    @Module({
[info] >      imports: [ /* the Module containing FirestoreService */ ]
[info] >    })
[info] >   +1ms
[info] >  Error: Nest can't resolve dependencies of the StripeService (ConfigService, ?). Please make sure that the argument FirestoreService at index [1] is available in the StripeModule context.
[info] >  
[info] >  Potential solutions:
[info] >  - If FirestoreService is a provider, is it part of the current StripeModule?
[info] >  - If FirestoreService is exported from a separate @Module, is that module imported within StripeModule?
[info] >    @Module({
[info] >      imports: [ /* the Module containing FirestoreService */ ]
[info] >    })
[info] >  
[info] >      at Injector.lookupComponentInParentModules (C:\Applications\pencil-analytics\functions\node_modules\@nestjs\core\injector\injector.js:190:19)
[info] >      at process._tickCallback (internal/process/next_tick.js:68:7)
[debug] [2020-04-18T16:59:16.274Z] [worker-~diagnostic~-5f51089a-da23-4716-bf0e-da149ea46636]: exited
[debug] [2020-04-18T16:59:16.274Z] [worker-~diagnostic~-5f51089a-da23-4716-bf0e-da149ea46636]: FINISHED
[debug] [2020-04-18T17:01:12.079Z] File C:\Applications\pencil-analytics\functions\src\stripe\stripe.module.ts changed, reloading triggers
[debug] [2020-04-18T17:01:12.552Z] File C:\Applications\pencil-analytics\functions\lib\stripe\stripe.module.js.map changed, reloading triggers
[debug] [2020-04-18T17:01:12.552Z] File C:\Applications\pencil-analytics\functions\lib\stripe\stripe.module.js changed, reloading triggers
[debug] [2020-04-18T17:01:12.554Z] File C:\Applications\pencil-analytics\functions\lib\stripe\stripe.module.d.ts changed, reloading triggers
[debug] [2020-04-18T17:01:12.587Z] File C:\Applications\pencil-analytics\functions\lib\tsconfig.tsbuildinfo changed, reloading triggers
[debug] [2020-04-18T17:01:13.591Z] [worker-pool] Cleaned up workers for ~diagnostic~: 1 --> 0
[debug] [2020-04-18T17:01:13.619Z] [worker-pool] addWorker(~diagnostic~)
[debug] [2020-04-18T17:01:13.620Z] [worker-pool] Adding worker with key ~diagnostic~, total=1
[debug] [2020-04-18T17:01:13.620Z] [worker-pool] submitWork(triggerId=)
[debug] [2020-04-18T17:01:13.620Z] [worker-~diagnostic~-8713e0b1-c333-4406-b93b-b16b4deea173]: Assigning socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\20280
[debug] [2020-04-18T17:01:13.620Z] [worker-~diagnostic~-8713e0b1-c333-4406-b93b-b16b4deea173]: BUSY
[debug] [2020-04-18T17:01:14.220Z] [runtime-status] [20280] Functions runtime initialized. {"cwd":"C:\\Applications\\pencil-analytics\\functions","node_version":"10.15.0"}
[debug] [2020-04-18T17:01:14.222Z] [runtime-status] [20280] Disabled runtime features: {"functions_config_helper":true,"network_filtering":true,"timeout":true,"memory_limiting":true,"admin_stubs":true,"pubsub_emulator":true}
[debug] [2020-04-18T17:01:14.226Z] [runtime-status] [20280] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-admin\\lib\\index.js"}
[debug] [2020-04-18T17:01:14.229Z] [runtime-status] [20280] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[debug] [2020-04-18T17:01:14.230Z] [runtime-status] [20280] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[info] >  [Nest] 20280   - 2020-04-18 19:01:15   [NestFactory] Starting Nest application...
[debug] [2020-04-18T17:01:15.170Z] [worker-~diagnostic~-8713e0b1-c333-4406-b93b-b16b4deea173]: IDLE
[info] >  [Nest] 20280   - 2020-04-18 19:01:15   [InstanceLoader] AppModule dependencies initialized +20ms
[info] >  [Nest] 20280   - 2020-04-18 19:01:15   [InstanceLoader] HttpModule dependencies initialized +1ms
[info] >  [Nest] 20280   - 2020-04-18 19:01:15   [InstanceLoader] ConfigHostModule dependencies initialized +1ms
[info] >  [Nest] 20280   - 2020-04-18 19:01:21   [InstanceLoader] ConfigModule dependencies initialized +5818ms
[info] >  [Nest] 20280   - 2020-04-18 19:01:21   [InstanceLoader] StripeModule dependencies initialized +1ms
[info] >  [Nest] 20280   - 2020-04-18 19:01:21   [RoutesResolver] StripeController {/stripe}: +5ms
[info] >  [Nest] 20280   - 2020-04-18 19:01:21   [RouterExplorer] Mapped {/test, GET} route +4ms
[info] >  [Nest] 20280   - 2020-04-18 19:01:21   [RouterExplorer] Mapped {/checkout, POST} route +2ms
[info] >  [Nest] 20280   - 2020-04-18 19:01:21   [RouterExplorer] Mapped {/webhooks, POST} route +2ms
[info] >  [Nest] 20280   - 2020-04-18 19:01:21   [NestApplication] Nest application successfully started +5ms
[info] >  Nest Ready
[debug] [2020-04-18T17:10:55.074Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2020-04-18T17:10:55.075Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-18T17:10:55.076Z] Accepted request OPTIONS /pencil-test-98d8d/us-central1/api/stripe/checkout --> api
[debug] [2020-04-18T17:10:55.096Z] [worker-pool] addWorker(api)
[debug] [2020-04-18T17:10:55.096Z] [worker-pool] Adding worker with key api, total=1
[debug] [2020-04-18T17:10:55.097Z] [worker-pool] submitWork(triggerId=api)
[debug] [2020-04-18T17:10:55.097Z] [worker-api-88d6211c-b7b9-4cad-96bc-e08369a4262b]: Assigning socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\19556
[debug] [2020-04-18T17:10:55.097Z] [worker-api-88d6211c-b7b9-4cad-96bc-e08369a4262b]: BUSY
[debug] [2020-04-18T17:10:55.561Z] [runtime-status] [19556] Functions runtime initialized. {"cwd":"C:\\Applications\\pencil-analytics\\functions","node_version":"10.15.0"}
[debug] [2020-04-18T17:10:55.564Z] [runtime-status] [19556] Disabled runtime features: {"functions_config_helper":true,"network_filtering":true,"timeout":true,"memory_limiting":true,"admin_stubs":true,"pubsub_emulator":true}
[debug] [2020-04-18T17:10:55.567Z] [runtime-status] [19556] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-admin\\lib\\index.js"}
[debug] [2020-04-18T17:10:55.569Z] [runtime-status] [19556] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[debug] [2020-04-18T17:10:55.570Z] [runtime-status] [19556] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[info] >  [Nest] 19556   - 2020-04-18 19:10:56   [NestFactory] Starting Nest application...
[debug] [2020-04-18T17:10:56.646Z] [runtime-status] [19556] Trigger "api" has been found, beginning invocation!
[info] i  functions: Beginning execution of "api"
[debug] [2020-04-18T17:10:56.657Z] [runtime-status] [19556] triggerDefinition {"httpsTrigger":{},"name":"api","entryPoint":"api"}
[debug] [2020-04-18T17:10:56.657Z] [runtime-status] [19556] Running api in mode HTTPS
[debug] [2020-04-18T17:10:56.658Z] [runtime-status] [19556] Attempting to listen to socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\19556
[info] >  [Nest] 19556   - 2020-04-18 19:10:56   [InstanceLoader] AppModule dependencies initialized +32ms
[info] >  [Nest] 19556   - 2020-04-18 19:10:56   [InstanceLoader] HttpModule dependencies initialized +1ms
[info] >  [Nest] 19556   - 2020-04-18 19:10:56   [InstanceLoader] ConfigHostModule dependencies initialized +2ms
[info] >  [Nest] 19556   - 2020-04-18 19:10:57   [InstanceLoader] ConfigModule dependencies initialized +405ms
[info] >  [Nest] 19556   - 2020-04-18 19:10:57   [InstanceLoader] StripeModule dependencies initialized +1ms
[info] >  [Nest] 19556   - 2020-04-18 19:10:57   [RoutesResolver] StripeController {/stripe}: +6ms
[info] >  [Nest] 19556   - 2020-04-18 19:10:57   [RouterExplorer] Mapped {/test, GET} route +3ms
[info] >  [Nest] 19556   - 2020-04-18 19:10:57   [RouterExplorer] Mapped {/checkout, POST} route +3ms
[info] >  [Nest] 19556   - 2020-04-18 19:10:57   [RouterExplorer] Mapped {/webhooks, POST} route +1ms
[info] >  [Nest] 19556   - 2020-04-18 19:10:57   [NestApplication] Nest application successfully started +8ms
[debug] [2020-04-18T17:10:57.112Z] [functions] Runtime ready! Sending request!
[info] >  Nest Ready
[debug] [2020-04-18T17:10:57.130Z] [runtime-status] [19556] Ephemeral server handling OPTIONS request
[debug] [2020-04-18T17:10:57.135Z] [runtime-status] [19556] Ephemeral server survived.
[debug] [2020-04-18T17:10:57.137Z] [work-queue] {"queueLength":1,"workRunningCount":1}
[debug] [2020-04-18T17:10:57.137Z] [work-queue] {"queueLength":0,"workRunningCount":2}
[debug] [2020-04-18T17:10:57.137Z] Accepted request POST /pencil-test-98d8d/us-central1/api/stripe/checkout --> api
[debug] [2020-04-18T17:10:57.145Z] [worker-pool] addWorker(api)
[debug] [2020-04-18T17:10:57.145Z] [worker-pool] Adding worker with key api, total=2
[debug] [2020-04-18T17:10:57.145Z] [worker-pool] submitWork(triggerId=api)
[debug] [2020-04-18T17:10:57.145Z] [worker-api-318be784-593c-415b-96a9-b121a8c8345c]: Assigning socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\15484
[debug] [2020-04-18T17:10:57.145Z] [worker-api-318be784-593c-415b-96a9-b121a8c8345c]: BUSY
[info] i  functions: Finished "api" in ~1s
[debug] [2020-04-18T17:10:57.146Z] [worker-api-88d6211c-b7b9-4cad-96bc-e08369a4262b]: IDLE
[debug] [2020-04-18T17:10:57.147Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-18T17:10:57.654Z] [runtime-status] [15484] Functions runtime initialized. {"cwd":"C:\\Applications\\pencil-analytics\\functions","node_version":"10.15.0"}
[debug] [2020-04-18T17:10:57.656Z] [runtime-status] [15484] Disabled runtime features: {"functions_config_helper":true,"network_filtering":true,"timeout":true,"memory_limiting":true,"admin_stubs":true,"pubsub_emulator":true}
[debug] [2020-04-18T17:10:57.660Z] [runtime-status] [15484] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-admin\\lib\\index.js"}
[debug] [2020-04-18T17:10:57.662Z] [runtime-status] [15484] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[debug] [2020-04-18T17:10:57.664Z] [runtime-status] [15484] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[info] >  [Nest] 15484   - 2020-04-18 19:10:58   [NestFactory] Starting Nest application...
[debug] [2020-04-18T17:10:58.549Z] [runtime-status] [15484] Trigger "api" has been found, beginning invocation!
[info] i  functions: Beginning execution of "api"
[debug] [2020-04-18T17:10:58.556Z] [runtime-status] [15484] triggerDefinition {"httpsTrigger":{},"name":"api","entryPoint":"api"}
[debug] [2020-04-18T17:10:58.556Z] [runtime-status] [15484] Running api in mode HTTPS
[debug] [2020-04-18T17:10:58.556Z] [runtime-status] [15484] Attempting to listen to socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\15484
[info] >  [Nest] 15484   - 2020-04-18 19:10:58   [InstanceLoader] AppModule dependencies initialized +29ms
[info] >  [Nest] 15484   - 2020-04-18 19:10:58   [InstanceLoader] HttpModule dependencies initialized +1ms
[info] >  [Nest] 15484   - 2020-04-18 19:10:58   [InstanceLoader] ConfigHostModule dependencies initialized +1ms
[info] >  [Nest] 15484   - 2020-04-18 19:10:58   [InstanceLoader] ConfigModule dependencies initialized +382ms
[info] >  [Nest] 15484   - 2020-04-18 19:10:58   [InstanceLoader] StripeModule dependencies initialized +1ms
[info] >  [Nest] 15484   - 2020-04-18 19:10:58   [RoutesResolver] StripeController {/stripe}: +6ms
[info] >  [Nest] 15484   - 2020-04-18 19:10:58   [RouterExplorer] Mapped {/test, GET} route +4ms
[info] >  [Nest] 15484   - 2020-04-18 19:10:58   [RouterExplorer] Mapped {/checkout, POST} route +2ms
[info] >  [Nest] 15484   - 2020-04-18 19:10:58   [RouterExplorer] Mapped {/webhooks, POST} route +1ms
[info] >  [Nest] 15484   - 2020-04-18 19:10:58   [NestApplication] Nest application successfully started +4ms
[debug] [2020-04-18T17:10:58.976Z] [functions] Runtime ready! Sending request!
[info] >  Nest Ready
[debug] [2020-04-18T17:10:59.117Z] [runtime-status] [15484] Ephemeral server handling POST request
[debug] [2020-04-18T17:10:59.120Z] [runtime-status] [15484] Ephemeral server survived.
[info] >  inside IF: prod_H7TbPV6ah3DDzR
[info] >  Unexpected error occured while purchasing { Error: Received unknown parameter: subscription_data[0]
[info] >      at Function.generate (C:\Applications\pencil-analytics\functions\node_modules\stripe\lib\Error.js:52:16)
[info] >      at IncomingMessage.res.once (C:\Applications\pencil-analytics\functions\node_modules\stripe\lib\StripeResource.js:168:39)
[info] >      at Object.onceWrapper (events.js:273:13)
[info] >      at IncomingMessage.emit (events.js:187:15)
[info] >      at endReadableNT (_stream_readable.js:1094:12)
[info] >      at process._tickCallback (internal/process/next_tick.js:63:19)
[info] >    raw:
[info] >     { code: 'parameter_unknown',
[info] >       doc_url: 'https://stripe.com/docs/error-codes/parameter-unknown',
[info] >       message: 'Received unknown parameter: subscription_data[0]',
[info] >       param: 'subscription_data[0]',
[info] >       type: 'invalid_request_error',
[info] >       headers:
[info] >        { server: 'nginx',
[info] >          date: 'Sat, 18 Apr 2020 17:11:01 GMT',
[info] >          'content-type': 'application/json',
[info] >          'content-length': '266',
[info] >          connection: 'keep-alive',
[info] >          'access-control-allow-credentials': 'true',
[info] >          'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',
[info] >          'access-control-allow-origin': '*',
[info] >          'access-control-expose-headers':
[info] >           'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',
[info] >          'access-control-max-age': '300',
[info] >          'cache-control': 'no-cache, no-store',
[info] >          'request-id': 'req_6l3gknoy2ohuiE',
[info] >          'stripe-version': '2020-03-02',
[info] >          'strict-transport-security': 'max-age=31556926; includeSubDomains; preload' },
[info] >       statusCode: 400,
[info] >       requestId: 'req_6l3gknoy2ohuiE' },
[info] >    rawType: 'invalid_request_error',
[info] >    code: 'parameter_unknown',
[info] >    param: 'subscription_data[0]',
[info] >    detail: undefined,
[info] >    headers:
[info] >     { server: 'nginx',
[info] >       date: 'Sat, 18 Apr 2020 17:11:01 GMT',
[info] >       'content-type': 'application/json',
[info] >       'content-length': '266',
[info] >       connection: 'keep-alive',
[info] >       'access-control-allow-credentials': 'true',
[info] >       'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',
[info] >       'access-control-allow-origin': '*',
[info] >       'access-control-expose-headers':
[info] >        'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',
[info] >       'access-control-max-age': '300',
[info] >       'cache-control': 'no-cache, no-store',
[info] >       'request-id': 'req_6l3gknoy2ohuiE',
[info] >       'stripe-version': '2020-03-02',
[info] >       'strict-transport-security': 'max-age=31556926; includeSubDomains; preload' },
[info] >    requestId: 'req_6l3gknoy2ohuiE',
[info] >    statusCode: 400,
[info] >    charge: undefined,
[info] >    decline_code: undefined,
[info] >    payment_intent: undefined,
[info] >    payment_method: undefined,
[info] >    setup_intent: undefined,
[info] >    source: undefined,
[info] >    type: 'StripeInvalidRequestError' }
[info] i  functions: Finished "api" in ~2s
[debug] [2020-04-18T17:11:00.910Z] [worker-api-318be784-593c-415b-96a9-b121a8c8345c]: IDLE
[debug] [2020-04-18T17:11:00.910Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2020-04-18T17:51:21.866Z] File C:\Applications\pencil-analytics\functions\src\stripe\stripe\stripe.service.ts changed, reloading triggers
[debug] [2020-04-18T17:51:22.449Z] File C:\Applications\pencil-analytics\functions\lib\stripe\stripe.module.js.map changed, reloading triggers
[debug] [2020-04-18T17:51:22.451Z] File C:\Applications\pencil-analytics\functions\lib\stripe\stripe.module.js changed, reloading triggers
[debug] [2020-04-18T17:51:22.453Z] File C:\Applications\pencil-analytics\functions\lib\stripe\stripe.module.d.ts changed, reloading triggers
[debug] [2020-04-18T17:51:22.456Z] File C:\Applications\pencil-analytics\functions\lib\app.module.d.ts changed, reloading triggers
[debug] [2020-04-18T17:51:22.456Z] File C:\Applications\pencil-analytics\functions\lib\stripe\stripe\stripe.controller.spec.d.ts changed, reloading triggers
[debug] [2020-04-18T17:51:22.472Z] File C:\Applications\pencil-analytics\functions\lib\stripe\stripe\stripe.service.js.map changed, reloading triggers
[debug] [2020-04-18T17:51:22.473Z] File C:\Applications\pencil-analytics\functions\lib\stripe\stripe\stripe.service.js changed, reloading triggers
[debug] [2020-04-18T17:51:22.481Z] File C:\Applications\pencil-analytics\functions\lib\stripe\stripe\stripe.service.d.ts changed, reloading triggers
[debug] [2020-04-18T17:51:22.492Z] File C:\Applications\pencil-analytics\functions\lib\stripe\stripe\stripe.service.spec.js.map changed, reloading triggers
[debug] [2020-04-18T17:51:22.507Z] File C:\Applications\pencil-analytics\functions\lib\stripe\stripe\stripe.service.spec.js changed, reloading triggers
[debug] [2020-04-18T17:51:22.510Z] File C:\Applications\pencil-analytics\functions\lib\stripe\stripe\stripe.service.spec.d.ts changed, reloading triggers
[debug] [2020-04-18T17:51:22.517Z] File C:\Applications\pencil-analytics\functions\lib\stripe\stripe\stripe.controller.js.map changed, reloading triggers
[debug] [2020-04-18T17:51:22.517Z] File C:\Applications\pencil-analytics\functions\lib\stripe\stripe\stripe.controller.js changed, reloading triggers
[debug] [2020-04-18T17:51:22.520Z] File C:\Applications\pencil-analytics\functions\lib\stripe\stripe\stripe.controller.d.ts changed, reloading triggers
[debug] [2020-04-18T17:51:22.562Z] File C:\Applications\pencil-analytics\functions\lib\tsconfig.tsbuildinfo changed, reloading triggers
[debug] [2020-04-18T17:51:23.563Z] [worker-pool] Shutting down IDLE worker (~diagnostic~)
[debug] [2020-04-18T17:51:23.564Z] [worker-~diagnostic~-8713e0b1-c333-4406-b93b-b16b4deea173]: FINISHING
[debug] [2020-04-18T17:51:23.565Z] [worker-pool] Shutting down IDLE worker (api)
[debug] [2020-04-18T17:51:23.565Z] [worker-api-88d6211c-b7b9-4cad-96bc-e08369a4262b]: FINISHING
[debug] [2020-04-18T17:51:23.565Z] [worker-pool] Shutting down IDLE worker (api)
[debug] [2020-04-18T17:51:23.565Z] [worker-api-318be784-593c-415b-96a9-b121a8c8345c]: FINISHING
[debug] [2020-04-18T17:51:23.590Z] [worker-pool] addWorker(~diagnostic~)
[debug] [2020-04-18T17:51:23.590Z] [worker-pool] Adding worker with key ~diagnostic~, total=2
[debug] [2020-04-18T17:51:23.590Z] [worker-pool] submitWork(triggerId=)
[debug] [2020-04-18T17:51:23.591Z] [worker-~diagnostic~-74bb67a1-39d6-4069-8eae-cfae2e3646d1]: Assigning socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\20452
[debug] [2020-04-18T17:51:23.591Z] [worker-~diagnostic~-74bb67a1-39d6-4069-8eae-cfae2e3646d1]: BUSY
[debug] [2020-04-18T17:51:23.591Z] [worker-~diagnostic~-8713e0b1-c333-4406-b93b-b16b4deea173]: exited
[debug] [2020-04-18T17:51:23.591Z] [worker-~diagnostic~-8713e0b1-c333-4406-b93b-b16b4deea173]: FINISHED
[debug] [2020-04-18T17:51:23.592Z] [worker-api-88d6211c-b7b9-4cad-96bc-e08369a4262b]: exited
[debug] [2020-04-18T17:51:23.592Z] [worker-api-88d6211c-b7b9-4cad-96bc-e08369a4262b]: FINISHED
[debug] [2020-04-18T17:51:23.592Z] [worker-api-318be784-593c-415b-96a9-b121a8c8345c]: exited
[debug] [2020-04-18T17:51:23.592Z] [worker-api-318be784-593c-415b-96a9-b121a8c8345c]: FINISHED
[debug] [2020-04-18T17:51:24.174Z] [runtime-status] [20452] Functions runtime initialized. {"cwd":"C:\\Applications\\pencil-analytics\\functions","node_version":"10.15.0"}
[debug] [2020-04-18T17:51:24.176Z] [runtime-status] [20452] Disabled runtime features: {"functions_config_helper":true,"network_filtering":true,"timeout":true,"memory_limiting":true,"admin_stubs":true,"pubsub_emulator":true}
[debug] [2020-04-18T17:51:24.180Z] [runtime-status] [20452] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-admin\\lib\\index.js"}
[debug] [2020-04-18T17:51:24.182Z] [runtime-status] [20452] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[debug] [2020-04-18T17:51:24.183Z] [runtime-status] [20452] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[info] >  [Nest] 20452   - 2020-04-18 19:51:25   [NestFactory] Starting Nest application...
[debug] [2020-04-18T17:51:25.114Z] [worker-~diagnostic~-74bb67a1-39d6-4069-8eae-cfae2e3646d1]: IDLE
[info] >  [Nest] 20452   - 2020-04-18 19:51:25   [InstanceLoader] AppModule dependencies initialized +20ms
[info] >  [Nest] 20452   - 2020-04-18 19:51:25   [InstanceLoader] HttpModule dependencies initialized +1ms
[info] >  [Nest] 20452   - 2020-04-18 19:51:25   [InstanceLoader] ConfigHostModule dependencies initialized +2ms
[info] >  [Nest] 20452   - 2020-04-18 19:51:25   [InstanceLoader] ConfigModule dependencies initialized +390ms
[info] >  [Nest] 20452   - 2020-04-18 19:51:25   [InstanceLoader] StripeModule dependencies initialized +2ms
[info] >  [Nest] 20452   - 2020-04-18 19:51:25   [RoutesResolver] StripeController {/stripe}: +5ms
[info] >  [Nest] 20452   - 2020-04-18 19:51:25   [RouterExplorer] Mapped {/test, GET} route +4ms
[info] >  [Nest] 20452   - 2020-04-18 19:51:25   [RouterExplorer] Mapped {/checkout, POST} route +1ms
[info] >  [Nest] 20452   - 2020-04-18 19:51:25   [RouterExplorer] Mapped {/webhooks, POST} route +1ms
[info] >  [Nest] 20452   - 2020-04-18 19:51:25   [NestApplication] Nest application successfully started +4ms
[info] >  Nest Ready
[debug] [2020-04-18T17:52:38.631Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2020-04-18T17:52:38.631Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-18T17:52:38.631Z] Accepted request OPTIONS /pencil-test-98d8d/us-central1/api/stripe/checkout --> api
[debug] [2020-04-18T17:52:38.632Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1
[debug] [2020-04-18T17:52:38.632Z] [worker-pool] Cleaned up workers for api: 2 --> 0
[debug] [2020-04-18T17:52:38.640Z] [worker-pool] addWorker(api)
[debug] [2020-04-18T17:52:38.640Z] [worker-pool] Adding worker with key api, total=1
[debug] [2020-04-18T17:52:38.640Z] [worker-pool] submitWork(triggerId=api)
[debug] [2020-04-18T17:52:38.640Z] [worker-api-4c628a6a-929f-4c52-ac12-5d8b316b9e49]: Assigning socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\21500
[debug] [2020-04-18T17:52:38.640Z] [worker-api-4c628a6a-929f-4c52-ac12-5d8b316b9e49]: BUSY
[debug] [2020-04-18T17:52:39.126Z] [runtime-status] [21500] Functions runtime initialized. {"cwd":"C:\\Applications\\pencil-analytics\\functions","node_version":"10.15.0"}
[debug] [2020-04-18T17:52:39.129Z] [runtime-status] [21500] Disabled runtime features: {"functions_config_helper":true,"network_filtering":true,"timeout":true,"memory_limiting":true,"admin_stubs":true,"pubsub_emulator":true}
[debug] [2020-04-18T17:52:39.132Z] [runtime-status] [21500] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-admin\\lib\\index.js"}
[debug] [2020-04-18T17:52:39.134Z] [runtime-status] [21500] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[debug] [2020-04-18T17:52:39.135Z] [runtime-status] [21500] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[info] >  [Nest] 21500   - 2020-04-18 19:52:40   [NestFactory] Starting Nest application...
[debug] [2020-04-18T17:52:40.040Z] [runtime-status] [21500] Trigger "api" has been found, beginning invocation!
[info] i  functions: Beginning execution of "api"
[debug] [2020-04-18T17:52:40.049Z] [runtime-status] [21500] triggerDefinition {"httpsTrigger":{},"name":"api","entryPoint":"api"}
[debug] [2020-04-18T17:52:40.049Z] [runtime-status] [21500] Running api in mode HTTPS
[debug] [2020-04-18T17:52:40.049Z] [runtime-status] [21500] Attempting to listen to socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\21500
[info] >  [Nest] 21500   - 2020-04-18 19:52:40   [InstanceLoader] AppModule dependencies initialized +31ms
[info] >  [Nest] 21500   - 2020-04-18 19:52:40   [InstanceLoader] HttpModule dependencies initialized +0ms
[info] >  [Nest] 21500   - 2020-04-18 19:52:40   [InstanceLoader] ConfigHostModule dependencies initialized +1ms
[info] >  [Nest] 21500   - 2020-04-18 19:52:40   [InstanceLoader] ConfigModule dependencies initialized +379ms
[info] >  [Nest] 21500   - 2020-04-18 19:52:40   [InstanceLoader] StripeModule dependencies initialized +1ms
[info] >  [Nest] 21500   - 2020-04-18 19:52:40   [RoutesResolver] StripeController {/stripe}: +5ms
[info] >  [Nest] 21500   - 2020-04-18 19:52:40   [RouterExplorer] Mapped {/test, GET} route +5ms
[info] >  [Nest] 21500   - 2020-04-18 19:52:40   [RouterExplorer] Mapped {/checkout, POST} route +2ms
[info] >  [Nest] 21500   - 2020-04-18 19:52:40   [RouterExplorer] Mapped {/webhooks, POST} route +1ms
[info] >  [Nest] 21500   - 2020-04-18 19:52:40   [NestApplication] Nest application successfully started +4ms
[debug] [2020-04-18T17:52:40.475Z] [functions] Runtime ready! Sending request!
[info] >  Nest Ready
[debug] [2020-04-18T17:52:40.485Z] [runtime-status] [21500] Ephemeral server handling OPTIONS request
[debug] [2020-04-18T17:52:40.492Z] [runtime-status] [21500] Ephemeral server survived.
[debug] [2020-04-18T17:52:40.495Z] [work-queue] {"queueLength":1,"workRunningCount":1}
[debug] [2020-04-18T17:52:40.495Z] [work-queue] {"queueLength":0,"workRunningCount":2}
[debug] [2020-04-18T17:52:40.495Z] Accepted request POST /pencil-test-98d8d/us-central1/api/stripe/checkout --> api
[debug] [2020-04-18T17:52:40.503Z] [worker-pool] addWorker(api)
[debug] [2020-04-18T17:52:40.503Z] [worker-pool] Adding worker with key api, total=2
[debug] [2020-04-18T17:52:40.503Z] [worker-pool] submitWork(triggerId=api)
[debug] [2020-04-18T17:52:40.503Z] [worker-api-b9d3b019-bcce-41e9-b7fc-312fe2c7d83f]: Assigning socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\19964
[debug] [2020-04-18T17:52:40.503Z] [worker-api-b9d3b019-bcce-41e9-b7fc-312fe2c7d83f]: BUSY
[info] i  functions: Finished "api" in ~1s
[debug] [2020-04-18T17:52:40.510Z] [worker-api-4c628a6a-929f-4c52-ac12-5d8b316b9e49]: IDLE
[debug] [2020-04-18T17:52:40.511Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-18T17:52:40.990Z] [runtime-status] [19964] Functions runtime initialized. {"cwd":"C:\\Applications\\pencil-analytics\\functions","node_version":"10.15.0"}
[debug] [2020-04-18T17:52:40.992Z] [runtime-status] [19964] Disabled runtime features: {"functions_config_helper":true,"network_filtering":true,"timeout":true,"memory_limiting":true,"admin_stubs":true,"pubsub_emulator":true}
[debug] [2020-04-18T17:52:40.995Z] [runtime-status] [19964] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-admin\\lib\\index.js"}
[debug] [2020-04-18T17:52:40.997Z] [runtime-status] [19964] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[debug] [2020-04-18T17:52:40.998Z] [runtime-status] [19964] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[info] >  [Nest] 19964   - 2020-04-18 19:52:41   [NestFactory] Starting Nest application...
[debug] [2020-04-18T17:52:41.925Z] [runtime-status] [19964] Trigger "api" has been found, beginning invocation!
[info] i  functions: Beginning execution of "api"
[debug] [2020-04-18T17:52:41.931Z] [runtime-status] [19964] triggerDefinition {"httpsTrigger":{},"name":"api","entryPoint":"api"}
[debug] [2020-04-18T17:52:41.931Z] [runtime-status] [19964] Running api in mode HTTPS
[debug] [2020-04-18T17:52:41.932Z] [runtime-status] [19964] Attempting to listen to socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\19964
[info] >  [Nest] 19964   - 2020-04-18 19:52:41   [InstanceLoader] AppModule dependencies initialized +29ms
[info] >  [Nest] 19964   - 2020-04-18 19:52:41   [InstanceLoader] HttpModule dependencies initialized +1ms
[info] >  [Nest] 19964   - 2020-04-18 19:52:41   [InstanceLoader] ConfigHostModule dependencies initialized +0ms
[info] >  [Nest] 19964   - 2020-04-18 19:52:42   [InstanceLoader] ConfigModule dependencies initialized +408ms
[info] >  [Nest] 19964   - 2020-04-18 19:52:42   [InstanceLoader] StripeModule dependencies initialized +1ms
[info] >  [Nest] 19964   - 2020-04-18 19:52:42   [RoutesResolver] StripeController {/stripe}: +5ms
[info] >  [Nest] 19964   - 2020-04-18 19:52:42   [RouterExplorer] Mapped {/test, GET} route +7ms
[info] >  [Nest] 19964   - 2020-04-18 19:52:42   [RouterExplorer] Mapped {/checkout, POST} route +2ms
[info] >  [Nest] 19964   - 2020-04-18 19:52:42   [RouterExplorer] Mapped {/webhooks, POST} route +1ms
[info] >  [Nest] 19964   - 2020-04-18 19:52:42   [NestApplication] Nest application successfully started +3ms
[debug] [2020-04-18T17:52:42.378Z] [functions] Runtime ready! Sending request!
[info] >  Nest Ready
[debug] [2020-04-18T17:52:42.423Z] [runtime-status] [19964] Ephemeral server handling POST request
[debug] [2020-04-18T17:52:42.427Z] [runtime-status] [19964] Ephemeral server survived.
[info] >  inside IF: prod_H7TbPV6ah3DDzR
[info] >  Unexpected error occured while purchasing { Error: Received unknown parameter: subscription_data[0]
[info] >      at Function.generate (C:\Applications\pencil-analytics\functions\node_modules\stripe\lib\Error.js:52:16)
[info] >      at IncomingMessage.res.once (C:\Applications\pencil-analytics\functions\node_modules\stripe\lib\StripeResource.js:168:39)
[info] >      at Object.onceWrapper (events.js:273:13)
[info] >      at IncomingMessage.emit (events.js:187:15)
[info] >      at endReadableNT (_stream_readable.js:1094:12)
[info] >      at process._tickCallback (internal/process/next_tick.js:63:19)
[info] >    raw:
[info] >     { code: 'parameter_unknown',
[info] >       doc_url: 'https://stripe.com/docs/error-codes/parameter-unknown',
[info] >       message: 'Received unknown parameter: subscription_data[0]',
[info] >       param: 'subscription_data[0]',
[info] >       type: 'invalid_request_error',
[info] >       headers:
[info] >        { server: 'nginx',
[info] >          date: 'Sat, 18 Apr 2020 17:52:43 GMT',
[info] >          'content-type': 'application/json',
[info] >          'content-length': '266',
[info] >          connection: 'keep-alive',
[info] >          'access-control-allow-credentials': 'true',
[info] >          'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',
[info] >          'access-control-allow-origin': '*',
[info] >          'access-control-expose-headers':
[info] >           'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',
[info] >          'access-control-max-age': '300',
[info] >          'cache-control': 'no-cache, no-store',
[info] >          'request-id': 'req_JXmAdWzU6R9ELx',
[info] >          'stripe-version': '2020-03-02',
[info] >          'strict-transport-security': 'max-age=31556926; includeSubDomains; preload' },
[info] >       statusCode: 400,
[info] >       requestId: 'req_JXmAdWzU6R9ELx' },
[info] >    rawType: 'invalid_request_error',
[info] >    code: 'parameter_unknown',
[info] >    param: 'subscription_data[0]',
[info] >    detail: undefined,
[info] >    headers:
[info] >     { server: 'nginx',
[info] >       date: 'Sat, 18 Apr 2020 17:52:43 GMT',
[info] >       'content-type': 'application/json',
[info] >       'content-length': '266',
[info] >       connection: 'keep-alive',
[info] >       'access-control-allow-credentials': 'true',
[info] >       'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',
[info] >       'access-control-allow-origin': '*',
[info] >       'access-control-expose-headers':
[info] >        'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',
[info] >       'access-control-max-age': '300',
[info] >       'cache-control': 'no-cache, no-store',
[info] >       'request-id': 'req_JXmAdWzU6R9ELx',
[info] >       'stripe-version': '2020-03-02',
[info] >       'strict-transport-security': 'max-age=31556926; includeSubDomains; preload' },
[info] >    requestId: 'req_JXmAdWzU6R9ELx',
[info] >    statusCode: 400,
[info] >    charge: undefined,
[info] >    decline_code: undefined,
[info] >    payment_intent: undefined,
[info] >    payment_method: undefined,
[info] >    setup_intent: undefined,
[info] >    source: undefined,
[info] >    type: 'StripeInvalidRequestError' }
[info] i  functions: Finished "api" in ~1s
[debug] [2020-04-18T17:52:43.879Z] [worker-api-b9d3b019-bcce-41e9-b7fc-312fe2c7d83f]: IDLE
[debug] [2020-04-18T17:52:43.879Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2020-04-18T17:53:23.262Z] File C:\Applications\pencil-analytics\functions\src\stripe\stripe\stripe.service.ts changed, reloading triggers
[debug] [2020-04-18T17:53:23.876Z] File C:\Applications\pencil-analytics\functions\lib\stripe\stripe\stripe.service.js.map changed, reloading triggers
[debug] [2020-04-18T17:53:23.876Z] File C:\Applications\pencil-analytics\functions\lib\stripe\stripe\stripe.service.js changed, reloading triggers
[debug] [2020-04-18T17:53:23.879Z] File C:\Applications\pencil-analytics\functions\lib\stripe\stripe\stripe.service.d.ts changed, reloading triggers
[debug] [2020-04-18T17:53:23.914Z] File C:\Applications\pencil-analytics\functions\lib\tsconfig.tsbuildinfo changed, reloading triggers
[debug] [2020-04-18T17:53:24.914Z] [worker-pool] Shutting down IDLE worker (~diagnostic~)
[debug] [2020-04-18T17:53:24.914Z] [worker-~diagnostic~-74bb67a1-39d6-4069-8eae-cfae2e3646d1]: FINISHING
[debug] [2020-04-18T17:53:24.915Z] [worker-pool] Shutting down IDLE worker (api)
[debug] [2020-04-18T17:53:24.915Z] [worker-api-4c628a6a-929f-4c52-ac12-5d8b316b9e49]: FINISHING
[debug] [2020-04-18T17:53:24.915Z] [worker-pool] Shutting down IDLE worker (api)
[debug] [2020-04-18T17:53:24.915Z] [worker-api-b9d3b019-bcce-41e9-b7fc-312fe2c7d83f]: FINISHING
[debug] [2020-04-18T17:53:24.924Z] [worker-pool] addWorker(~diagnostic~)
[debug] [2020-04-18T17:53:24.924Z] [worker-pool] Adding worker with key ~diagnostic~, total=2
[debug] [2020-04-18T17:53:24.924Z] [worker-pool] submitWork(triggerId=)
[debug] [2020-04-18T17:53:24.924Z] [worker-~diagnostic~-31d1111a-ec54-4fdf-9dc4-962c9f77bc38]: Assigning socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\19536
[debug] [2020-04-18T17:53:24.924Z] [worker-~diagnostic~-31d1111a-ec54-4fdf-9dc4-962c9f77bc38]: BUSY
[debug] [2020-04-18T17:53:24.926Z] [worker-~diagnostic~-74bb67a1-39d6-4069-8eae-cfae2e3646d1]: exited
[debug] [2020-04-18T17:53:24.926Z] [worker-~diagnostic~-74bb67a1-39d6-4069-8eae-cfae2e3646d1]: FINISHED
[debug] [2020-04-18T17:53:24.934Z] [worker-api-4c628a6a-929f-4c52-ac12-5d8b316b9e49]: exited
[debug] [2020-04-18T17:53:24.934Z] [worker-api-4c628a6a-929f-4c52-ac12-5d8b316b9e49]: FINISHED
[debug] [2020-04-18T17:53:25.023Z] [worker-api-b9d3b019-bcce-41e9-b7fc-312fe2c7d83f]: exited
[debug] [2020-04-18T17:53:25.023Z] [worker-api-b9d3b019-bcce-41e9-b7fc-312fe2c7d83f]: FINISHED
[debug] [2020-04-18T17:53:25.484Z] [runtime-status] [19536] Functions runtime initialized. {"cwd":"C:\\Applications\\pencil-analytics\\functions","node_version":"10.15.0"}
[debug] [2020-04-18T17:53:25.487Z] [runtime-status] [19536] Disabled runtime features: {"functions_config_helper":true,"network_filtering":true,"timeout":true,"memory_limiting":true,"admin_stubs":true,"pubsub_emulator":true}
[debug] [2020-04-18T17:53:25.491Z] [runtime-status] [19536] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-admin\\lib\\index.js"}
[debug] [2020-04-18T17:53:25.493Z] [runtime-status] [19536] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[debug] [2020-04-18T17:53:25.494Z] [runtime-status] [19536] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[info] >  [Nest] 19536   - 2020-04-18 19:53:26   [NestFactory] Starting Nest application...
[debug] [2020-04-18T17:53:26.497Z] [worker-~diagnostic~-31d1111a-ec54-4fdf-9dc4-962c9f77bc38]: IDLE
[info] >  [Nest] 19536   - 2020-04-18 19:53:26   [InstanceLoader] AppModule dependencies initialized +22ms
[info] >  [Nest] 19536   - 2020-04-18 19:53:26   [InstanceLoader] HttpModule dependencies initialized +1ms
[info] >  [Nest] 19536   - 2020-04-18 19:53:26   [InstanceLoader] ConfigHostModule dependencies initialized +1ms
[info] >  [Nest] 19536   - 2020-04-18 19:53:27   [InstanceLoader] ConfigModule dependencies initialized +490ms
[info] >  [Nest] 19536   - 2020-04-18 19:53:27   [InstanceLoader] StripeModule dependencies initialized +1ms
[info] >  [Nest] 19536   - 2020-04-18 19:53:27   [RoutesResolver] StripeController {/stripe}: +7ms
[info] >  [Nest] 19536   - 2020-04-18 19:53:27   [RouterExplorer] Mapped {/test, GET} route +3ms
[info] >  [Nest] 19536   - 2020-04-18 19:53:27   [RouterExplorer] Mapped {/checkout, POST} route +0ms
[info] >  [Nest] 19536   - 2020-04-18 19:53:27   [RouterExplorer] Mapped {/webhooks, POST} route +1ms
[info] >  [Nest] 19536   - 2020-04-18 19:53:27   [NestApplication] Nest application successfully started +6ms
[info] >  Nest Ready
[debug] [2020-04-18T17:53:39.870Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2020-04-18T17:53:39.870Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-18T17:53:39.870Z] Accepted request OPTIONS /pencil-test-98d8d/us-central1/api/stripe/checkout --> api
[debug] [2020-04-18T17:53:39.870Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1
[debug] [2020-04-18T17:53:39.870Z] [worker-pool] Cleaned up workers for api: 2 --> 0
[debug] [2020-04-18T17:53:39.878Z] [worker-pool] addWorker(api)
[debug] [2020-04-18T17:53:39.879Z] [worker-pool] Adding worker with key api, total=1
[debug] [2020-04-18T17:53:39.879Z] [worker-pool] submitWork(triggerId=api)
[debug] [2020-04-18T17:53:39.879Z] [worker-api-57c86155-3418-48a4-ba87-255302ce25c0]: Assigning socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\18644
[debug] [2020-04-18T17:53:39.879Z] [worker-api-57c86155-3418-48a4-ba87-255302ce25c0]: BUSY
[debug] [2020-04-18T17:53:40.375Z] [runtime-status] [18644] Functions runtime initialized. {"cwd":"C:\\Applications\\pencil-analytics\\functions","node_version":"10.15.0"}
[debug] [2020-04-18T17:53:40.377Z] [runtime-status] [18644] Disabled runtime features: {"functions_config_helper":true,"network_filtering":true,"timeout":true,"memory_limiting":true,"admin_stubs":true,"pubsub_emulator":true}
[debug] [2020-04-18T17:53:40.381Z] [runtime-status] [18644] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-admin\\lib\\index.js"}
[debug] [2020-04-18T17:53:40.384Z] [runtime-status] [18644] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[debug] [2020-04-18T17:53:40.386Z] [runtime-status] [18644] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[info] >  [Nest] 18644   - 2020-04-18 19:53:41   [NestFactory] Starting Nest application...
[debug] [2020-04-18T17:53:41.346Z] [runtime-status] [18644] Trigger "api" has been found, beginning invocation!
[info] i  functions: Beginning execution of "api"
[debug] [2020-04-18T17:53:41.355Z] [runtime-status] [18644] triggerDefinition {"httpsTrigger":{},"name":"api","entryPoint":"api"}
[debug] [2020-04-18T17:53:41.355Z] [runtime-status] [18644] Running api in mode HTTPS
[debug] [2020-04-18T17:53:41.356Z] [runtime-status] [18644] Attempting to listen to socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\18644
[info] >  [Nest] 18644   - 2020-04-18 19:53:41   [InstanceLoader] AppModule dependencies initialized +29ms
[info] >  [Nest] 18644   - 2020-04-18 19:53:41   [InstanceLoader] HttpModule dependencies initialized +4ms
[info] >  [Nest] 18644   - 2020-04-18 19:53:41   [InstanceLoader] ConfigHostModule dependencies initialized +2ms
[info] >  [Nest] 18644   - 2020-04-18 19:53:41   [InstanceLoader] ConfigModule dependencies initialized +380ms
[info] >  [Nest] 18644   - 2020-04-18 19:53:41   [InstanceLoader] StripeModule dependencies initialized +2ms
[info] >  [Nest] 18644   - 2020-04-18 19:53:41   [RoutesResolver] StripeController {/stripe}: +5ms
[info] >  [Nest] 18644   - 2020-04-18 19:53:41   [RouterExplorer] Mapped {/test, GET} route +5ms
[info] >  [Nest] 18644   - 2020-04-18 19:53:41   [RouterExplorer] Mapped {/checkout, POST} route +2ms
[info] >  [Nest] 18644   - 2020-04-18 19:53:41   [RouterExplorer] Mapped {/webhooks, POST} route +1ms
[info] >  [Nest] 18644   - 2020-04-18 19:53:41   [NestApplication] Nest application successfully started +3ms
[debug] [2020-04-18T17:53:41.776Z] [functions] Runtime ready! Sending request!
[info] >  Nest Ready
[debug] [2020-04-18T17:53:41.795Z] [runtime-status] [18644] Ephemeral server handling OPTIONS request
[debug] [2020-04-18T17:53:41.805Z] [runtime-status] [18644] Ephemeral server survived.
[debug] [2020-04-18T17:53:41.807Z] [work-queue] {"queueLength":1,"workRunningCount":1}
[debug] [2020-04-18T17:53:41.807Z] [work-queue] {"queueLength":0,"workRunningCount":2}
[debug] [2020-04-18T17:53:41.807Z] Accepted request POST /pencil-test-98d8d/us-central1/api/stripe/checkout --> api
[debug] [2020-04-18T17:53:41.815Z] [worker-pool] addWorker(api)
[debug] [2020-04-18T17:53:41.815Z] [worker-pool] Adding worker with key api, total=2
[debug] [2020-04-18T17:53:41.815Z] [worker-pool] submitWork(triggerId=api)
[debug] [2020-04-18T17:53:41.815Z] [worker-api-a87d7dd8-b1c4-4729-ac69-e7a7c018a445]: Assigning socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\13592
[debug] [2020-04-18T17:53:41.815Z] [worker-api-a87d7dd8-b1c4-4729-ac69-e7a7c018a445]: BUSY
[info] i  functions: Finished "api" in ~1s
[debug] [2020-04-18T17:53:41.816Z] [worker-api-57c86155-3418-48a4-ba87-255302ce25c0]: IDLE
[debug] [2020-04-18T17:53:41.817Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-18T17:53:42.364Z] [runtime-status] [13592] Functions runtime initialized. {"cwd":"C:\\Applications\\pencil-analytics\\functions","node_version":"10.15.0"}
[debug] [2020-04-18T17:53:42.367Z] [runtime-status] [13592] Disabled runtime features: {"functions_config_helper":true,"network_filtering":true,"timeout":true,"memory_limiting":true,"admin_stubs":true,"pubsub_emulator":true}
[debug] [2020-04-18T17:53:42.371Z] [runtime-status] [13592] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-admin\\lib\\index.js"}
[debug] [2020-04-18T17:53:42.374Z] [runtime-status] [13592] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[debug] [2020-04-18T17:53:42.375Z] [runtime-status] [13592] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[info] >  [Nest] 13592   - 2020-04-18 19:53:43   [NestFactory] Starting Nest application...
[debug] [2020-04-18T17:53:43.333Z] [runtime-status] [13592] Trigger "api" has been found, beginning invocation!
[info] i  functions: Beginning execution of "api"
[debug] [2020-04-18T17:53:43.338Z] [runtime-status] [13592] triggerDefinition {"httpsTrigger":{},"name":"api","entryPoint":"api"}
[debug] [2020-04-18T17:53:43.338Z] [runtime-status] [13592] Running api in mode HTTPS
[debug] [2020-04-18T17:53:43.339Z] [runtime-status] [13592] Attempting to listen to socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\13592
[info] >  [Nest] 13592   - 2020-04-18 19:53:43   [InstanceLoader] AppModule dependencies initialized +29ms
[info] >  [Nest] 13592   - 2020-04-18 19:53:43   [InstanceLoader] HttpModule dependencies initialized +6ms
[info] >  [Nest] 13592   - 2020-04-18 19:53:43   [InstanceLoader] ConfigHostModule dependencies initialized +1ms
[info] >  [Nest] 13592   - 2020-04-18 19:53:43   [InstanceLoader] ConfigModule dependencies initialized +402ms
[info] >  [Nest] 13592   - 2020-04-18 19:53:43   [InstanceLoader] StripeModule dependencies initialized +1ms
[info] >  [Nest] 13592   - 2020-04-18 19:53:43   [RoutesResolver] StripeController {/stripe}: +7ms
[info] >  [Nest] 13592   - 2020-04-18 19:53:43   [RouterExplorer] Mapped {/test, GET} route +4ms
[info] >  [Nest] 13592   - 2020-04-18 19:53:43   [RouterExplorer] Mapped {/checkout, POST} route +1ms
[info] >  [Nest] 13592   - 2020-04-18 19:53:43   [RouterExplorer] Mapped {/webhooks, POST} route +1ms
[info] >  [Nest] 13592   - 2020-04-18 19:53:43   [NestApplication] Nest application successfully started +13ms
[info] >  Nest Ready
[debug] [2020-04-18T17:53:43.795Z] [functions] Runtime ready! Sending request!
[debug] [2020-04-18T17:53:43.844Z] [runtime-status] [13592] Ephemeral server handling POST request
[debug] [2020-04-18T17:53:43.849Z] [runtime-status] [13592] Ephemeral server survived.
[info] >  inside IF: prod_H7TbPV6ah3DDzR
[info] >  Unexpected error occured while purchasing { Error: Received unknown parameter: subscription_data[0]
[info] >      at Function.generate (C:\Applications\pencil-analytics\functions\node_modules\stripe\lib\Error.js:52:16)
[info] >      at IncomingMessage.res.once (C:\Applications\pencil-analytics\functions\node_modules\stripe\lib\StripeResource.js:168:39)
[info] >      at Object.onceWrapper (events.js:273:13)
[info] >      at IncomingMessage.emit (events.js:187:15)
[info] >      at endReadableNT (_stream_readable.js:1094:12)
[info] >      at process._tickCallback (internal/process/next_tick.js:63:19)
[info] >    raw:
[info] >     { code: 'parameter_unknown',
[info] >       doc_url: 'https://stripe.com/docs/error-codes/parameter-unknown',
[info] >       message: 'Received unknown parameter: subscription_data[0]',
[info] >       param: 'subscription_data[0]',
[info] >       type: 'invalid_request_error',
[info] >       headers:
[info] >        { server: 'nginx',
[info] >          date: 'Sat, 18 Apr 2020 17:53:44 GMT',
[info] >          'content-type': 'application/json',
[info] >          'content-length': '266',
[info] >          connection: 'keep-alive',
[info] >          'access-control-allow-credentials': 'true',
[info] >          'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',
[info] >          'access-control-allow-origin': '*',
[info] >          'access-control-expose-headers':
[info] >           'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',
[info] >          'access-control-max-age': '300',
[info] >          'cache-control': 'no-cache, no-store',
[info] >          'request-id': 'req_25WCQgS4i8WKNo',
[info] >          'stripe-version': '2020-03-02',
[info] >          'strict-transport-security': 'max-age=31556926; includeSubDomains; preload' },
[info] >       statusCode: 400,
[info] >       requestId: 'req_25WCQgS4i8WKNo' },
[info] >    rawType: 'invalid_request_error',
[info] >    code: 'parameter_unknown',
[info] >    param: 'subscription_data[0]',
[info] >    detail: undefined,
[info] >    headers:
[info] >     { server: 'nginx',
[info] >       date: 'Sat, 18 Apr 2020 17:53:44 GMT',
[info] >       'content-type': 'application/json',
[info] >       'content-length': '266',
[info] >       connection: 'keep-alive',
[info] >       'access-control-allow-credentials': 'true',
[info] >       'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',
[info] >       'access-control-allow-origin': '*',
[info] >       'access-control-expose-headers':
[info] >        'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',
[info] >       'access-control-max-age': '300',
[info] >       'cache-control': 'no-cache, no-store',
[info] >       'request-id': 'req_25WCQgS4i8WKNo',
[info] >       'stripe-version': '2020-03-02',
[info] >       'strict-transport-security': 'max-age=31556926; includeSubDomains; preload' },
[info] >    requestId: 'req_25WCQgS4i8WKNo',
[info] >    statusCode: 400,
[info] >    charge: undefined,
[info] >    decline_code: undefined,
[info] >    payment_intent: undefined,
[info] >    payment_method: undefined,
[info] >    setup_intent: undefined,
[info] >    source: undefined,
[info] >    type: 'StripeInvalidRequestError' }
[info] i  functions: Finished "api" in ~1s
[debug] [2020-04-18T17:53:45.239Z] [worker-api-a87d7dd8-b1c4-4729-ac69-e7a7c018a445]: IDLE
[debug] [2020-04-18T17:53:45.239Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2020-04-18T18:15:44.963Z] File C:\Applications\pencil-analytics\functions\src\stripe\stripe\stripe.service.ts changed, reloading triggers
[debug] [2020-04-18T18:15:45.490Z] File C:\Applications\pencil-analytics\functions\lib\stripe\stripe\stripe.service.js.map changed, reloading triggers
[debug] [2020-04-18T18:15:45.491Z] File C:\Applications\pencil-analytics\functions\lib\stripe\stripe\stripe.service.js changed, reloading triggers
[debug] [2020-04-18T18:15:45.498Z] File C:\Applications\pencil-analytics\functions\lib\stripe\stripe\stripe.service.d.ts changed, reloading triggers
[debug] [2020-04-18T18:15:45.531Z] File C:\Applications\pencil-analytics\functions\lib\tsconfig.tsbuildinfo changed, reloading triggers
[debug] [2020-04-18T18:15:46.531Z] [worker-pool] Shutting down IDLE worker (~diagnostic~)
[debug] [2020-04-18T18:15:46.532Z] [worker-~diagnostic~-31d1111a-ec54-4fdf-9dc4-962c9f77bc38]: FINISHING
[debug] [2020-04-18T18:15:46.532Z] [worker-pool] Shutting down IDLE worker (api)
[debug] [2020-04-18T18:15:46.532Z] [worker-api-57c86155-3418-48a4-ba87-255302ce25c0]: FINISHING
[debug] [2020-04-18T18:15:46.533Z] [worker-pool] Shutting down IDLE worker (api)
[debug] [2020-04-18T18:15:46.534Z] [worker-api-a87d7dd8-b1c4-4729-ac69-e7a7c018a445]: FINISHING
[debug] [2020-04-18T18:15:46.552Z] [worker-pool] addWorker(~diagnostic~)
[debug] [2020-04-18T18:15:46.552Z] [worker-pool] Adding worker with key ~diagnostic~, total=2
[debug] [2020-04-18T18:15:46.552Z] [worker-pool] submitWork(triggerId=)
[debug] [2020-04-18T18:15:46.552Z] [worker-~diagnostic~-f446ee96-0422-4727-a2dd-061e9c443c9a]: Assigning socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\20792
[debug] [2020-04-18T18:15:46.552Z] [worker-~diagnostic~-f446ee96-0422-4727-a2dd-061e9c443c9a]: BUSY
[debug] [2020-04-18T18:15:46.554Z] [worker-~diagnostic~-31d1111a-ec54-4fdf-9dc4-962c9f77bc38]: exited
[debug] [2020-04-18T18:15:46.554Z] [worker-~diagnostic~-31d1111a-ec54-4fdf-9dc4-962c9f77bc38]: FINISHED
[debug] [2020-04-18T18:15:46.554Z] [worker-api-57c86155-3418-48a4-ba87-255302ce25c0]: exited
[debug] [2020-04-18T18:15:46.554Z] [worker-api-57c86155-3418-48a4-ba87-255302ce25c0]: FINISHED
[debug] [2020-04-18T18:15:46.555Z] [worker-api-a87d7dd8-b1c4-4729-ac69-e7a7c018a445]: exited
[debug] [2020-04-18T18:15:46.555Z] [worker-api-a87d7dd8-b1c4-4729-ac69-e7a7c018a445]: FINISHED
[debug] [2020-04-18T18:15:47.134Z] [runtime-status] [20792] Functions runtime initialized. {"cwd":"C:\\Applications\\pencil-analytics\\functions","node_version":"10.15.0"}
[debug] [2020-04-18T18:15:47.137Z] [runtime-status] [20792] Disabled runtime features: {"functions_config_helper":true,"network_filtering":true,"timeout":true,"memory_limiting":true,"admin_stubs":true,"pubsub_emulator":true}
[debug] [2020-04-18T18:15:47.141Z] [runtime-status] [20792] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-admin\\lib\\index.js"}
[debug] [2020-04-18T18:15:47.144Z] [runtime-status] [20792] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[debug] [2020-04-18T18:15:47.146Z] [runtime-status] [20792] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[info] >  [Nest] 20792   - 2020-04-18 20:15:48   [NestFactory] Starting Nest application...
[debug] [2020-04-18T18:15:48.161Z] [worker-~diagnostic~-f446ee96-0422-4727-a2dd-061e9c443c9a]: IDLE
[info] >  [Nest] 20792   - 2020-04-18 20:15:48   [InstanceLoader] AppModule dependencies initialized +23ms
[info] >  [Nest] 20792   - 2020-04-18 20:15:48   [InstanceLoader] HttpModule dependencies initialized +1ms
[info] >  [Nest] 20792   - 2020-04-18 20:15:48   [InstanceLoader] ConfigHostModule dependencies initialized +1ms
[info] >  [Nest] 20792   - 2020-04-18 20:15:48   [InstanceLoader] ConfigModule dependencies initialized +459ms
[info] >  [Nest] 20792   - 2020-04-18 20:15:48   [InstanceLoader] StripeModule dependencies initialized +1ms
[info] >  [Nest] 20792   - 2020-04-18 20:15:48   [RoutesResolver] StripeController {/stripe}: +5ms
[info] >  [Nest] 20792   - 2020-04-18 20:15:48   [RouterExplorer] Mapped {/test, GET} route +3ms
[info] >  [Nest] 20792   - 2020-04-18 20:15:48   [RouterExplorer] Mapped {/checkout, POST} route +2ms
[info] >  [Nest] 20792   - 2020-04-18 20:15:48   [RouterExplorer] Mapped {/webhooks, POST} route +1ms
[info] >  [Nest] 20792   - 2020-04-18 20:15:48   [NestApplication] Nest application successfully started +3ms
[info] >  Nest Ready
[debug] [2020-04-18T18:16:23.290Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2020-04-18T18:16:23.291Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-18T18:16:23.291Z] Accepted request OPTIONS /pencil-test-98d8d/us-central1/api/stripe/checkout --> api
[debug] [2020-04-18T18:16:23.291Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1
[debug] [2020-04-18T18:16:23.291Z] [worker-pool] Cleaned up workers for api: 2 --> 0
[debug] [2020-04-18T18:16:23.307Z] [worker-pool] addWorker(api)
[debug] [2020-04-18T18:16:23.307Z] [worker-pool] Adding worker with key api, total=1
[debug] [2020-04-18T18:16:23.307Z] [worker-pool] submitWork(triggerId=api)
[debug] [2020-04-18T18:16:23.307Z] [worker-api-4ffd943d-2ec2-4de0-86a9-dea153b435a0]: Assigning socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\17976
[debug] [2020-04-18T18:16:23.307Z] [worker-api-4ffd943d-2ec2-4de0-86a9-dea153b435a0]: BUSY
[debug] [2020-04-18T18:16:23.791Z] [runtime-status] [17976] Functions runtime initialized. {"cwd":"C:\\Applications\\pencil-analytics\\functions","node_version":"10.15.0"}
[debug] [2020-04-18T18:16:23.793Z] [runtime-status] [17976] Disabled runtime features: {"functions_config_helper":true,"network_filtering":true,"timeout":true,"memory_limiting":true,"admin_stubs":true,"pubsub_emulator":true}
[debug] [2020-04-18T18:16:23.796Z] [runtime-status] [17976] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-admin\\lib\\index.js"}
[debug] [2020-04-18T18:16:23.798Z] [runtime-status] [17976] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[debug] [2020-04-18T18:16:23.799Z] [runtime-status] [17976] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[info] >  [Nest] 17976   - 2020-04-18 20:16:24   [NestFactory] Starting Nest application...
[debug] [2020-04-18T18:16:24.722Z] [runtime-status] [17976] Trigger "api" has been found, beginning invocation!
[info] i  functions: Beginning execution of "api"
[debug] [2020-04-18T18:16:24.730Z] [runtime-status] [17976] triggerDefinition {"httpsTrigger":{},"name":"api","entryPoint":"api"}
[debug] [2020-04-18T18:16:24.730Z] [runtime-status] [17976] Running api in mode HTTPS
[debug] [2020-04-18T18:16:24.731Z] [runtime-status] [17976] Attempting to listen to socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\17976
[info] >  [Nest] 17976   - 2020-04-18 20:16:24   [InstanceLoader] AppModule dependencies initialized +33ms
[info] >  [Nest] 17976   - 2020-04-18 20:16:24   [InstanceLoader] HttpModule dependencies initialized +1ms
[info] >  [Nest] 17976   - 2020-04-18 20:16:24   [InstanceLoader] ConfigHostModule dependencies initialized +2ms
[info] >  [Nest] 17976   - 2020-04-18 20:16:25   [InstanceLoader] ConfigModule dependencies initialized +403ms
[info] >  [Nest] 17976   - 2020-04-18 20:16:25   [InstanceLoader] StripeModule dependencies initialized +1ms
[info] >  [Nest] 17976   - 2020-04-18 20:16:25   [RoutesResolver] StripeController {/stripe}: +6ms
[info] >  [Nest] 17976   - 2020-04-18 20:16:25   [RouterExplorer] Mapped {/test, GET} route +6ms
[debug] [2020-04-18T18:16:25.177Z] [functions] Runtime ready! Sending request!
[info] >  [Nest] 17976   - 2020-04-18 20:16:25   [RouterExplorer] Mapped {/checkout, POST} route +2ms
[info] >  [Nest] 17976   - 2020-04-18 20:16:25   [RouterExplorer] Mapped {/webhooks, POST} route +0ms
[info] >  [Nest] 17976   - 2020-04-18 20:16:25   [NestApplication] Nest application successfully started +4ms
[info] >  Nest Ready
[debug] [2020-04-18T18:16:25.206Z] [runtime-status] [17976] Ephemeral server handling OPTIONS request
[debug] [2020-04-18T18:16:25.212Z] [runtime-status] [17976] Ephemeral server survived.
[debug] [2020-04-18T18:16:25.215Z] [work-queue] {"queueLength":1,"workRunningCount":1}
[debug] [2020-04-18T18:16:25.215Z] [work-queue] {"queueLength":0,"workRunningCount":2}
[debug] [2020-04-18T18:16:25.215Z] Accepted request POST /pencil-test-98d8d/us-central1/api/stripe/checkout --> api
[debug] [2020-04-18T18:16:25.222Z] [worker-pool] addWorker(api)
[debug] [2020-04-18T18:16:25.222Z] [worker-pool] Adding worker with key api, total=2
[debug] [2020-04-18T18:16:25.222Z] [worker-pool] submitWork(triggerId=api)
[debug] [2020-04-18T18:16:25.223Z] [worker-api-213d8442-c189-4f55-915f-d1084ed7d8d8]: Assigning socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\8324
[debug] [2020-04-18T18:16:25.223Z] [worker-api-213d8442-c189-4f55-915f-d1084ed7d8d8]: BUSY
[info] i  functions: Finished "api" in ~1s
[debug] [2020-04-18T18:16:25.229Z] [worker-api-4ffd943d-2ec2-4de0-86a9-dea153b435a0]: IDLE
[debug] [2020-04-18T18:16:25.230Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-18T18:16:25.703Z] [runtime-status] [8324] Functions runtime initialized. {"cwd":"C:\\Applications\\pencil-analytics\\functions","node_version":"10.15.0"}
[debug] [2020-04-18T18:16:25.705Z] [runtime-status] [8324] Disabled runtime features: {"functions_config_helper":true,"network_filtering":true,"timeout":true,"memory_limiting":true,"admin_stubs":true,"pubsub_emulator":true}
[debug] [2020-04-18T18:16:25.710Z] [runtime-status] [8324] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-admin\\lib\\index.js"}
[debug] [2020-04-18T18:16:25.713Z] [runtime-status] [8324] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[debug] [2020-04-18T18:16:25.715Z] [runtime-status] [8324] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[info] >  [Nest] 8324   - 2020-04-18 20:16:26   [NestFactory] Starting Nest application...
[debug] [2020-04-18T18:16:26.724Z] [runtime-status] [8324] Trigger "api" has been found, beginning invocation!
[info] i  functions: Beginning execution of "api"
[debug] [2020-04-18T18:16:26.726Z] [runtime-status] [8324] triggerDefinition {"httpsTrigger":{},"name":"api","entryPoint":"api"}
[debug] [2020-04-18T18:16:26.726Z] [runtime-status] [8324] Running api in mode HTTPS
[debug] [2020-04-18T18:16:26.729Z] [runtime-status] [8324] Attempting to listen to socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\8324
[info] >  [Nest] 8324   - 2020-04-18 20:16:26   [InstanceLoader] AppModule dependencies initialized +29ms
[info] >  [Nest] 8324   - 2020-04-18 20:16:26   [InstanceLoader] HttpModule dependencies initialized +1ms
[info] >  [Nest] 8324   - 2020-04-18 20:16:26   [InstanceLoader] ConfigHostModule dependencies initialized +1ms
[info] >  [Nest] 8324   - 2020-04-18 20:16:27   [InstanceLoader] ConfigModule dependencies initialized +376ms
[info] >  [Nest] 8324   - 2020-04-18 20:16:27   [InstanceLoader] StripeModule dependencies initialized +1ms
[info] >  [Nest] 8324   - 2020-04-18 20:16:27   [RoutesResolver] StripeController {/stripe}: +7ms
[info] >  [Nest] 8324   - 2020-04-18 20:16:27   [RouterExplorer] Mapped {/test, GET} route +7ms
[info] >  [Nest] 8324   - 2020-04-18 20:16:27   [RouterExplorer] Mapped {/checkout, POST} route +2ms
[info] >  [Nest] 8324   - 2020-04-18 20:16:27   [RouterExplorer] Mapped {/webhooks, POST} route +1ms
[info] >  [Nest] 8324   - 2020-04-18 20:16:27   [NestApplication] Nest application successfully started +5ms
[info] >  Nest Ready
[debug] [2020-04-18T18:16:27.153Z] [functions] Runtime ready! Sending request!
[debug] [2020-04-18T18:16:27.226Z] [runtime-status] [8324] Ephemeral server handling POST request
[debug] [2020-04-18T18:16:27.229Z] [runtime-status] [8324] Ephemeral server survived.
[info] >  inside IF: prod_H7TbPV6ah3DDzR
[info] >  Unexpected error occured while purchasing { Error: Received unknown parameter: subscription_data[plan]
[info] >      at Function.generate (C:\Applications\pencil-analytics\functions\node_modules\stripe\lib\Error.js:52:16)
[info] >      at IncomingMessage.res.once (C:\Applications\pencil-analytics\functions\node_modules\stripe\lib\StripeResource.js:168:39)
[info] >      at Object.onceWrapper (events.js:273:13)
[info] >      at IncomingMessage.emit (events.js:187:15)
[info] >      at endReadableNT (_stream_readable.js:1094:12)
[info] >      at process._tickCallback (internal/process/next_tick.js:63:19)
[info] >    raw:
[info] >     { code: 'parameter_unknown',
[info] >       doc_url: 'https://stripe.com/docs/error-codes/parameter-unknown',
[info] >       message: 'Received unknown parameter: subscription_data[plan]',
[info] >       param: 'subscription_data[plan]',
[info] >       type: 'invalid_request_error',
[info] >       headers:
[info] >        { server: 'nginx',
[info] >          date: 'Sat, 18 Apr 2020 18:16:28 GMT',
[info] >          'content-type': 'application/json',
[info] >          'content-length': '272',
[info] >          connection: 'keep-alive',
[info] >          'access-control-allow-credentials': 'true',
[info] >          'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',
[info] >          'access-control-allow-origin': '*',
[info] >          'access-control-expose-headers':
[info] >           'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',
[info] >          'access-control-max-age': '300',
[info] >          'cache-control': 'no-cache, no-store',
[info] >          'request-id': 'req_mzvDUCTUfWWbi9',
[info] >          'stripe-version': '2020-03-02',
[info] >          'strict-transport-security': 'max-age=31556926; includeSubDomains; preload' },
[info] >       statusCode: 400,
[info] >       requestId: 'req_mzvDUCTUfWWbi9' },
[info] >    rawType: 'invalid_request_error',
[info] >    code: 'parameter_unknown',
[info] >    param: 'subscription_data[plan]',
[info] >    detail: undefined,
[info] >    headers:
[info] >     { server: 'nginx',
[info] >       date: 'Sat, 18 Apr 2020 18:16:28 GMT',
[info] >       'content-type': 'application/json',
[info] >       'content-length': '272',
[info] >       connection: 'keep-alive',
[info] >       'access-control-allow-credentials': 'true',
[info] >       'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',
[info] >       'access-control-allow-origin': '*',
[info] >       'access-control-expose-headers':
[info] >        'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',
[info] >       'access-control-max-age': '300',
[info] >       'cache-control': 'no-cache, no-store',
[info] >       'request-id': 'req_mzvDUCTUfWWbi9',
[info] >       'stripe-version': '2020-03-02',
[info] >       'strict-transport-security': 'max-age=31556926; includeSubDomains; preload' },
[info] >    requestId: 'req_mzvDUCTUfWWbi9',
[info] >    statusCode: 400,
[info] >    charge: undefined,
[info] >    decline_code: undefined,
[info] >    payment_intent: undefined,
[info] >    payment_method: undefined,
[info] >    setup_intent: undefined,
[info] >    source: undefined,
[info] >    type: 'StripeInvalidRequestError' }
[info] i  functions: Finished "api" in ~1s
[debug] [2020-04-18T18:16:28.663Z] [worker-api-213d8442-c189-4f55-915f-d1084ed7d8d8]: IDLE
[debug] [2020-04-18T18:16:28.663Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2020-04-18T18:19:19.249Z] File C:\Applications\pencil-analytics\functions\src\stripe\stripe\stripe.service.ts changed, reloading triggers
[debug] [2020-04-18T18:19:19.803Z] File C:\Applications\pencil-analytics\functions\lib\stripe\stripe\stripe.service.js changed, reloading triggers
[debug] [2020-04-18T18:19:19.803Z] File C:\Applications\pencil-analytics\functions\lib\stripe\stripe\stripe.service.js.map changed, reloading triggers
[debug] [2020-04-18T18:19:19.807Z] File C:\Applications\pencil-analytics\functions\lib\stripe\stripe\stripe.service.d.ts changed, reloading triggers
[debug] [2020-04-18T18:19:19.839Z] File C:\Applications\pencil-analytics\functions\lib\tsconfig.tsbuildinfo changed, reloading triggers
[debug] [2020-04-18T18:19:20.840Z] [worker-pool] Shutting down IDLE worker (~diagnostic~)
[debug] [2020-04-18T18:19:20.840Z] [worker-~diagnostic~-f446ee96-0422-4727-a2dd-061e9c443c9a]: FINISHING
[debug] [2020-04-18T18:19:20.841Z] [worker-pool] Shutting down IDLE worker (api)
[debug] [2020-04-18T18:19:20.841Z] [worker-api-4ffd943d-2ec2-4de0-86a9-dea153b435a0]: FINISHING
[debug] [2020-04-18T18:19:20.841Z] [worker-pool] Shutting down IDLE worker (api)
[debug] [2020-04-18T18:19:20.842Z] [worker-api-213d8442-c189-4f55-915f-d1084ed7d8d8]: FINISHING
[debug] [2020-04-18T18:19:20.865Z] [worker-pool] addWorker(~diagnostic~)
[debug] [2020-04-18T18:19:20.865Z] [worker-pool] Adding worker with key ~diagnostic~, total=2
[debug] [2020-04-18T18:19:20.865Z] [worker-pool] submitWork(triggerId=)
[debug] [2020-04-18T18:19:20.865Z] [worker-~diagnostic~-6c87d8a8-1441-4ddb-91d6-74ccd5eae2fb]: Assigning socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\18044
[debug] [2020-04-18T18:19:20.865Z] [worker-~diagnostic~-6c87d8a8-1441-4ddb-91d6-74ccd5eae2fb]: BUSY
[debug] [2020-04-18T18:19:20.866Z] [worker-api-213d8442-c189-4f55-915f-d1084ed7d8d8]: exited
[debug] [2020-04-18T18:19:20.866Z] [worker-api-213d8442-c189-4f55-915f-d1084ed7d8d8]: FINISHED
[debug] [2020-04-18T18:19:20.867Z] [worker-api-4ffd943d-2ec2-4de0-86a9-dea153b435a0]: exited
[debug] [2020-04-18T18:19:20.867Z] [worker-api-4ffd943d-2ec2-4de0-86a9-dea153b435a0]: FINISHED
[debug] [2020-04-18T18:19:20.867Z] [worker-~diagnostic~-f446ee96-0422-4727-a2dd-061e9c443c9a]: exited
[debug] [2020-04-18T18:19:20.867Z] [worker-~diagnostic~-f446ee96-0422-4727-a2dd-061e9c443c9a]: FINISHED
[debug] [2020-04-18T18:19:21.410Z] [runtime-status] [18044] Functions runtime initialized. {"cwd":"C:\\Applications\\pencil-analytics\\functions","node_version":"10.15.0"}
[debug] [2020-04-18T18:19:21.413Z] [runtime-status] [18044] Disabled runtime features: {"functions_config_helper":true,"network_filtering":true,"timeout":true,"memory_limiting":true,"admin_stubs":true,"pubsub_emulator":true}
[debug] [2020-04-18T18:19:21.417Z] [runtime-status] [18044] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-admin\\lib\\index.js"}
[debug] [2020-04-18T18:19:21.419Z] [runtime-status] [18044] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[debug] [2020-04-18T18:19:21.420Z] [runtime-status] [18044] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[info] >  [Nest] 18044   - 2020-04-18 20:19:22   [NestFactory] Starting Nest application...
[debug] [2020-04-18T18:19:22.352Z] [worker-~diagnostic~-6c87d8a8-1441-4ddb-91d6-74ccd5eae2fb]: IDLE
[info] >  [Nest] 18044   - 2020-04-18 20:19:22   [InstanceLoader] AppModule dependencies initialized +22ms
[info] >  [Nest] 18044   - 2020-04-18 20:19:22   [InstanceLoader] HttpModule dependencies initialized +1ms
[info] >  [Nest] 18044   - 2020-04-18 20:19:22   [InstanceLoader] ConfigHostModule dependencies initialized +1ms
[info] >  [Nest] 18044   - 2020-04-18 20:19:22   [InstanceLoader] ConfigModule dependencies initialized +382ms
[info] >  [Nest] 18044   - 2020-04-18 20:19:22   [InstanceLoader] StripeModule dependencies initialized +1ms
[info] >  [Nest] 18044   - 2020-04-18 20:19:22   [RoutesResolver] StripeController {/stripe}: +6ms
[info] >  [Nest] 18044   - 2020-04-18 20:19:22   [RouterExplorer] Mapped {/test, GET} route +3ms
[info] >  [Nest] 18044   - 2020-04-18 20:19:22   [RouterExplorer] Mapped {/checkout, POST} route +3ms
[info] >  [Nest] 18044   - 2020-04-18 20:19:22   [RouterExplorer] Mapped {/webhooks, POST} route +1ms
[info] >  [Nest] 18044   - 2020-04-18 20:19:22   [NestApplication] Nest application successfully started +4ms
[info] >  Nest Ready
[debug] [2020-04-18T18:19:44.275Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2020-04-18T18:19:44.275Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-18T18:19:44.275Z] Accepted request OPTIONS /pencil-test-98d8d/us-central1/api/stripe/checkout --> api
[debug] [2020-04-18T18:19:44.276Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1
[debug] [2020-04-18T18:19:44.276Z] [worker-pool] Cleaned up workers for api: 2 --> 0
[debug] [2020-04-18T18:19:44.293Z] [worker-pool] addWorker(api)
[debug] [2020-04-18T18:19:44.294Z] [worker-pool] Adding worker with key api, total=1
[debug] [2020-04-18T18:19:44.294Z] [worker-pool] submitWork(triggerId=api)
[debug] [2020-04-18T18:19:44.294Z] [worker-api-eb5d2795-1909-4040-8a34-f893ee18f856]: Assigning socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\20136
[debug] [2020-04-18T18:19:44.294Z] [worker-api-eb5d2795-1909-4040-8a34-f893ee18f856]: BUSY
[debug] [2020-04-18T18:19:44.806Z] [runtime-status] [20136] Functions runtime initialized. {"cwd":"C:\\Applications\\pencil-analytics\\functions","node_version":"10.15.0"}
[debug] [2020-04-18T18:19:44.808Z] [runtime-status] [20136] Disabled runtime features: {"functions_config_helper":true,"network_filtering":true,"timeout":true,"memory_limiting":true,"admin_stubs":true,"pubsub_emulator":true}
[debug] [2020-04-18T18:19:44.812Z] [runtime-status] [20136] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-admin\\lib\\index.js"}
[debug] [2020-04-18T18:19:44.813Z] [runtime-status] [20136] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[debug] [2020-04-18T18:19:44.814Z] [runtime-status] [20136] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[info] >  [Nest] 20136   - 2020-04-18 20:19:45   [NestFactory] Starting Nest application...
[debug] [2020-04-18T18:19:45.733Z] [runtime-status] [20136] Trigger "api" has been found, beginning invocation!
[info] i  functions: Beginning execution of "api"
[debug] [2020-04-18T18:19:45.743Z] [runtime-status] [20136] triggerDefinition {"httpsTrigger":{},"name":"api","entryPoint":"api"}
[debug] [2020-04-18T18:19:45.743Z] [runtime-status] [20136] Running api in mode HTTPS
[debug] [2020-04-18T18:19:45.743Z] [runtime-status] [20136] Attempting to listen to socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\20136
[info] >  [Nest] 20136   - 2020-04-18 20:19:45   [InstanceLoader] AppModule dependencies initialized +44ms
[info] >  [Nest] 20136   - 2020-04-18 20:19:45   [InstanceLoader] HttpModule dependencies initialized +2ms
[info] >  [Nest] 20136   - 2020-04-18 20:19:45   [InstanceLoader] ConfigHostModule dependencies initialized +3ms
[info] >  [Nest] 20136   - 2020-04-18 20:19:46   [InstanceLoader] ConfigModule dependencies initialized +401ms
[info] >  [Nest] 20136   - 2020-04-18 20:19:46   [InstanceLoader] StripeModule dependencies initialized +1ms
[info] >  [Nest] 20136   - 2020-04-18 20:19:46   [RoutesResolver] StripeController {/stripe}: +6ms
[info] >  [Nest] 20136   - 2020-04-18 20:19:46   [RouterExplorer] Mapped {/test, GET} route +3ms
[info] >  [Nest] 20136   - 2020-04-18 20:19:46   [RouterExplorer] Mapped {/checkout, POST} route +3ms
[info] >  [Nest] 20136   - 2020-04-18 20:19:46   [RouterExplorer] Mapped {/webhooks, POST} route +2ms
[info] >  [Nest] 20136   - 2020-04-18 20:19:46   [NestApplication] Nest application successfully started +4ms
[debug] [2020-04-18T18:19:46.197Z] [functions] Runtime ready! Sending request!
[info] >  Nest Ready
[debug] [2020-04-18T18:19:46.212Z] [runtime-status] [20136] Ephemeral server handling OPTIONS request
[debug] [2020-04-18T18:19:46.219Z] [runtime-status] [20136] Ephemeral server survived.
[debug] [2020-04-18T18:19:46.219Z] [work-queue] {"queueLength":1,"workRunningCount":1}
[debug] [2020-04-18T18:19:46.220Z] [work-queue] {"queueLength":0,"workRunningCount":2}
[debug] [2020-04-18T18:19:46.220Z] Accepted request POST /pencil-test-98d8d/us-central1/api/stripe/checkout --> api
[debug] [2020-04-18T18:19:46.228Z] [worker-pool] addWorker(api)
[debug] [2020-04-18T18:19:46.228Z] [worker-pool] Adding worker with key api, total=2
[debug] [2020-04-18T18:19:46.228Z] [worker-pool] submitWork(triggerId=api)
[debug] [2020-04-18T18:19:46.228Z] [worker-api-8263408b-11c7-48f1-ba4e-445ebf64e641]: Assigning socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\21528
[debug] [2020-04-18T18:19:46.228Z] [worker-api-8263408b-11c7-48f1-ba4e-445ebf64e641]: BUSY
[info] i  functions: Finished "api" in ~1s
[debug] [2020-04-18T18:19:46.229Z] [worker-api-eb5d2795-1909-4040-8a34-f893ee18f856]: IDLE
[debug] [2020-04-18T18:19:46.229Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-18T18:19:46.701Z] [runtime-status] [21528] Functions runtime initialized. {"cwd":"C:\\Applications\\pencil-analytics\\functions","node_version":"10.15.0"}
[debug] [2020-04-18T18:19:46.704Z] [runtime-status] [21528] Disabled runtime features: {"functions_config_helper":true,"network_filtering":true,"timeout":true,"memory_limiting":true,"admin_stubs":true,"pubsub_emulator":true}
[debug] [2020-04-18T18:19:46.708Z] [runtime-status] [21528] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-admin\\lib\\index.js"}
[debug] [2020-04-18T18:19:46.711Z] [runtime-status] [21528] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[debug] [2020-04-18T18:19:46.712Z] [runtime-status] [21528] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[info] >  [Nest] 21528   - 2020-04-18 20:19:47   [NestFactory] Starting Nest application...
[debug] [2020-04-18T18:19:47.614Z] [runtime-status] [21528] Trigger "api" has been found, beginning invocation!
[info] i  functions: Beginning execution of "api"
[debug] [2020-04-18T18:19:47.621Z] [runtime-status] [21528] triggerDefinition {"httpsTrigger":{},"name":"api","entryPoint":"api"}
[debug] [2020-04-18T18:19:47.621Z] [runtime-status] [21528] Running api in mode HTTPS
[debug] [2020-04-18T18:19:47.621Z] [runtime-status] [21528] Attempting to listen to socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\21528
[info] >  [Nest] 21528   - 2020-04-18 20:19:47   [InstanceLoader] AppModule dependencies initialized +29ms
[info] >  [Nest] 21528   - 2020-04-18 20:19:47   [InstanceLoader] HttpModule dependencies initialized +1ms
[info] >  [Nest] 21528   - 2020-04-18 20:19:47   [InstanceLoader] ConfigHostModule dependencies initialized +1ms
[info] >  [Nest] 21528   - 2020-04-18 20:19:48   [InstanceLoader] ConfigModule dependencies initialized +398ms
[info] >  [Nest] 21528   - 2020-04-18 20:19:48   [InstanceLoader] StripeModule dependencies initialized +2ms
[info] >  [Nest] 21528   - 2020-04-18 20:19:48   [RoutesResolver] StripeController {/stripe}: +5ms
[info] >  [Nest] 21528   - 2020-04-18 20:19:48   [RouterExplorer] Mapped {/test, GET} route +6ms
[debug] [2020-04-18T18:19:48.066Z] [functions] Runtime ready! Sending request!
[info] >  [Nest] 21528   - 2020-04-18 20:19:48   [RouterExplorer] Mapped {/checkout, POST} route +2ms
[info] >  [Nest] 21528   - 2020-04-18 20:19:48   [RouterExplorer] Mapped {/webhooks, POST} route +1ms
[info] >  [Nest] 21528   - 2020-04-18 20:19:48   [NestApplication] Nest application successfully started +3ms
[info] >  Nest Ready
[debug] [2020-04-18T18:19:48.107Z] [runtime-status] [21528] Ephemeral server handling POST request
[debug] [2020-04-18T18:19:48.112Z] [runtime-status] [21528] Ephemeral server survived.
[info] >  inside IF: prod_H7TbPV6ah3DDzR
[info] >  Unexpected error occured while purchasing { Error: Received unknown parameter: items
[info] >      at Function.generate (C:\Applications\pencil-analytics\functions\node_modules\stripe\lib\Error.js:52:16)
[info] >      at IncomingMessage.res.once (C:\Applications\pencil-analytics\functions\node_modules\stripe\lib\StripeResource.js:168:39)
[info] >      at Object.onceWrapper (events.js:273:13)
[info] >      at IncomingMessage.emit (events.js:187:15)
[info] >      at endReadableNT (_stream_readable.js:1094:12)
[info] >      at process._tickCallback (internal/process/next_tick.js:63:19)
[info] >    raw:
[info] >     { code: 'parameter_unknown',
[info] >       doc_url: 'https://stripe.com/docs/error-codes/parameter-unknown',
[info] >       message: 'Received unknown parameter: items',
[info] >       param: 'items',
[info] >       type: 'invalid_request_error',
[info] >       headers:
[info] >        { server: 'nginx',
[info] >          date: 'Sat, 18 Apr 2020 18:19:48 GMT',
[info] >          'content-type': 'application/json',
[info] >          'content-length': '236',
[info] >          connection: 'keep-alive',
[info] >          'access-control-allow-credentials': 'true',
[info] >          'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',
[info] >          'access-control-allow-origin': '*',
[info] >          'access-control-expose-headers':
[info] >           'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',
[info] >          'access-control-max-age': '300',
[info] >          'cache-control': 'no-cache, no-store',
[info] >          'request-id': 'req_4Ur9DOf78ICX0J',
[info] >          'stripe-version': '2020-03-02',
[info] >          'strict-transport-security': 'max-age=31556926; includeSubDomains; preload' },
[info] >       statusCode: 400,
[info] >       requestId: 'req_4Ur9DOf78ICX0J' },
[info] >    rawType: 'invalid_request_error',
[info] >    code: 'parameter_unknown',
[info] >    param: 'items',
[info] >    detail: undefined,
[info] >    headers:
[info] >     { server: 'nginx',
[info] >       date: 'Sat, 18 Apr 2020 18:19:48 GMT',
[info] >       'content-type': 'application/json',
[info] >       'content-length': '236',
[info] >       connection: 'keep-alive',
[info] >       'access-control-allow-credentials': 'true',
[info] >       'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',
[info] >       'access-control-allow-origin': '*',
[info] >       'access-control-expose-headers':
[info] >        'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',
[info] >       'access-control-max-age': '300',
[info] >       'cache-control': 'no-cache, no-store',
[info] >       'request-id': 'req_4Ur9DOf78ICX0J',
[info] >       'stripe-version': '2020-03-02',
[info] >       'strict-transport-security': 'max-age=31556926; includeSubDomains; preload' },
[info] >    requestId: 'req_4Ur9DOf78ICX0J',
[info] >    statusCode: 400,
[info] >    charge: undefined,
[info] >    decline_code: undefined,
[info] >    payment_intent: undefined,
[info] >    payment_method: undefined,
[info] >    setup_intent: undefined,
[info] >    source: undefined,
[info] >    type: 'StripeInvalidRequestError' }
[info] i  functions: Finished "api" in ~1s
[debug] [2020-04-18T18:19:49.551Z] [worker-api-8263408b-11c7-48f1-ba4e-445ebf64e641]: IDLE
[debug] [2020-04-18T18:19:49.551Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2020-04-18T18:29:51.669Z] File C:\Applications\pencil-analytics\functions\src\stripe\stripe\stripe.service.ts changed, reloading triggers
[debug] [2020-04-18T18:29:52.244Z] File C:\Applications\pencil-analytics\functions\lib\stripe\stripe.module.js.map changed, reloading triggers
[debug] [2020-04-18T18:29:52.244Z] File C:\Applications\pencil-analytics\functions\lib\stripe\stripe.module.js changed, reloading triggers
[debug] [2020-04-18T18:29:52.247Z] File C:\Applications\pencil-analytics\functions\lib\app.module.d.ts changed, reloading triggers
[debug] [2020-04-18T18:29:52.248Z] File C:\Applications\pencil-analytics\functions\lib\stripe\stripe\stripe.controller.spec.d.ts changed, reloading triggers
[debug] [2020-04-18T18:29:52.248Z] File C:\Applications\pencil-analytics\functions\lib\stripe\stripe.module.d.ts changed, reloading triggers
[debug] [2020-04-18T18:29:52.261Z] File C:\Applications\pencil-analytics\functions\lib\stripe\stripe\stripe.service.js.map changed, reloading triggers
[debug] [2020-04-18T18:29:52.261Z] File C:\Applications\pencil-analytics\functions\lib\stripe\stripe\stripe.service.js changed, reloading triggers
[debug] [2020-04-18T18:29:52.265Z] File C:\Applications\pencil-analytics\functions\lib\stripe\stripe\stripe.service.d.ts changed, reloading triggers
[debug] [2020-04-18T18:29:52.268Z] File C:\Applications\pencil-analytics\functions\lib\stripe\stripe\stripe.service.spec.js.map changed, reloading triggers
[debug] [2020-04-18T18:29:52.271Z] File C:\Applications\pencil-analytics\functions\lib\stripe\stripe\stripe.service.spec.js changed, reloading triggers
[debug] [2020-04-18T18:29:52.272Z] File C:\Applications\pencil-analytics\functions\lib\stripe\stripe\stripe.service.spec.d.ts changed, reloading triggers
[debug] [2020-04-18T18:29:52.279Z] File C:\Applications\pencil-analytics\functions\lib\stripe\stripe\stripe.controller.js.map changed, reloading triggers
[debug] [2020-04-18T18:29:52.279Z] File C:\Applications\pencil-analytics\functions\lib\stripe\stripe\stripe.controller.js changed, reloading triggers
[debug] [2020-04-18T18:29:52.282Z] File C:\Applications\pencil-analytics\functions\lib\stripe\stripe\stripe.controller.d.ts changed, reloading triggers
[debug] [2020-04-18T18:29:52.313Z] File C:\Applications\pencil-analytics\functions\lib\tsconfig.tsbuildinfo changed, reloading triggers
[debug] [2020-04-18T18:29:53.314Z] [worker-pool] Shutting down IDLE worker (~diagnostic~)
[debug] [2020-04-18T18:29:53.314Z] [worker-~diagnostic~-6c87d8a8-1441-4ddb-91d6-74ccd5eae2fb]: FINISHING
[debug] [2020-04-18T18:29:53.315Z] [worker-pool] Shutting down IDLE worker (api)
[debug] [2020-04-18T18:29:53.315Z] [worker-api-eb5d2795-1909-4040-8a34-f893ee18f856]: FINISHING
[debug] [2020-04-18T18:29:53.315Z] [worker-pool] Shutting down IDLE worker (api)
[debug] [2020-04-18T18:29:53.315Z] [worker-api-8263408b-11c7-48f1-ba4e-445ebf64e641]: FINISHING
[debug] [2020-04-18T18:29:53.336Z] [worker-pool] addWorker(~diagnostic~)
[debug] [2020-04-18T18:29:53.336Z] [worker-pool] Adding worker with key ~diagnostic~, total=2
[debug] [2020-04-18T18:29:53.336Z] [worker-pool] submitWork(triggerId=)
[debug] [2020-04-18T18:29:53.336Z] [worker-~diagnostic~-4208dbf3-1736-40ff-829b-49d81a70c530]: Assigning socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\21520
[debug] [2020-04-18T18:29:53.336Z] [worker-~diagnostic~-4208dbf3-1736-40ff-829b-49d81a70c530]: BUSY
[debug] [2020-04-18T18:29:53.337Z] [worker-~diagnostic~-6c87d8a8-1441-4ddb-91d6-74ccd5eae2fb]: exited
[debug] [2020-04-18T18:29:53.337Z] [worker-~diagnostic~-6c87d8a8-1441-4ddb-91d6-74ccd5eae2fb]: FINISHED
[debug] [2020-04-18T18:29:53.337Z] [worker-api-8263408b-11c7-48f1-ba4e-445ebf64e641]: exited
[debug] [2020-04-18T18:29:53.337Z] [worker-api-8263408b-11c7-48f1-ba4e-445ebf64e641]: FINISHED
[debug] [2020-04-18T18:29:53.337Z] [worker-api-eb5d2795-1909-4040-8a34-f893ee18f856]: exited
[debug] [2020-04-18T18:29:53.337Z] [worker-api-eb5d2795-1909-4040-8a34-f893ee18f856]: FINISHED
[debug] [2020-04-18T18:29:53.987Z] [runtime-status] [21520] Functions runtime initialized. {"cwd":"C:\\Applications\\pencil-analytics\\functions","node_version":"10.15.0"}
[debug] [2020-04-18T18:29:53.990Z] [runtime-status] [21520] Disabled runtime features: {"functions_config_helper":true,"network_filtering":true,"timeout":true,"memory_limiting":true,"admin_stubs":true,"pubsub_emulator":true}
[debug] [2020-04-18T18:29:53.994Z] [runtime-status] [21520] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-admin\\lib\\index.js"}
[debug] [2020-04-18T18:29:53.997Z] [runtime-status] [21520] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[debug] [2020-04-18T18:29:53.998Z] [runtime-status] [21520] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[info] >  [Nest] 21520   - 2020-04-18 20:29:55   [NestFactory] Starting Nest application...
[debug] [2020-04-18T18:29:55.042Z] [worker-~diagnostic~-4208dbf3-1736-40ff-829b-49d81a70c530]: IDLE
[info] >  [Nest] 21520   - 2020-04-18 20:29:55   [InstanceLoader] AppModule dependencies initialized +21ms
[info] >  [Nest] 21520   - 2020-04-18 20:29:55   [InstanceLoader] HttpModule dependencies initialized +1ms
[info] >  [Nest] 21520   - 2020-04-18 20:29:55   [InstanceLoader] ConfigHostModule dependencies initialized +1ms
[info] >  [Nest] 21520   - 2020-04-18 20:29:55   [InstanceLoader] ConfigModule dependencies initialized +391ms
[info] >  [Nest] 21520   - 2020-04-18 20:29:55   [InstanceLoader] StripeModule dependencies initialized +1ms
[info] >  [Nest] 21520   - 2020-04-18 20:29:55   [RoutesResolver] StripeController {/stripe}: +6ms
[info] >  [Nest] 21520   - 2020-04-18 20:29:55   [RouterExplorer] Mapped {/test, GET} route +4ms
[info] >  [Nest] 21520   - 2020-04-18 20:29:55   [RouterExplorer] Mapped {/checkout, POST} route +2ms
[info] >  [Nest] 21520   - 2020-04-18 20:29:55   [RouterExplorer] Mapped {/webhooks, POST} route +1ms
[info] >  [Nest] 21520   - 2020-04-18 20:29:55   [NestApplication] Nest application successfully started +9ms
[info] >  Nest Ready
[debug] [2020-04-18T18:30:03.929Z] File C:\Applications\pencil-analytics\functions\src\stripe\stripe\stripe.service.ts changed, reloading triggers
[debug] [2020-04-18T18:30:04.555Z] File C:\Applications\pencil-analytics\functions\lib\stripe\stripe\stripe.service.js.map changed, reloading triggers
[debug] [2020-04-18T18:30:04.558Z] File C:\Applications\pencil-analytics\functions\lib\stripe\stripe\stripe.service.js changed, reloading triggers
[debug] [2020-04-18T18:30:04.565Z] File C:\Applications\pencil-analytics\functions\lib\stripe\stripe\stripe.service.d.ts changed, reloading triggers
[debug] [2020-04-18T18:30:04.628Z] File C:\Applications\pencil-analytics\functions\lib\tsconfig.tsbuildinfo changed, reloading triggers
[debug] [2020-04-18T18:30:05.629Z] [worker-pool] Shutting down IDLE worker (~diagnostic~)
[debug] [2020-04-18T18:30:05.629Z] [worker-~diagnostic~-4208dbf3-1736-40ff-829b-49d81a70c530]: FINISHING
[debug] [2020-04-18T18:30:05.630Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1
[debug] [2020-04-18T18:30:05.630Z] [worker-pool] Cleaned up workers for api: 2 --> 0
[debug] [2020-04-18T18:30:05.638Z] [worker-pool] addWorker(~diagnostic~)
[debug] [2020-04-18T18:30:05.638Z] [worker-pool] Adding worker with key ~diagnostic~, total=2
[debug] [2020-04-18T18:30:05.638Z] [worker-pool] submitWork(triggerId=)
[debug] [2020-04-18T18:30:05.638Z] [worker-~diagnostic~-6271b543-bdf8-4854-99fc-83b9781e2e67]: Assigning socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\19064
[debug] [2020-04-18T18:30:05.638Z] [worker-~diagnostic~-6271b543-bdf8-4854-99fc-83b9781e2e67]: BUSY
[debug] [2020-04-18T18:30:05.639Z] [worker-~diagnostic~-4208dbf3-1736-40ff-829b-49d81a70c530]: exited
[debug] [2020-04-18T18:30:05.639Z] [worker-~diagnostic~-4208dbf3-1736-40ff-829b-49d81a70c530]: FINISHED
[debug] [2020-04-18T18:30:06.181Z] [runtime-status] [19064] Functions runtime initialized. {"cwd":"C:\\Applications\\pencil-analytics\\functions","node_version":"10.15.0"}
[debug] [2020-04-18T18:30:06.183Z] [runtime-status] [19064] Disabled runtime features: {"functions_config_helper":true,"network_filtering":true,"timeout":true,"memory_limiting":true,"admin_stubs":true,"pubsub_emulator":true}
[debug] [2020-04-18T18:30:06.187Z] [runtime-status] [19064] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-admin\\lib\\index.js"}
[debug] [2020-04-18T18:30:06.192Z] [runtime-status] [19064] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[debug] [2020-04-18T18:30:06.193Z] [runtime-status] [19064] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[info] >  [Nest] 19064   - 2020-04-18 20:30:07   [NestFactory] Starting Nest application...
[debug] [2020-04-18T18:30:07.226Z] [worker-~diagnostic~-6271b543-bdf8-4854-99fc-83b9781e2e67]: IDLE
[info] >  [Nest] 19064   - 2020-04-18 20:30:07   [InstanceLoader] AppModule dependencies initialized +22ms
[info] >  [Nest] 19064   - 2020-04-18 20:30:07   [InstanceLoader] HttpModule dependencies initialized +1ms
[info] >  [Nest] 19064   - 2020-04-18 20:30:07   [InstanceLoader] ConfigHostModule dependencies initialized +1ms
[info] >  [Nest] 19064   - 2020-04-18 20:30:07   [InstanceLoader] ConfigModule dependencies initialized +434ms
[info] >  [Nest] 19064   - 2020-04-18 20:30:07   [InstanceLoader] StripeModule dependencies initialized +2ms
[info] >  [Nest] 19064   - 2020-04-18 20:30:07   [RoutesResolver] StripeController {/stripe}: +5ms
[info] >  [Nest] 19064   - 2020-04-18 20:30:07   [RouterExplorer] Mapped {/test, GET} route +6ms
[info] >  [Nest] 19064   - 2020-04-18 20:30:07   [RouterExplorer] Mapped {/checkout, POST} route +1ms
[info] >  [Nest] 19064   - 2020-04-18 20:30:07   [RouterExplorer] Mapped {/webhooks, POST} route +1ms
[info] >  [Nest] 19064   - 2020-04-18 20:30:07   [NestApplication] Nest application successfully started +5ms
[info] >  Nest Ready
[debug] [2020-04-18T18:31:47.740Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2020-04-18T18:31:47.740Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-18T18:31:47.740Z] Accepted request OPTIONS /pencil-test-98d8d/us-central1/api/stripe/checkout --> api
[debug] [2020-04-18T18:31:47.740Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1
[debug] [2020-04-18T18:31:47.764Z] [worker-pool] addWorker(api)
[debug] [2020-04-18T18:31:47.764Z] [worker-pool] Adding worker with key api, total=1
[debug] [2020-04-18T18:31:47.764Z] [worker-pool] submitWork(triggerId=api)
[debug] [2020-04-18T18:31:47.765Z] [worker-api-3b6ff7e3-98ca-4cdf-a7b9-1d2982e1752b]: Assigning socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\6532
[debug] [2020-04-18T18:31:47.765Z] [worker-api-3b6ff7e3-98ca-4cdf-a7b9-1d2982e1752b]: BUSY
[debug] [2020-04-18T18:31:48.337Z] [runtime-status] [6532] Functions runtime initialized. {"cwd":"C:\\Applications\\pencil-analytics\\functions","node_version":"10.15.0"}
[debug] [2020-04-18T18:31:48.339Z] [runtime-status] [6532] Disabled runtime features: {"functions_config_helper":true,"network_filtering":true,"timeout":true,"memory_limiting":true,"admin_stubs":true,"pubsub_emulator":true}
[debug] [2020-04-18T18:31:48.343Z] [runtime-status] [6532] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-admin\\lib\\index.js"}
[debug] [2020-04-18T18:31:48.345Z] [runtime-status] [6532] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[debug] [2020-04-18T18:31:48.346Z] [runtime-status] [6532] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[info] >  [Nest] 6532   - 2020-04-18 20:31:49   [NestFactory] Starting Nest application...
[debug] [2020-04-18T18:31:49.308Z] [runtime-status] [6532] Trigger "api" has been found, beginning invocation!
[info] i  functions: Beginning execution of "api"
[debug] [2020-04-18T18:31:49.314Z] [runtime-status] [6532] triggerDefinition {"httpsTrigger":{},"name":"api","entryPoint":"api"}
[debug] [2020-04-18T18:31:49.314Z] [runtime-status] [6532] Running api in mode HTTPS
[debug] [2020-04-18T18:31:49.314Z] [runtime-status] [6532] Attempting to listen to socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\6532
[info] >  [Nest] 6532   - 2020-04-18 20:31:49   [InstanceLoader] AppModule dependencies initialized +31ms
[info] >  [Nest] 6532   - 2020-04-18 20:31:49   [InstanceLoader] HttpModule dependencies initialized +1ms
[info] >  [Nest] 6532   - 2020-04-18 20:31:49   [InstanceLoader] ConfigHostModule dependencies initialized +1ms
[info] >  [Nest] 6532   - 2020-04-18 20:31:49   [InstanceLoader] ConfigModule dependencies initialized +402ms
[info] >  [Nest] 6532   - 2020-04-18 20:31:49   [InstanceLoader] StripeModule dependencies initialized +1ms
[info] >  [Nest] 6532   - 2020-04-18 20:31:49   [RoutesResolver] StripeController {/stripe}: +5ms
[info] >  [Nest] 6532   - 2020-04-18 20:31:49   [RouterExplorer] Mapped {/test, GET} route +4ms
[info] >  [Nest] 6532   - 2020-04-18 20:31:49   [RouterExplorer] Mapped {/checkout, POST} route +3ms
[info] >  [Nest] 6532   - 2020-04-18 20:31:49   [RouterExplorer] Mapped {/webhooks, POST} route +1ms
[info] >  [Nest] 6532   - 2020-04-18 20:31:49   [NestApplication] Nest application successfully started +4ms
[debug] [2020-04-18T18:31:49.766Z] [functions] Runtime ready! Sending request!
[info] >  Nest Ready
[debug] [2020-04-18T18:31:49.776Z] [runtime-status] [6532] Ephemeral server handling OPTIONS request
[debug] [2020-04-18T18:31:49.783Z] [runtime-status] [6532] Ephemeral server survived.
[debug] [2020-04-18T18:31:49.785Z] [work-queue] {"queueLength":1,"workRunningCount":1}
[debug] [2020-04-18T18:31:49.785Z] [work-queue] {"queueLength":0,"workRunningCount":2}
[debug] [2020-04-18T18:31:49.785Z] Accepted request POST /pencil-test-98d8d/us-central1/api/stripe/checkout --> api
[debug] [2020-04-18T18:31:49.794Z] [worker-pool] addWorker(api)
[debug] [2020-04-18T18:31:49.794Z] [worker-pool] Adding worker with key api, total=2
[debug] [2020-04-18T18:31:49.794Z] [worker-pool] submitWork(triggerId=api)
[debug] [2020-04-18T18:31:49.794Z] [worker-api-1bc33b83-ae88-4dc7-8791-0292799bf8ed]: Assigning socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\7960
[debug] [2020-04-18T18:31:49.794Z] [worker-api-1bc33b83-ae88-4dc7-8791-0292799bf8ed]: BUSY
[info] i  functions: Finished "api" in ~1s
[debug] [2020-04-18T18:31:49.796Z] [worker-api-3b6ff7e3-98ca-4cdf-a7b9-1d2982e1752b]: IDLE
[debug] [2020-04-18T18:31:49.796Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-18T18:31:50.262Z] [runtime-status] [7960] Functions runtime initialized. {"cwd":"C:\\Applications\\pencil-analytics\\functions","node_version":"10.15.0"}
[debug] [2020-04-18T18:31:50.264Z] [runtime-status] [7960] Disabled runtime features: {"functions_config_helper":true,"network_filtering":true,"timeout":true,"memory_limiting":true,"admin_stubs":true,"pubsub_emulator":true}
[debug] [2020-04-18T18:31:50.267Z] [runtime-status] [7960] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-admin\\lib\\index.js"}
[debug] [2020-04-18T18:31:50.269Z] [runtime-status] [7960] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[debug] [2020-04-18T18:31:50.270Z] [runtime-status] [7960] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[info] >  [Nest] 7960   - 2020-04-18 20:31:51   [NestFactory] Starting Nest application...
[debug] [2020-04-18T18:31:51.163Z] [runtime-status] [7960] Trigger "api" has been found, beginning invocation!
[info] i  functions: Beginning execution of "api"
[debug] [2020-04-18T18:31:51.164Z] [runtime-status] [7960] triggerDefinition {"httpsTrigger":{},"name":"api","entryPoint":"api"}
[debug] [2020-04-18T18:31:51.165Z] [runtime-status] [7960] Running api in mode HTTPS
[debug] [2020-04-18T18:31:51.168Z] [runtime-status] [7960] Attempting to listen to socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\7960
[info] >  [Nest] 7960   - 2020-04-18 20:31:51   [InstanceLoader] AppModule dependencies initialized +28ms
[info] >  [Nest] 7960   - 2020-04-18 20:31:51   [InstanceLoader] HttpModule dependencies initialized +1ms
[info] >  [Nest] 7960   - 2020-04-18 20:31:51   [InstanceLoader] ConfigHostModule dependencies initialized +2ms
[info] >  [Nest] 7960   - 2020-04-18 20:31:51   [InstanceLoader] ConfigModule dependencies initialized +368ms
[info] >  [Nest] 7960   - 2020-04-18 20:31:51   [InstanceLoader] StripeModule dependencies initialized +1ms
[info] >  [Nest] 7960   - 2020-04-18 20:31:51   [RoutesResolver] StripeController {/stripe}: +7ms
[info] >  [Nest] 7960   - 2020-04-18 20:31:51   [RouterExplorer] Mapped {/test, GET} route +4ms
[info] >  [Nest] 7960   - 2020-04-18 20:31:51   [RouterExplorer] Mapped {/checkout, POST} route +1ms
[info] >  [Nest] 7960   - 2020-04-18 20:31:51   [RouterExplorer] Mapped {/webhooks, POST} route +2ms
[info] >  [Nest] 7960   - 2020-04-18 20:31:51   [NestApplication] Nest application successfully started +8ms
[debug] [2020-04-18T18:31:51.580Z] [functions] Runtime ready! Sending request!
[info] >  Nest Ready
[debug] [2020-04-18T18:31:51.616Z] [runtime-status] [7960] Ephemeral server handling POST request
[debug] [2020-04-18T18:31:51.620Z] [runtime-status] [7960] Ephemeral server survived.
[info] >  New Session Config: {"payment_method_types":["card"],"success_url":"bajrtemand/?purchaseResult=success&ongoingPurchaseSessionId=http://localhost:4200/subscribe/stripe-checkout","cancel_url":"bajrtemand/?purchaseResult=failed","client_reference_id":"http://localhost:4200/subscribe/stripe-checkout","customer":"8eg7jJRC1Cya8YOLZ6kp","subscription_data":{"items":[{"plan":"prod_H7TbPV6ah3DDzR"}]}}
[info] >  Unexpected error occured while purchasing { Error: No such customer: 8eg7jJRC1Cya8YOLZ6kp
[info] >      at Function.generate (C:\Applications\pencil-analytics\functions\node_modules\stripe\lib\Error.js:52:16)
[info] >      at IncomingMessage.res.once (C:\Applications\pencil-analytics\functions\node_modules\stripe\lib\StripeResource.js:168:39)
[info] >      at Object.onceWrapper (events.js:273:13)
[info] >      at IncomingMessage.emit (events.js:187:15)
[info] >      at endReadableNT (_stream_readable.js:1094:12)
[info] >      at process._tickCallback (internal/process/next_tick.js:63:19)
[info] >    raw:
[info] >     { code: 'resource_missing',
[info] >       doc_url: 'https://stripe.com/docs/error-codes/resource-missing',
[info] >       message: 'No such customer: 8eg7jJRC1Cya8YOLZ6kp',
[info] >       param: 'customer',
[info] >       type: 'invalid_request_error',
[info] >       headers:
[info] >        { server: 'nginx',
[info] >          date: 'Sat, 18 Apr 2020 18:31:52 GMT',
[info] >          'content-type': 'application/json',
[info] >          'content-length': '242',
[info] >          connection: 'keep-alive',
[info] >          'access-control-allow-credentials': 'true',
[info] >          'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',
[info] >          'access-control-allow-origin': '*',
[info] >          'access-control-expose-headers':
[info] >           'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',
[info] >          'access-control-max-age': '300',
[info] >          'cache-control': 'no-cache, no-store',
[info] >          'request-id': 'req_TeGlWTSWPYJ8DS',
[info] >          'stripe-version': '2020-03-02',
[info] >          'strict-transport-security': 'max-age=31556926; includeSubDomains; preload' },
[info] >       statusCode: 400,
[info] >       requestId: 'req_TeGlWTSWPYJ8DS' },
[info] >    rawType: 'invalid_request_error',
[info] >    code: 'resource_missing',
[info] >    param: 'customer',
[info] >    detail: undefined,
[info] >    headers:
[info] >     { server: 'nginx',
[info] >       date: 'Sat, 18 Apr 2020 18:31:52 GMT',
[info] >       'content-type': 'application/json',
[info] >       'content-length': '242',
[info] >       connection: 'keep-alive',
[info] >       'access-control-allow-credentials': 'true',
[info] >       'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',
[info] >       'access-control-allow-origin': '*',
[info] >       'access-control-expose-headers':
[info] >        'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',
[info] >       'access-control-max-age': '300',
[info] >       'cache-control': 'no-cache, no-store',
[info] >       'request-id': 'req_TeGlWTSWPYJ8DS',
[info] >       'stripe-version': '2020-03-02',
[info] >       'strict-transport-security': 'max-age=31556926; includeSubDomains; preload' },
[info] >    requestId: 'req_TeGlWTSWPYJ8DS',
[info] >    statusCode: 400,
[info] >    charge: undefined,
[info] >    decline_code: undefined,
[info] >    payment_intent: undefined,
[info] >    payment_method: undefined,
[info] >    setup_intent: undefined,
[info] >    source: undefined,
[info] >    type: 'StripeInvalidRequestError' }
[info] i  functions: Finished "api" in ~1s
[debug] [2020-04-18T18:31:53.077Z] [worker-api-1bc33b83-ae88-4dc7-8791-0292799bf8ed]: IDLE
[debug] [2020-04-18T18:31:53.077Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2020-04-18T18:47:13.163Z] File C:\Applications\pencil-analytics\functions\src\stripe\stripe\stripe.service.ts changed, reloading triggers
[debug] [2020-04-18T18:47:13.558Z] File C:\Applications\pencil-analytics\functions\lib\stripe\stripe\stripe.service.js.map changed, reloading triggers
[debug] [2020-04-18T18:47:13.559Z] File C:\Applications\pencil-analytics\functions\lib\stripe\stripe\stripe.service.js changed, reloading triggers
[debug] [2020-04-18T18:47:13.564Z] File C:\Applications\pencil-analytics\functions\lib\stripe\stripe\stripe.service.d.ts changed, reloading triggers
[debug] [2020-04-18T18:47:13.603Z] File C:\Applications\pencil-analytics\functions\lib\tsconfig.tsbuildinfo changed, reloading triggers
[debug] [2020-04-18T18:47:14.603Z] [worker-pool] Shutting down IDLE worker (~diagnostic~)
[debug] [2020-04-18T18:47:14.604Z] [worker-~diagnostic~-6271b543-bdf8-4854-99fc-83b9781e2e67]: FINISHING
[debug] [2020-04-18T18:47:14.604Z] [worker-pool] Shutting down IDLE worker (api)
[debug] [2020-04-18T18:47:14.604Z] [worker-api-3b6ff7e3-98ca-4cdf-a7b9-1d2982e1752b]: FINISHING
[debug] [2020-04-18T18:47:14.605Z] [worker-pool] Shutting down IDLE worker (api)
[debug] [2020-04-18T18:47:14.605Z] [worker-api-1bc33b83-ae88-4dc7-8791-0292799bf8ed]: FINISHING
[debug] [2020-04-18T18:47:14.623Z] [worker-pool] addWorker(~diagnostic~)
[debug] [2020-04-18T18:47:14.624Z] [worker-pool] Adding worker with key ~diagnostic~, total=2
[debug] [2020-04-18T18:47:14.624Z] [worker-pool] submitWork(triggerId=)
[debug] [2020-04-18T18:47:14.624Z] [worker-~diagnostic~-0505fc93-7951-4910-a1bf-db28a65eeec7]: Assigning socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\1484
[debug] [2020-04-18T18:47:14.624Z] [worker-~diagnostic~-0505fc93-7951-4910-a1bf-db28a65eeec7]: BUSY
[debug] [2020-04-18T18:47:14.628Z] [worker-api-3b6ff7e3-98ca-4cdf-a7b9-1d2982e1752b]: exited
[debug] [2020-04-18T18:47:14.628Z] [worker-api-3b6ff7e3-98ca-4cdf-a7b9-1d2982e1752b]: FINISHED
[debug] [2020-04-18T18:47:14.628Z] [worker-~diagnostic~-6271b543-bdf8-4854-99fc-83b9781e2e67]: exited
[debug] [2020-04-18T18:47:14.628Z] [worker-~diagnostic~-6271b543-bdf8-4854-99fc-83b9781e2e67]: FINISHED
[debug] [2020-04-18T18:47:14.629Z] [worker-api-1bc33b83-ae88-4dc7-8791-0292799bf8ed]: exited
[debug] [2020-04-18T18:47:14.629Z] [worker-api-1bc33b83-ae88-4dc7-8791-0292799bf8ed]: FINISHED
[debug] [2020-04-18T18:47:15.236Z] [runtime-status] [1484] Functions runtime initialized. {"cwd":"C:\\Applications\\pencil-analytics\\functions","node_version":"10.15.0"}
[debug] [2020-04-18T18:47:15.239Z] [runtime-status] [1484] Disabled runtime features: {"functions_config_helper":true,"network_filtering":true,"timeout":true,"memory_limiting":true,"admin_stubs":true,"pubsub_emulator":true}
[debug] [2020-04-18T18:47:15.243Z] [runtime-status] [1484] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-admin\\lib\\index.js"}
[debug] [2020-04-18T18:47:15.246Z] [runtime-status] [1484] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[debug] [2020-04-18T18:47:15.247Z] [runtime-status] [1484] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[info] >  [Nest] 1484   - 2020-04-18 20:47:16   [NestFactory] Starting Nest application...
[debug] [2020-04-18T18:47:16.399Z] [worker-~diagnostic~-0505fc93-7951-4910-a1bf-db28a65eeec7]: IDLE
[info] >  [Nest] 1484   - 2020-04-18 20:47:16   [InstanceLoader] AppModule dependencies initialized +23ms
[info] >  [Nest] 1484   - 2020-04-18 20:47:16   [InstanceLoader] HttpModule dependencies initialized +1ms
[info] >  [Nest] 1484   - 2020-04-18 20:47:16   [InstanceLoader] ConfigHostModule dependencies initialized +1ms
[info] >  [Nest] 1484   - 2020-04-18 20:47:16   [InstanceLoader] ConfigModule dependencies initialized +450ms
[info] >  [Nest] 1484   - 2020-04-18 20:47:16   [InstanceLoader] StripeModule dependencies initialized +1ms
[info] >  [Nest] 1484   - 2020-04-18 20:47:16   [RoutesResolver] StripeController {/stripe}: +8ms
[info] >  [Nest] 1484   - 2020-04-18 20:47:16   [RouterExplorer] Mapped {/test, GET} route +5ms
[info] >  [Nest] 1484   - 2020-04-18 20:47:16   [RouterExplorer] Mapped {/checkout, POST} route +1ms
[info] >  [Nest] 1484   - 2020-04-18 20:47:16   [RouterExplorer] Mapped {/webhooks, POST} route +3ms
[info] >  [Nest] 1484   - 2020-04-18 20:47:16   [NestApplication] Nest application successfully started +3ms
[info] >  Nest Ready
[debug] [2020-04-18T18:47:37.851Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2020-04-18T18:47:37.851Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-18T18:47:37.851Z] Accepted request OPTIONS /pencil-test-98d8d/us-central1/api/stripe/checkout --> api
[debug] [2020-04-18T18:47:37.851Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1
[debug] [2020-04-18T18:47:37.851Z] [worker-pool] Cleaned up workers for api: 2 --> 0
[debug] [2020-04-18T18:47:37.874Z] [worker-pool] addWorker(api)
[debug] [2020-04-18T18:47:37.874Z] [worker-pool] Adding worker with key api, total=1
[debug] [2020-04-18T18:47:37.874Z] [worker-pool] submitWork(triggerId=api)
[debug] [2020-04-18T18:47:37.874Z] [worker-api-7fca102e-31ee-4b61-b6a6-b303c509b14a]: Assigning socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\16348
[debug] [2020-04-18T18:47:37.874Z] [worker-api-7fca102e-31ee-4b61-b6a6-b303c509b14a]: BUSY
[debug] [2020-04-18T18:47:38.438Z] [runtime-status] [16348] Functions runtime initialized. {"cwd":"C:\\Applications\\pencil-analytics\\functions","node_version":"10.15.0"}
[debug] [2020-04-18T18:47:38.440Z] [runtime-status] [16348] Disabled runtime features: {"functions_config_helper":true,"network_filtering":true,"timeout":true,"memory_limiting":true,"admin_stubs":true,"pubsub_emulator":true}
[debug] [2020-04-18T18:47:38.444Z] [runtime-status] [16348] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-admin\\lib\\index.js"}
[debug] [2020-04-18T18:47:38.447Z] [runtime-status] [16348] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[debug] [2020-04-18T18:47:38.448Z] [runtime-status] [16348] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[info] >  [Nest] 16348   - 2020-04-18 20:47:39   [NestFactory] Starting Nest application...
[debug] [2020-04-18T18:47:39.418Z] [runtime-status] [16348] Trigger "api" has been found, beginning invocation!
[info] i  functions: Beginning execution of "api"
[debug] [2020-04-18T18:47:39.419Z] [runtime-status] [16348] triggerDefinition {"httpsTrigger":{},"name":"api","entryPoint":"api"}
[debug] [2020-04-18T18:47:39.419Z] [runtime-status] [16348] Running api in mode HTTPS
[debug] [2020-04-18T18:47:39.422Z] [runtime-status] [16348] Attempting to listen to socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\16348
[info] >  [Nest] 16348   - 2020-04-18 20:47:39   [InstanceLoader] AppModule dependencies initialized +27ms
[info] >  [Nest] 16348   - 2020-04-18 20:47:39   [InstanceLoader] HttpModule dependencies initialized +1ms
[info] >  [Nest] 16348   - 2020-04-18 20:47:39   [InstanceLoader] ConfigHostModule dependencies initialized +1ms
[info] >  [Nest] 16348   - 2020-04-18 20:47:39   [InstanceLoader] ConfigModule dependencies initialized +435ms
[info] >  [Nest] 16348   - 2020-04-18 20:47:39   [InstanceLoader] StripeModule dependencies initialized +1ms
[info] >  [Nest] 16348   - 2020-04-18 20:47:39   [RoutesResolver] StripeController {/stripe}: +7ms
[info] >  [Nest] 16348   - 2020-04-18 20:47:39   [RouterExplorer] Mapped {/test, GET} route +4ms
[info] >  [Nest] 16348   - 2020-04-18 20:47:39   [RouterExplorer] Mapped {/checkout, POST} route +1ms
[info] >  [Nest] 16348   - 2020-04-18 20:47:39   [RouterExplorer] Mapped {/webhooks, POST} route +2ms
[info] >  [Nest] 16348   - 2020-04-18 20:47:39   [NestApplication] Nest application successfully started +4ms
[debug] [2020-04-18T18:47:39.901Z] [functions] Runtime ready! Sending request!
[info] >  Nest Ready
[debug] [2020-04-18T18:47:39.917Z] [runtime-status] [16348] Ephemeral server handling OPTIONS request
[debug] [2020-04-18T18:47:39.930Z] [work-queue] {"queueLength":1,"workRunningCount":1}
[debug] [2020-04-18T18:47:39.930Z] [work-queue] {"queueLength":0,"workRunningCount":2}
[debug] [2020-04-18T18:47:39.930Z] Accepted request POST /pencil-test-98d8d/us-central1/api/stripe/checkout --> api
[debug] [2020-04-18T18:47:39.937Z] [worker-pool] addWorker(api)
[debug] [2020-04-18T18:47:39.937Z] [worker-pool] Adding worker with key api, total=2
[debug] [2020-04-18T18:47:39.937Z] [worker-pool] submitWork(triggerId=api)
[debug] [2020-04-18T18:47:39.937Z] [worker-api-4807db80-a3ec-4edc-8f80-889db7e58528]: Assigning socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\22492
[debug] [2020-04-18T18:47:39.938Z] [worker-api-4807db80-a3ec-4edc-8f80-889db7e58528]: BUSY
[debug] [2020-04-18T18:47:39.938Z] [runtime-status] [16348] Ephemeral server survived.
[info] i  functions: Finished "api" in ~1s
[debug] [2020-04-18T18:47:39.939Z] [worker-api-7fca102e-31ee-4b61-b6a6-b303c509b14a]: IDLE
[debug] [2020-04-18T18:47:39.939Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-18T18:47:40.498Z] [runtime-status] [22492] Functions runtime initialized. {"cwd":"C:\\Applications\\pencil-analytics\\functions","node_version":"10.15.0"}
[debug] [2020-04-18T18:47:40.500Z] [runtime-status] [22492] Disabled runtime features: {"functions_config_helper":true,"network_filtering":true,"timeout":true,"memory_limiting":true,"admin_stubs":true,"pubsub_emulator":true}
[debug] [2020-04-18T18:47:40.504Z] [runtime-status] [22492] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-admin\\lib\\index.js"}
[debug] [2020-04-18T18:47:40.506Z] [runtime-status] [22492] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[debug] [2020-04-18T18:47:40.507Z] [runtime-status] [22492] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[info] >  [Nest] 22492   - 2020-04-18 20:47:41   [NestFactory] Starting Nest application...
[debug] [2020-04-18T18:47:41.568Z] [runtime-status] [22492] Trigger "api" has been found, beginning invocation!
[info] i  functions: Beginning execution of "api"
[debug] [2020-04-18T18:47:41.569Z] [runtime-status] [22492] triggerDefinition {"httpsTrigger":{},"name":"api","entryPoint":"api"}
[debug] [2020-04-18T18:47:41.569Z] [runtime-status] [22492] Running api in mode HTTPS
[debug] [2020-04-18T18:47:41.573Z] [runtime-status] [22492] Attempting to listen to socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\22492
[info] >  [Nest] 22492   - 2020-04-18 20:47:41   [InstanceLoader] AppModule dependencies initialized +29ms
[info] >  [Nest] 22492   - 2020-04-18 20:47:41   [InstanceLoader] HttpModule dependencies initialized +1ms
[info] >  [Nest] 22492   - 2020-04-18 20:47:41   [InstanceLoader] ConfigHostModule dependencies initialized +2ms
[info] >  [Nest] 22492   - 2020-04-18 20:47:41   [InstanceLoader] ConfigModule dependencies initialized +365ms
[info] >  [Nest] 22492   - 2020-04-18 20:47:41   [InstanceLoader] StripeModule dependencies initialized +1ms
[info] >  [Nest] 22492   - 2020-04-18 20:47:41   [RoutesResolver] StripeController {/stripe}: +10ms
[info] >  [Nest] 22492   - 2020-04-18 20:47:41   [RouterExplorer] Mapped {/test, GET} route +4ms
[info] >  [Nest] 22492   - 2020-04-18 20:47:41   [RouterExplorer] Mapped {/checkout, POST} route +1ms
[info] >  [Nest] 22492   - 2020-04-18 20:47:41   [RouterExplorer] Mapped {/webhooks, POST} route +2ms
[info] >  [Nest] 22492   - 2020-04-18 20:47:41   [NestApplication] Nest application successfully started +3ms
[debug] [2020-04-18T18:47:41.985Z] [functions] Runtime ready! Sending request!
[info] >  Nest Ready
[debug] [2020-04-18T18:47:42.020Z] [runtime-status] [22492] Ephemeral server handling POST request
[debug] [2020-04-18T18:47:42.026Z] [runtime-status] [22492] Ephemeral server survived.
[info] >  New Session Config: {"payment_method_types":["card"],"success_url":"VByWHSqdDVoLFydjjAm3/?purchaseResult=success&ongoingPurchaseSessionId=http://localhost:4200/subscribe/stripe-checkout","cancel_url":"VByWHSqdDVoLFydjjAm3/?purchaseResult=failed","client_reference_id":"http://localhost:4200/subscribe/stripe-checkout","subscription_data":{"items":[{"plan":"prod_H7TbPV6ah3DDzR"}]}}
[info] >  Unexpected error occured while purchasing { Error: No such plan: prod_H7TbPV6ah3DDzR
[info] >      at Function.generate (C:\Applications\pencil-analytics\functions\node_modules\stripe\lib\Error.js:52:16)
[info] >      at IncomingMessage.res.once (C:\Applications\pencil-analytics\functions\node_modules\stripe\lib\StripeResource.js:168:39)
[info] >      at Object.onceWrapper (events.js:273:13)
[info] >      at IncomingMessage.emit (events.js:187:15)
[info] >      at endReadableNT (_stream_readable.js:1094:12)
[info] >      at process._tickCallback (internal/process/next_tick.js:63:19)
[info] >    raw:
[info] >     { code: 'resource_missing',
[info] >       doc_url: 'https://stripe.com/docs/error-codes/resource-missing',
[info] >       message: 'No such plan: prod_H7TbPV6ah3DDzR',
[info] >       param: 'subscription_data[items][0][plan]',
[info] >       type: 'invalid_request_error',
[info] >       headers:
[info] >        { server: 'nginx',
[info] >          date: 'Sat, 18 Apr 2020 18:47:42 GMT',
[info] >          'content-type': 'application/json',
[info] >          'content-length': '262',
[info] >          connection: 'keep-alive',
[info] >          'access-control-allow-credentials': 'true',
[info] >          'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',
[info] >          'access-control-allow-origin': '*',
[info] >          'access-control-expose-headers':
[info] >           'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',
[info] >          'access-control-max-age': '300',
[info] >          'cache-control': 'no-cache, no-store',
[info] >          'request-id': 'req_7TaFvZgL55pAAR',
[info] >          'stripe-version': '2020-03-02',
[info] >          'strict-transport-security': 'max-age=31556926; includeSubDomains; preload' },
[info] >       statusCode: 400,
[info] >       requestId: 'req_7TaFvZgL55pAAR' },
[info] >    rawType: 'invalid_request_error',
[info] >    code: 'resource_missing',
[info] >    param: 'subscription_data[items][0][plan]',
[info] >    detail: undefined,
[info] >    headers:
[info] >     { server: 'nginx',
[info] >       date: 'Sat, 18 Apr 2020 18:47:42 GMT',
[info] >       'content-type': 'application/json',
[info] >       'content-length': '262',
[info] >       connection: 'keep-alive',
[info] >       'access-control-allow-credentials': 'true',
[info] >       'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',
[info] >       'access-control-allow-origin': '*',
[info] >       'access-control-expose-headers':
[info] >        'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',
[info] >       'access-control-max-age': '300',
[info] >       'cache-control': 'no-cache, no-store',
[info] >       'request-id': 'req_7TaFvZgL55pAAR',
[info] >       'stripe-version': '2020-03-02',
[info] >       'strict-transport-security': 'max-age=31556926; includeSubDomains; preload' },
[info] >    requestId: 'req_7TaFvZgL55pAAR',
[info] >    statusCode: 400,
[info] >    charge: undefined,
[info] >    decline_code: undefined,
[info] >    payment_intent: undefined,
[info] >    payment_method: undefined,
[info] >    setup_intent: undefined,
[info] >    source: undefined,
[info] >    type: 'StripeInvalidRequestError' }
[info] i  functions: Finished "api" in ~1s
[debug] [2020-04-18T18:47:43.313Z] [worker-api-4807db80-a3ec-4edc-8f80-889db7e58528]: IDLE
[debug] [2020-04-18T18:47:43.313Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2020-04-18T18:49:14.158Z] File C:\Applications\pencil-analytics\functions\src\stripe\stripe\stripe.service.ts changed, reloading triggers
[debug] [2020-04-18T18:49:15.160Z] [worker-pool] Shutting down IDLE worker (~diagnostic~)
[debug] [2020-04-18T18:49:15.160Z] [worker-~diagnostic~-0505fc93-7951-4910-a1bf-db28a65eeec7]: FINISHING
[debug] [2020-04-18T18:49:15.161Z] [worker-pool] Shutting down IDLE worker (api)
[debug] [2020-04-18T18:49:15.161Z] [worker-api-7fca102e-31ee-4b61-b6a6-b303c509b14a]: FINISHING
[debug] [2020-04-18T18:49:15.162Z] [worker-pool] Shutting down IDLE worker (api)
[debug] [2020-04-18T18:49:15.162Z] [worker-api-4807db80-a3ec-4edc-8f80-889db7e58528]: FINISHING
[debug] [2020-04-18T18:49:15.193Z] [worker-pool] addWorker(~diagnostic~)
[debug] [2020-04-18T18:49:15.193Z] [worker-pool] Adding worker with key ~diagnostic~, total=2
[debug] [2020-04-18T18:49:15.193Z] [worker-pool] submitWork(triggerId=)
[debug] [2020-04-18T18:49:15.193Z] [worker-~diagnostic~-3909bd61-58be-4fa8-bfe2-69cb784f9582]: Assigning socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\11132
[debug] [2020-04-18T18:49:15.193Z] [worker-~diagnostic~-3909bd61-58be-4fa8-bfe2-69cb784f9582]: BUSY
[debug] [2020-04-18T18:49:15.195Z] [worker-api-4807db80-a3ec-4edc-8f80-889db7e58528]: exited
[debug] [2020-04-18T18:49:15.195Z] [worker-api-4807db80-a3ec-4edc-8f80-889db7e58528]: FINISHED
[debug] [2020-04-18T18:49:15.195Z] [worker-api-7fca102e-31ee-4b61-b6a6-b303c509b14a]: exited
[debug] [2020-04-18T18:49:15.195Z] [worker-api-7fca102e-31ee-4b61-b6a6-b303c509b14a]: FINISHED
[debug] [2020-04-18T18:49:15.195Z] [worker-~diagnostic~-0505fc93-7951-4910-a1bf-db28a65eeec7]: exited
[debug] [2020-04-18T18:49:15.197Z] [worker-~diagnostic~-0505fc93-7951-4910-a1bf-db28a65eeec7]: FINISHED
[debug] [2020-04-18T18:49:15.750Z] [runtime-status] [11132] Functions runtime initialized. {"cwd":"C:\\Applications\\pencil-analytics\\functions","node_version":"10.15.0"}
[debug] [2020-04-18T18:49:15.753Z] [runtime-status] [11132] Disabled runtime features: {"functions_config_helper":true,"network_filtering":true,"timeout":true,"memory_limiting":true,"admin_stubs":true,"pubsub_emulator":true}
[debug] [2020-04-18T18:49:15.757Z] [runtime-status] [11132] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-admin\\lib\\index.js"}
[debug] [2020-04-18T18:49:15.760Z] [runtime-status] [11132] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[debug] [2020-04-18T18:49:15.761Z] [runtime-status] [11132] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[info] >  [Nest] 11132   - 2020-04-18 20:49:16   [NestFactory] Starting Nest application...
[debug] [2020-04-18T18:49:16.711Z] [worker-~diagnostic~-3909bd61-58be-4fa8-bfe2-69cb784f9582]: IDLE
[info] >  [Nest] 11132   - 2020-04-18 20:49:16   [InstanceLoader] AppModule dependencies initialized +23ms
[info] >  [Nest] 11132   - 2020-04-18 20:49:16   [InstanceLoader] HttpModule dependencies initialized +1ms
[info] >  [Nest] 11132   - 2020-04-18 20:49:16   [InstanceLoader] ConfigHostModule dependencies initialized +1ms
[info] >  [Nest] 11132   - 2020-04-18 20:49:17   [InstanceLoader] ConfigModule dependencies initialized +442ms
[info] >  [Nest] 11132   - 2020-04-18 20:49:17   [InstanceLoader] StripeModule dependencies initialized +1ms
[info] >  [Nest] 11132   - 2020-04-18 20:49:17   [RoutesResolver] StripeController {/stripe}: +8ms
[info] >  [Nest] 11132   - 2020-04-18 20:49:17   [RouterExplorer] Mapped {/test, GET} route +18ms
[info] >  [Nest] 11132   - 2020-04-18 20:49:17   [RouterExplorer] Mapped {/checkout, POST} route +3ms
[info] >  [Nest] 11132   - 2020-04-18 20:49:17   [RouterExplorer] Mapped {/webhooks, POST} route +1ms
[info] >  [Nest] 11132   - 2020-04-18 20:49:17   [NestApplication] Nest application successfully started +6ms
[info] >  Nest Ready
[debug] [2020-04-18T18:49:29.244Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2020-04-18T18:49:29.245Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-18T18:49:29.245Z] Accepted request OPTIONS /pencil-test-98d8d/us-central1/api/stripe/checkout --> api
[debug] [2020-04-18T18:49:29.245Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1
[debug] [2020-04-18T18:49:29.245Z] [worker-pool] Cleaned up workers for api: 2 --> 0
[debug] [2020-04-18T18:49:29.265Z] [worker-pool] addWorker(api)
[debug] [2020-04-18T18:49:29.266Z] [worker-pool] Adding worker with key api, total=1
[debug] [2020-04-18T18:49:29.266Z] [worker-pool] submitWork(triggerId=api)
[debug] [2020-04-18T18:49:29.266Z] [worker-api-5871d54b-dad3-40bc-aad6-37115c9674e0]: Assigning socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\21244
[debug] [2020-04-18T18:49:29.266Z] [worker-api-5871d54b-dad3-40bc-aad6-37115c9674e0]: BUSY
[debug] [2020-04-18T18:49:29.938Z] [runtime-status] [21244] Functions runtime initialized. {"cwd":"C:\\Applications\\pencil-analytics\\functions","node_version":"10.15.0"}
[debug] [2020-04-18T18:49:29.940Z] [runtime-status] [21244] Disabled runtime features: {"functions_config_helper":true,"network_filtering":true,"timeout":true,"memory_limiting":true,"admin_stubs":true,"pubsub_emulator":true}
[debug] [2020-04-18T18:49:29.945Z] [runtime-status] [21244] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-admin\\lib\\index.js"}
[debug] [2020-04-18T18:49:29.947Z] [runtime-status] [21244] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[debug] [2020-04-18T18:49:29.948Z] [runtime-status] [21244] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[info] >  [Nest] 21244   - 2020-04-18 20:49:30   [NestFactory] Starting Nest application...
[debug] [2020-04-18T18:49:30.848Z] [runtime-status] [21244] Trigger "api" has been found, beginning invocation!
[info] i  functions: Beginning execution of "api"
[debug] [2020-04-18T18:49:30.855Z] [runtime-status] [21244] triggerDefinition {"httpsTrigger":{},"name":"api","entryPoint":"api"}
[debug] [2020-04-18T18:49:30.855Z] [runtime-status] [21244] Running api in mode HTTPS
[debug] [2020-04-18T18:49:30.855Z] [runtime-status] [21244] Attempting to listen to socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\21244
[info] >  [Nest] 21244   - 2020-04-18 20:49:30   [InstanceLoader] AppModule dependencies initialized +30ms
[info] >  [Nest] 21244   - 2020-04-18 20:49:30   [InstanceLoader] HttpModule dependencies initialized +1ms
[info] >  [Nest] 21244   - 2020-04-18 20:49:30   [InstanceLoader] ConfigHostModule dependencies initialized +0ms
[info] >  [Nest] 21244   - 2020-04-18 20:49:31   [InstanceLoader] ConfigModule dependencies initialized +389ms
[info] >  [Nest] 21244   - 2020-04-18 20:49:31   [InstanceLoader] StripeModule dependencies initialized +1ms
[info] >  [Nest] 21244   - 2020-04-18 20:49:31   [RoutesResolver] StripeController {/stripe}: +5ms
[info] >  [Nest] 21244   - 2020-04-18 20:49:31   [RouterExplorer] Mapped {/test, GET} route +6ms
[info] >  [Nest] 21244   - 2020-04-18 20:49:31   [RouterExplorer] Mapped {/checkout, POST} route +1ms
[info] >  [Nest] 21244   - 2020-04-18 20:49:31   [RouterExplorer] Mapped {/webhooks, POST} route +1ms
[info] >  [Nest] 21244   - 2020-04-18 20:49:31   [NestApplication] Nest application successfully started +4ms
[debug] [2020-04-18T18:49:31.286Z] [functions] Runtime ready! Sending request!
[info] >  Nest Ready
[debug] [2020-04-18T18:49:31.297Z] [runtime-status] [21244] Ephemeral server handling OPTIONS request
[debug] [2020-04-18T18:49:31.304Z] [runtime-status] [21244] Ephemeral server survived.
[debug] [2020-04-18T18:49:31.306Z] [work-queue] {"queueLength":1,"workRunningCount":1}
[debug] [2020-04-18T18:49:31.306Z] [work-queue] {"queueLength":0,"workRunningCount":2}
[debug] [2020-04-18T18:49:31.306Z] Accepted request POST /pencil-test-98d8d/us-central1/api/stripe/checkout --> api
[debug] [2020-04-18T18:49:31.314Z] [worker-pool] addWorker(api)
[debug] [2020-04-18T18:49:31.314Z] [worker-pool] Adding worker with key api, total=2
[debug] [2020-04-18T18:49:31.314Z] [worker-pool] submitWork(triggerId=api)
[debug] [2020-04-18T18:49:31.314Z] [worker-api-bda5b613-7391-4500-a51b-3813f2a9d598]: Assigning socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\16176
[debug] [2020-04-18T18:49:31.314Z] [worker-api-bda5b613-7391-4500-a51b-3813f2a9d598]: BUSY
[info] i  functions: Finished "api" in ~1s
[debug] [2020-04-18T18:49:31.325Z] [worker-api-5871d54b-dad3-40bc-aad6-37115c9674e0]: IDLE
[debug] [2020-04-18T18:49:31.325Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-18T18:49:31.773Z] [runtime-status] [16176] Functions runtime initialized. {"cwd":"C:\\Applications\\pencil-analytics\\functions","node_version":"10.15.0"}
[debug] [2020-04-18T18:49:31.775Z] [runtime-status] [16176] Disabled runtime features: {"functions_config_helper":true,"network_filtering":true,"timeout":true,"memory_limiting":true,"admin_stubs":true,"pubsub_emulator":true}
[debug] [2020-04-18T18:49:31.779Z] [runtime-status] [16176] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-admin\\lib\\index.js"}
[debug] [2020-04-18T18:49:31.781Z] [runtime-status] [16176] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[debug] [2020-04-18T18:49:31.782Z] [runtime-status] [16176] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[info] >  [Nest] 16176   - 2020-04-18 20:49:32   [NestFactory] Starting Nest application...
[debug] [2020-04-18T18:49:32.769Z] [runtime-status] [16176] Trigger "api" has been found, beginning invocation!
[info] i  functions: Beginning execution of "api"
[debug] [2020-04-18T18:49:32.773Z] [runtime-status] [16176] triggerDefinition {"httpsTrigger":{},"name":"api","entryPoint":"api"}
[debug] [2020-04-18T18:49:32.773Z] [runtime-status] [16176] Running api in mode HTTPS
[debug] [2020-04-18T18:49:32.775Z] [runtime-status] [16176] Attempting to listen to socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\16176
[info] >  [Nest] 16176   - 2020-04-18 20:49:32   [InstanceLoader] AppModule dependencies initialized +29ms
[info] >  [Nest] 16176   - 2020-04-18 20:49:32   [InstanceLoader] HttpModule dependencies initialized +1ms
[info] >  [Nest] 16176   - 2020-04-18 20:49:32   [InstanceLoader] ConfigHostModule dependencies initialized +1ms
[info] >  [Nest] 16176   - 2020-04-18 20:49:33   [InstanceLoader] ConfigModule dependencies initialized +378ms
[info] >  [Nest] 16176   - 2020-04-18 20:49:33   [InstanceLoader] StripeModule dependencies initialized +1ms
[info] >  [Nest] 16176   - 2020-04-18 20:49:33   [RoutesResolver] StripeController {/stripe}: +5ms
[info] >  [Nest] 16176   - 2020-04-18 20:49:33   [RouterExplorer] Mapped {/test, GET} route +5ms
[info] >  [Nest] 16176   - 2020-04-18 20:49:33   [RouterExplorer] Mapped {/checkout, POST} route +2ms
[info] >  [Nest] 16176   - 2020-04-18 20:49:33   [RouterExplorer] Mapped {/webhooks, POST} route +1ms
[info] >  [Nest] 16176   - 2020-04-18 20:49:33   [NestApplication] Nest application successfully started +3ms
[debug] [2020-04-18T18:49:33.191Z] [functions] Runtime ready! Sending request!
[info] >  Nest Ready
[debug] [2020-04-18T18:49:33.237Z] [runtime-status] [16176] Ephemeral server handling POST request
[debug] [2020-04-18T18:49:33.242Z] [runtime-status] [16176] Ephemeral server survived.
[info] >  New Session Config: {"payment_method_types":["card"],"success_url":"knoeZO44Stn7mQu8DeoP/?purchaseResult=success&ongoingPurchaseSessionId=http://localhost:4200/subscribe/stripe-checkout","cancel_url":"knoeZO44Stn7mQu8DeoP/?purchaseResult=failed","client_reference_id":"http://localhost:4200/subscribe/stripe-checkout","subscription_data":{"items":[{"plan":"plan_H7Td6f8hOE5R9F"}]}}
[info] >  Unexpected error occured while purchasing { Error: Invalid URL: knoeZO44Stn7mQu8DeoP/?purchaseResult=success&ongoingPurchaseSessionId=http://localhost:4200/subscribe/stripe-checkout. URLs must begin with http or https.
[info] >      at Function.generate (C:\Applications\pencil-analytics\functions\node_modules\stripe\lib\Error.js:52:16)
[info] >      at IncomingMessage.res.once (C:\Applications\pencil-analytics\functions\node_modules\stripe\lib\StripeResource.js:168:39)
[info] >      at Object.onceWrapper (events.js:273:13)
[info] >      at IncomingMessage.emit (events.js:187:15)
[info] >      at endReadableNT (_stream_readable.js:1094:12)
[info] >      at process._tickCallback (internal/process/next_tick.js:63:19)
[info] >    raw:
[info] >     { code: 'url_invalid',
[info] >       doc_url: 'https://stripe.com/docs/error-codes/url-invalid',
[info] >       message:
[info] >        'Invalid URL: knoeZO44Stn7mQu8DeoP/?purchaseResult=success&ongoingPurchaseSessionId=http://localhost:4200/subscribe/stripe-checkout. URLs must begin with http or https.',
[info] >       param: 'success_url',
[info] >       type: 'invalid_request_error',
[info] >       headers:
[info] >        { server: 'nginx',
[info] >          date: 'Sat, 18 Apr 2020 18:49:34 GMT',
[info] >          'content-type': 'application/json',
[info] >          'content-length': '369',
[info] >          connection: 'keep-alive',
[info] >          'access-control-allow-credentials': 'true',
[info] >          'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',
[info] >          'access-control-allow-origin': '*',
[info] >          'access-control-expose-headers':
[info] >           'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',
[info] >          'access-control-max-age': '300',
[info] >          'cache-control': 'no-cache, no-store',
[info] >          'request-id': 'req_uweAy0pGKtidq5',
[info] >          'stripe-version': '2020-03-02',
[info] >          'strict-transport-security': 'max-age=31556926; includeSubDomains; preload' },
[info] >       statusCode: 400,
[info] >       requestId: 'req_uweAy0pGKtidq5' },
[info] >    rawType: 'invalid_request_error',
[info] >    code: 'url_invalid',
[info] >    param: 'success_url',
[info] >    detail: undefined,
[info] >    headers:
[info] >     { server: 'nginx',
[info] >       date: 'Sat, 18 Apr 2020 18:49:34 GMT',
[info] >       'content-type': 'application/json',
[info] >       'content-length': '369',
[info] >       connection: 'keep-alive',
[info] >       'access-control-allow-credentials': 'true',
[info] >       'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',
[info] >       'access-control-allow-origin': '*',
[info] >       'access-control-expose-headers':
[info] >        'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',
[info] >       'access-control-max-age': '300',
[info] >       'cache-control': 'no-cache, no-store',
[info] >       'request-id': 'req_uweAy0pGKtidq5',
[info] >       'stripe-version': '2020-03-02',
[info] >       'strict-transport-security': 'max-age=31556926; includeSubDomains; preload' },
[info] >    requestId: 'req_uweAy0pGKtidq5',
[info] >    statusCode: 400,
[info] >    charge: undefined,
[info] >    decline_code: undefined,
[info] >    payment_intent: undefined,
[info] >    payment_method: undefined,
[info] >    setup_intent: undefined,
[info] >    source: undefined,
[info] >    type: 'StripeInvalidRequestError' }
[info] i  functions: Finished "api" in ~1s
[debug] [2020-04-18T18:49:34.721Z] [worker-api-bda5b613-7391-4500-a51b-3813f2a9d598]: IDLE
[debug] [2020-04-18T18:49:34.721Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2020-04-18T18:51:32.078Z] File C:\Applications\pencil-analytics\functions\src\stripe\stripe\stripe.service.ts changed, reloading triggers
[debug] [2020-04-18T18:51:32.481Z] File C:\Applications\pencil-analytics\functions\lib\stripe\stripe\stripe.service.js.map changed, reloading triggers
[debug] [2020-04-18T18:51:32.484Z] File C:\Applications\pencil-analytics\functions\lib\stripe\stripe\stripe.service.js changed, reloading triggers
[debug] [2020-04-18T18:51:32.487Z] File C:\Applications\pencil-analytics\functions\lib\stripe\stripe\stripe.service.d.ts changed, reloading triggers
[debug] [2020-04-18T18:51:32.521Z] File C:\Applications\pencil-analytics\functions\lib\tsconfig.tsbuildinfo changed, reloading triggers
[debug] [2020-04-18T18:51:33.521Z] [worker-pool] Shutting down IDLE worker (~diagnostic~)
[debug] [2020-04-18T18:51:33.521Z] [worker-~diagnostic~-3909bd61-58be-4fa8-bfe2-69cb784f9582]: FINISHING
[debug] [2020-04-18T18:51:33.522Z] [worker-pool] Shutting down IDLE worker (api)
[debug] [2020-04-18T18:51:33.522Z] [worker-api-5871d54b-dad3-40bc-aad6-37115c9674e0]: FINISHING
[debug] [2020-04-18T18:51:33.522Z] [worker-pool] Shutting down IDLE worker (api)
[debug] [2020-04-18T18:51:33.522Z] [worker-api-bda5b613-7391-4500-a51b-3813f2a9d598]: FINISHING
[debug] [2020-04-18T18:51:33.535Z] [worker-pool] addWorker(~diagnostic~)
[debug] [2020-04-18T18:51:33.535Z] [worker-pool] Adding worker with key ~diagnostic~, total=2
[debug] [2020-04-18T18:51:33.535Z] [worker-pool] submitWork(triggerId=)
[debug] [2020-04-18T18:51:33.535Z] [worker-~diagnostic~-5f07abee-f94c-4cb3-8b75-21065a6764e8]: Assigning socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\12104
[debug] [2020-04-18T18:51:33.535Z] [worker-~diagnostic~-5f07abee-f94c-4cb3-8b75-21065a6764e8]: BUSY
[debug] [2020-04-18T18:51:33.536Z] [worker-~diagnostic~-3909bd61-58be-4fa8-bfe2-69cb784f9582]: exited
[debug] [2020-04-18T18:51:33.536Z] [worker-~diagnostic~-3909bd61-58be-4fa8-bfe2-69cb784f9582]: FINISHED
[debug] [2020-04-18T18:51:33.536Z] [worker-api-bda5b613-7391-4500-a51b-3813f2a9d598]: exited
[debug] [2020-04-18T18:51:33.536Z] [worker-api-bda5b613-7391-4500-a51b-3813f2a9d598]: FINISHED
[debug] [2020-04-18T18:51:33.536Z] [worker-api-5871d54b-dad3-40bc-aad6-37115c9674e0]: exited
[debug] [2020-04-18T18:51:33.536Z] [worker-api-5871d54b-dad3-40bc-aad6-37115c9674e0]: FINISHED
[debug] [2020-04-18T18:51:34.152Z] [runtime-status] [12104] Functions runtime initialized. {"cwd":"C:\\Applications\\pencil-analytics\\functions","node_version":"10.15.0"}
[debug] [2020-04-18T18:51:34.154Z] [runtime-status] [12104] Disabled runtime features: {"functions_config_helper":true,"network_filtering":true,"timeout":true,"memory_limiting":true,"admin_stubs":true,"pubsub_emulator":true}
[debug] [2020-04-18T18:51:34.159Z] [runtime-status] [12104] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-admin\\lib\\index.js"}
[debug] [2020-04-18T18:51:34.166Z] [runtime-status] [12104] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[debug] [2020-04-18T18:51:34.167Z] [runtime-status] [12104] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[info] >  [Nest] 12104   - 2020-04-18 20:51:35   [NestFactory] Starting Nest application...
[debug] [2020-04-18T18:51:35.327Z] [worker-~diagnostic~-5f07abee-f94c-4cb3-8b75-21065a6764e8]: IDLE
[info] >  [Nest] 12104   - 2020-04-18 20:51:35   [InstanceLoader] AppModule dependencies initialized +22ms
[info] >  [Nest] 12104   - 2020-04-18 20:51:35   [InstanceLoader] HttpModule dependencies initialized +2ms
[info] >  [Nest] 12104   - 2020-04-18 20:51:35   [InstanceLoader] ConfigHostModule dependencies initialized +1ms
[info] >  [Nest] 12104   - 2020-04-18 20:51:36   [InstanceLoader] ConfigModule dependencies initialized +718ms
[info] >  [Nest] 12104   - 2020-04-18 20:51:36   [InstanceLoader] StripeModule dependencies initialized +1ms
[info] >  [Nest] 12104   - 2020-04-18 20:51:36   [RoutesResolver] StripeController {/stripe}: +11ms
[info] >  [Nest] 12104   - 2020-04-18 20:51:36   [RouterExplorer] Mapped {/test, GET} route +10ms
[info] >  [Nest] 12104   - 2020-04-18 20:51:36   [RouterExplorer] Mapped {/checkout, POST} route +1ms
[info] >  [Nest] 12104   - 2020-04-18 20:51:36   [RouterExplorer] Mapped {/webhooks, POST} route +1ms
[info] >  [Nest] 12104   - 2020-04-18 20:51:36   [NestApplication] Nest application successfully started +15ms
[info] >  Nest Ready
[debug] [2020-04-18T18:51:47.837Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2020-04-18T18:51:47.838Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-18T18:51:47.838Z] Accepted request OPTIONS /pencil-test-98d8d/us-central1/api/stripe/checkout --> api
[debug] [2020-04-18T18:51:47.838Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1
[debug] [2020-04-18T18:51:47.838Z] [worker-pool] Cleaned up workers for api: 2 --> 0
[debug] [2020-04-18T18:51:47.863Z] [worker-pool] addWorker(api)
[debug] [2020-04-18T18:51:47.863Z] [worker-pool] Adding worker with key api, total=1
[debug] [2020-04-18T18:51:47.864Z] [worker-pool] submitWork(triggerId=api)
[debug] [2020-04-18T18:51:47.864Z] [worker-api-8ed9c8dd-fb75-4308-92af-623738d36ebd]: Assigning socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\21096
[debug] [2020-04-18T18:51:47.864Z] [worker-api-8ed9c8dd-fb75-4308-92af-623738d36ebd]: BUSY
[debug] [2020-04-18T18:51:48.387Z] [runtime-status] [21096] Functions runtime initialized. {"cwd":"C:\\Applications\\pencil-analytics\\functions","node_version":"10.15.0"}
[debug] [2020-04-18T18:51:48.389Z] [runtime-status] [21096] Disabled runtime features: {"functions_config_helper":true,"network_filtering":true,"timeout":true,"memory_limiting":true,"admin_stubs":true,"pubsub_emulator":true}
[debug] [2020-04-18T18:51:48.393Z] [runtime-status] [21096] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-admin\\lib\\index.js"}
[debug] [2020-04-18T18:51:48.394Z] [runtime-status] [21096] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[debug] [2020-04-18T18:51:48.395Z] [runtime-status] [21096] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[info] >  [Nest] 21096   - 2020-04-18 20:51:49   [NestFactory] Starting Nest application...
[debug] [2020-04-18T18:51:49.294Z] [runtime-status] [21096] Trigger "api" has been found, beginning invocation!
[info] i  functions: Beginning execution of "api"
[debug] [2020-04-18T18:51:49.299Z] [runtime-status] [21096] triggerDefinition {"httpsTrigger":{},"name":"api","entryPoint":"api"}
[debug] [2020-04-18T18:51:49.299Z] [runtime-status] [21096] Running api in mode HTTPS
[debug] [2020-04-18T18:51:49.299Z] [runtime-status] [21096] Attempting to listen to socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\21096
[info] >  [Nest] 21096   - 2020-04-18 20:51:49   [InstanceLoader] AppModule dependencies initialized +29ms
[info] >  [Nest] 21096   - 2020-04-18 20:51:49   [InstanceLoader] HttpModule dependencies initialized +0ms
[info] >  [Nest] 21096   - 2020-04-18 20:51:49   [InstanceLoader] ConfigHostModule dependencies initialized +1ms
[info] >  [Nest] 21096   - 2020-04-18 20:51:49   [InstanceLoader] ConfigModule dependencies initialized +396ms
[info] >  [Nest] 21096   - 2020-04-18 20:51:49   [InstanceLoader] StripeModule dependencies initialized +1ms
[info] >  [Nest] 21096   - 2020-04-18 20:51:49   [RoutesResolver] StripeController {/stripe}: +10ms
[info] >  [Nest] 21096   - 2020-04-18 20:51:49   [RouterExplorer] Mapped {/test, GET} route +4ms
[debug] [2020-04-18T18:51:49.736Z] [functions] Runtime ready! Sending request!
[info] >  [Nest] 21096   - 2020-04-18 20:51:49   [RouterExplorer] Mapped {/checkout, POST} route +2ms
[info] >  [Nest] 21096   - 2020-04-18 20:51:49   [RouterExplorer] Mapped {/webhooks, POST} route +0ms
[info] >  [Nest] 21096   - 2020-04-18 20:51:49   [NestApplication] Nest application successfully started +3ms
[info] >  Nest Ready
[debug] [2020-04-18T18:51:49.760Z] [runtime-status] [21096] Ephemeral server handling OPTIONS request
[debug] [2020-04-18T18:51:49.765Z] [runtime-status] [21096] Ephemeral server survived.
[debug] [2020-04-18T18:51:49.766Z] [work-queue] {"queueLength":1,"workRunningCount":1}
[debug] [2020-04-18T18:51:49.766Z] [work-queue] {"queueLength":0,"workRunningCount":2}
[debug] [2020-04-18T18:51:49.766Z] Accepted request POST /pencil-test-98d8d/us-central1/api/stripe/checkout --> api
[debug] [2020-04-18T18:51:49.775Z] [worker-pool] addWorker(api)
[debug] [2020-04-18T18:51:49.775Z] [worker-pool] Adding worker with key api, total=2
[debug] [2020-04-18T18:51:49.775Z] [worker-pool] submitWork(triggerId=api)
[debug] [2020-04-18T18:51:49.775Z] [worker-api-efb97894-d855-4e10-8e14-8588e3e03dad]: Assigning socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\4308
[debug] [2020-04-18T18:51:49.775Z] [worker-api-efb97894-d855-4e10-8e14-8588e3e03dad]: BUSY
[info] i  functions: Finished "api" in ~1s
[debug] [2020-04-18T18:51:49.776Z] [worker-api-8ed9c8dd-fb75-4308-92af-623738d36ebd]: IDLE
[debug] [2020-04-18T18:51:49.776Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-18T18:51:50.248Z] [runtime-status] [4308] Functions runtime initialized. {"cwd":"C:\\Applications\\pencil-analytics\\functions","node_version":"10.15.0"}
[debug] [2020-04-18T18:51:50.250Z] [runtime-status] [4308] Disabled runtime features: {"functions_config_helper":true,"network_filtering":true,"timeout":true,"memory_limiting":true,"admin_stubs":true,"pubsub_emulator":true}
[debug] [2020-04-18T18:51:50.253Z] [runtime-status] [4308] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-admin\\lib\\index.js"}
[debug] [2020-04-18T18:51:50.255Z] [runtime-status] [4308] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[debug] [2020-04-18T18:51:50.256Z] [runtime-status] [4308] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[info] >  [Nest] 4308   - 2020-04-18 20:51:51   [NestFactory] Starting Nest application...
[debug] [2020-04-18T18:51:51.177Z] [runtime-status] [4308] Trigger "api" has been found, beginning invocation!
[info] i  functions: Beginning execution of "api"
[debug] [2020-04-18T18:51:51.178Z] [runtime-status] [4308] triggerDefinition {"httpsTrigger":{},"name":"api","entryPoint":"api"}
[debug] [2020-04-18T18:51:51.178Z] [runtime-status] [4308] Running api in mode HTTPS
[debug] [2020-04-18T18:51:51.183Z] [runtime-status] [4308] Attempting to listen to socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\4308
[info] >  [Nest] 4308   - 2020-04-18 20:51:51   [InstanceLoader] AppModule dependencies initialized +35ms
[info] >  [Nest] 4308   - 2020-04-18 20:51:51   [InstanceLoader] HttpModule dependencies initialized +1ms
[info] >  [Nest] 4308   - 2020-04-18 20:51:51   [InstanceLoader] ConfigHostModule dependencies initialized +1ms
[info] >  [Nest] 4308   - 2020-04-18 20:51:51   [InstanceLoader] ConfigModule dependencies initialized +426ms
[info] >  [Nest] 4308   - 2020-04-18 20:51:51   [InstanceLoader] StripeModule dependencies initialized +1ms
[info] >  [Nest] 4308   - 2020-04-18 20:51:51   [RoutesResolver] StripeController {/stripe}: +7ms
[info] >  [Nest] 4308   - 2020-04-18 20:51:51   [RouterExplorer] Mapped {/test, GET} route +16ms
[info] >  [Nest] 4308   - 2020-04-18 20:51:51   [RouterExplorer] Mapped {/checkout, POST} route +2ms
[info] >  [Nest] 4308   - 2020-04-18 20:51:51   [RouterExplorer] Mapped {/webhooks, POST} route +12ms
[info] >  [Nest] 4308   - 2020-04-18 20:51:51   [NestApplication] Nest application successfully started +20ms
[info] >  Nest Ready
[debug] [2020-04-18T18:51:51.708Z] [functions] Runtime ready! Sending request!
[debug] [2020-04-18T18:51:51.766Z] [runtime-status] [4308] Ephemeral server handling POST request
[debug] [2020-04-18T18:51:51.770Z] [runtime-status] [4308] Ephemeral server survived.
[info] >  New Session Config: {"payment_method_types":["card"],"success_url":"8jjtIn2ZFDFABMbcmyLQ/?purchaseResult=success&ongoingPurchaseSessionId=http://localhost:4200/subscribe/stripe-checkout","cancel_url":"8jjtIn2ZFDFABMbcmyLQ/?purchaseResult=failed","client_reference_id":"http://localhost:4200/subscribe/stripe-checkout","subscription_data":{"items":[{"plan":"plan_H7Td6f8hOE5R9F"}]}}
[info] >  Unexpected error occured while purchasing { Error: Received unknown parameter: items
[info] >      at Function.generate (C:\Applications\pencil-analytics\functions\node_modules\stripe\lib\Error.js:52:16)
[info] >      at IncomingMessage.res.once (C:\Applications\pencil-analytics\functions\node_modules\stripe\lib\StripeResource.js:168:39)
[info] >      at Object.onceWrapper (events.js:273:13)
[info] >      at IncomingMessage.emit (events.js:187:15)
[info] >      at endReadableNT (_stream_readable.js:1094:12)
[info] >      at process._tickCallback (internal/process/next_tick.js:63:19)
[info] >    raw:
[info] >     { code: 'parameter_unknown',
[info] >       doc_url: 'https://stripe.com/docs/error-codes/parameter-unknown',
[info] >       message: 'Received unknown parameter: items',
[info] >       param: 'items',
[info] >       type: 'invalid_request_error',
[info] >       headers:
[info] >        { server: 'nginx',
[info] >          date: 'Sat, 18 Apr 2020 18:51:52 GMT',
[info] >          'content-type': 'application/json',
[info] >          'content-length': '236',
[info] >          connection: 'keep-alive',
[info] >          'access-control-allow-credentials': 'true',
[info] >          'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',
[info] >          'access-control-allow-origin': '*',
[info] >          'access-control-expose-headers':
[info] >           'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',
[info] >          'access-control-max-age': '300',
[info] >          'cache-control': 'no-cache, no-store',
[info] >          'request-id': 'req_thNkGjoivI8xS9',
[info] >          'stripe-version': '2020-03-02',
[info] >          'strict-transport-security': 'max-age=31556926; includeSubDomains; preload' },
[info] >       statusCode: 400,
[info] >       requestId: 'req_thNkGjoivI8xS9' },
[info] >    rawType: 'invalid_request_error',
[info] >    code: 'parameter_unknown',
[info] >    param: 'items',
[info] >    detail: undefined,
[info] >    headers:
[info] >     { server: 'nginx',
[info] >       date: 'Sat, 18 Apr 2020 18:51:52 GMT',
[info] >       'content-type': 'application/json',
[info] >       'content-length': '236',
[info] >       connection: 'keep-alive',
[info] >       'access-control-allow-credentials': 'true',
[info] >       'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',
[info] >       'access-control-allow-origin': '*',
[info] >       'access-control-expose-headers':
[info] >        'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',
[info] >       'access-control-max-age': '300',
[info] >       'cache-control': 'no-cache, no-store',
[info] >       'request-id': 'req_thNkGjoivI8xS9',
[info] >       'stripe-version': '2020-03-02',
[info] >       'strict-transport-security': 'max-age=31556926; includeSubDomains; preload' },
[info] >    requestId: 'req_thNkGjoivI8xS9',
[info] >    statusCode: 400,
[info] >    charge: undefined,
[info] >    decline_code: undefined,
[info] >    payment_intent: undefined,
[info] >    payment_method: undefined,
[info] >    setup_intent: undefined,
[info] >    source: undefined,
[info] >    type: 'StripeInvalidRequestError' }
[info] i  functions: Finished "api" in ~2s
[debug] [2020-04-18T18:51:53.243Z] [worker-api-efb97894-d855-4e10-8e14-8588e3e03dad]: IDLE
[debug] [2020-04-18T18:51:53.243Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2020-04-18T18:52:17.304Z] File C:\Applications\pencil-analytics\functions\src\stripe\stripe\stripe.service.ts changed, reloading triggers
[debug] [2020-04-18T18:52:17.975Z] File C:\Applications\pencil-analytics\functions\lib\stripe\stripe\stripe.service.js.map changed, reloading triggers
[debug] [2020-04-18T18:52:17.975Z] File C:\Applications\pencil-analytics\functions\lib\stripe\stripe\stripe.service.js changed, reloading triggers
[debug] [2020-04-18T18:52:17.982Z] File C:\Applications\pencil-analytics\functions\lib\stripe\stripe\stripe.service.d.ts changed, reloading triggers
[debug] [2020-04-18T18:52:18.009Z] File C:\Applications\pencil-analytics\functions\lib\tsconfig.tsbuildinfo changed, reloading triggers
[debug] [2020-04-18T18:52:19.009Z] [worker-pool] Shutting down IDLE worker (~diagnostic~)
[debug] [2020-04-18T18:52:19.009Z] [worker-~diagnostic~-5f07abee-f94c-4cb3-8b75-21065a6764e8]: FINISHING
[debug] [2020-04-18T18:52:19.010Z] [worker-pool] Shutting down IDLE worker (api)
[debug] [2020-04-18T18:52:19.010Z] [worker-api-8ed9c8dd-fb75-4308-92af-623738d36ebd]: FINISHING
[debug] [2020-04-18T18:52:19.010Z] [worker-pool] Shutting down IDLE worker (api)
[debug] [2020-04-18T18:52:19.011Z] [worker-api-efb97894-d855-4e10-8e14-8588e3e03dad]: FINISHING
[debug] [2020-04-18T18:52:19.021Z] [worker-pool] addWorker(~diagnostic~)
[debug] [2020-04-18T18:52:19.021Z] [worker-pool] Adding worker with key ~diagnostic~, total=2
[debug] [2020-04-18T18:52:19.022Z] [worker-pool] submitWork(triggerId=)
[debug] [2020-04-18T18:52:19.022Z] [worker-~diagnostic~-67005eae-71dd-4d7a-ba6c-354168777ee2]: Assigning socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\9588
[debug] [2020-04-18T18:52:19.022Z] [worker-~diagnostic~-67005eae-71dd-4d7a-ba6c-354168777ee2]: BUSY
[debug] [2020-04-18T18:52:19.023Z] [worker-api-efb97894-d855-4e10-8e14-8588e3e03dad]: exited
[debug] [2020-04-18T18:52:19.023Z] [worker-api-efb97894-d855-4e10-8e14-8588e3e03dad]: FINISHED
[debug] [2020-04-18T18:52:19.023Z] [worker-api-8ed9c8dd-fb75-4308-92af-623738d36ebd]: exited
[debug] [2020-04-18T18:52:19.023Z] [worker-api-8ed9c8dd-fb75-4308-92af-623738d36ebd]: FINISHED
[debug] [2020-04-18T18:52:19.023Z] [worker-~diagnostic~-5f07abee-f94c-4cb3-8b75-21065a6764e8]: exited
[debug] [2020-04-18T18:52:19.023Z] [worker-~diagnostic~-5f07abee-f94c-4cb3-8b75-21065a6764e8]: FINISHED
[debug] [2020-04-18T18:52:19.611Z] [runtime-status] [9588] Functions runtime initialized. {"cwd":"C:\\Applications\\pencil-analytics\\functions","node_version":"10.15.0"}
[debug] [2020-04-18T18:52:19.614Z] [runtime-status] [9588] Disabled runtime features: {"functions_config_helper":true,"network_filtering":true,"timeout":true,"memory_limiting":true,"admin_stubs":true,"pubsub_emulator":true}
[debug] [2020-04-18T18:52:19.621Z] [runtime-status] [9588] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-admin\\lib\\index.js"}
[debug] [2020-04-18T18:52:19.623Z] [runtime-status] [9588] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[debug] [2020-04-18T18:52:19.625Z] [runtime-status] [9588] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[info] >  [Nest] 9588   - 2020-04-18 20:52:20   [NestFactory] Starting Nest application...
[debug] [2020-04-18T18:52:20.732Z] [worker-~diagnostic~-67005eae-71dd-4d7a-ba6c-354168777ee2]: IDLE
[info] >  [Nest] 9588   - 2020-04-18 20:52:20   [InstanceLoader] AppModule dependencies initialized +25ms
[info] >  [Nest] 9588   - 2020-04-18 20:52:20   [InstanceLoader] HttpModule dependencies initialized +1ms
[info] >  [Nest] 9588   - 2020-04-18 20:52:20   [InstanceLoader] ConfigHostModule dependencies initialized +1ms
[info] >  [Nest] 9588   - 2020-04-18 20:52:21   [InstanceLoader] ConfigModule dependencies initialized +416ms
[info] >  [Nest] 9588   - 2020-04-18 20:52:21   [InstanceLoader] StripeModule dependencies initialized +1ms
[info] >  [Nest] 9588   - 2020-04-18 20:52:21   [RoutesResolver] StripeController {/stripe}: +5ms
[info] >  [Nest] 9588   - 2020-04-18 20:52:21   [RouterExplorer] Mapped {/test, GET} route +4ms
[info] >  [Nest] 9588   - 2020-04-18 20:52:21   [RouterExplorer] Mapped {/checkout, POST} route +4ms
[info] >  [Nest] 9588   - 2020-04-18 20:52:21   [RouterExplorer] Mapped {/webhooks, POST} route +2ms
[info] >  [Nest] 9588   - 2020-04-18 20:52:21   [NestApplication] Nest application successfully started +3ms
[info] >  Nest Ready
[debug] [2020-04-18T18:54:18.290Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2020-04-18T18:54:18.291Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-18T18:54:18.291Z] Accepted request OPTIONS /pencil-test-98d8d/us-central1/api/stripe/checkout --> api
[debug] [2020-04-18T18:54:18.291Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1
[debug] [2020-04-18T18:54:18.291Z] [worker-pool] Cleaned up workers for api: 2 --> 0
[debug] [2020-04-18T18:54:18.315Z] [worker-pool] addWorker(api)
[debug] [2020-04-18T18:54:18.315Z] [worker-pool] Adding worker with key api, total=1
[debug] [2020-04-18T18:54:18.316Z] [worker-pool] submitWork(triggerId=api)
[debug] [2020-04-18T18:54:18.316Z] [worker-api-7623bdfa-fabb-4033-95d8-4ab1828d43ef]: Assigning socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\20456
[debug] [2020-04-18T18:54:18.316Z] [worker-api-7623bdfa-fabb-4033-95d8-4ab1828d43ef]: BUSY
[debug] [2020-04-18T18:54:18.832Z] [runtime-status] [20456] Functions runtime initialized. {"cwd":"C:\\Applications\\pencil-analytics\\functions","node_version":"10.15.0"}
[debug] [2020-04-18T18:54:18.834Z] [runtime-status] [20456] Disabled runtime features: {"functions_config_helper":true,"network_filtering":true,"timeout":true,"memory_limiting":true,"admin_stubs":true,"pubsub_emulator":true}
[debug] [2020-04-18T18:54:18.838Z] [runtime-status] [20456] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-admin\\lib\\index.js"}
[debug] [2020-04-18T18:54:18.840Z] [runtime-status] [20456] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[debug] [2020-04-18T18:54:18.841Z] [runtime-status] [20456] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[info] >  [Nest] 20456   - 2020-04-18 20:54:19   [NestFactory] Starting Nest application...
[debug] [2020-04-18T18:54:19.797Z] [runtime-status] [20456] Trigger "api" has been found, beginning invocation!
[info] i  functions: Beginning execution of "api"
[debug] [2020-04-18T18:54:19.799Z] [runtime-status] [20456] triggerDefinition {"httpsTrigger":{},"name":"api","entryPoint":"api"}
[debug] [2020-04-18T18:54:19.799Z] [runtime-status] [20456] Running api in mode HTTPS
[debug] [2020-04-18T18:54:19.803Z] [runtime-status] [20456] Attempting to listen to socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\20456
[info] >  [Nest] 20456   - 2020-04-18 20:54:19   [InstanceLoader] AppModule dependencies initialized +28ms
[info] >  [Nest] 20456   - 2020-04-18 20:54:19   [InstanceLoader] HttpModule dependencies initialized +2ms
[info] >  [Nest] 20456   - 2020-04-18 20:54:19   [InstanceLoader] ConfigHostModule dependencies initialized +3ms
[info] >  [Nest] 20456   - 2020-04-18 20:54:20   [InstanceLoader] ConfigModule dependencies initialized +420ms
[info] >  [Nest] 20456   - 2020-04-18 20:54:20   [InstanceLoader] StripeModule dependencies initialized +1ms
[info] >  [Nest] 20456   - 2020-04-18 20:54:20   [RoutesResolver] StripeController {/stripe}: +6ms
[info] >  [Nest] 20456   - 2020-04-18 20:54:20   [RouterExplorer] Mapped {/test, GET} route +5ms
[info] >  [Nest] 20456   - 2020-04-18 20:54:20   [RouterExplorer] Mapped {/checkout, POST} route +1ms
[info] >  [Nest] 20456   - 2020-04-18 20:54:20   [RouterExplorer] Mapped {/webhooks, POST} route +1ms
[info] >  [Nest] 20456   - 2020-04-18 20:54:20   [NestApplication] Nest application successfully started +4ms
[debug] [2020-04-18T18:54:20.270Z] [functions] Runtime ready! Sending request!
[info] >  Nest Ready
[debug] [2020-04-18T18:54:20.284Z] [runtime-status] [20456] Ephemeral server handling OPTIONS request
[debug] [2020-04-18T18:54:20.295Z] [runtime-status] [20456] Ephemeral server survived.
[debug] [2020-04-18T18:54:20.296Z] [work-queue] {"queueLength":1,"workRunningCount":1}
[debug] [2020-04-18T18:54:20.296Z] [work-queue] {"queueLength":0,"workRunningCount":2}
[debug] [2020-04-18T18:54:20.296Z] Accepted request POST /pencil-test-98d8d/us-central1/api/stripe/checkout --> api
[debug] [2020-04-18T18:54:20.305Z] [worker-pool] addWorker(api)
[debug] [2020-04-18T18:54:20.305Z] [worker-pool] Adding worker with key api, total=2
[debug] [2020-04-18T18:54:20.305Z] [worker-pool] submitWork(triggerId=api)
[debug] [2020-04-18T18:54:20.305Z] [worker-api-70f3e074-ded7-4ae7-b36d-26db3950031a]: Assigning socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\12236
[debug] [2020-04-18T18:54:20.305Z] [worker-api-70f3e074-ded7-4ae7-b36d-26db3950031a]: BUSY
[info] i  functions: Finished "api" in ~1s
[debug] [2020-04-18T18:54:20.309Z] [worker-api-7623bdfa-fabb-4033-95d8-4ab1828d43ef]: IDLE
[debug] [2020-04-18T18:54:20.309Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-18T18:54:20.764Z] [runtime-status] [12236] Functions runtime initialized. {"cwd":"C:\\Applications\\pencil-analytics\\functions","node_version":"10.15.0"}
[debug] [2020-04-18T18:54:20.766Z] [runtime-status] [12236] Disabled runtime features: {"functions_config_helper":true,"network_filtering":true,"timeout":true,"memory_limiting":true,"admin_stubs":true,"pubsub_emulator":true}
[debug] [2020-04-18T18:54:20.770Z] [runtime-status] [12236] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-admin\\lib\\index.js"}
[debug] [2020-04-18T18:54:20.772Z] [runtime-status] [12236] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[debug] [2020-04-18T18:54:20.773Z] [runtime-status] [12236] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[info] >  [Nest] 12236   - 2020-04-18 20:54:21   [NestFactory] Starting Nest application...
[debug] [2020-04-18T18:54:21.668Z] [runtime-status] [12236] Trigger "api" has been found, beginning invocation!
[info] i  functions: Beginning execution of "api"
[debug] [2020-04-18T18:54:21.671Z] [runtime-status] [12236] triggerDefinition {"httpsTrigger":{},"name":"api","entryPoint":"api"}
[debug] [2020-04-18T18:54:21.671Z] [runtime-status] [12236] Running api in mode HTTPS
[debug] [2020-04-18T18:54:21.674Z] [runtime-status] [12236] Attempting to listen to socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\12236
[info] >  [Nest] 12236   - 2020-04-18 20:54:21   [InstanceLoader] AppModule dependencies initialized +30ms
[info] >  [Nest] 12236   - 2020-04-18 20:54:21   [InstanceLoader] HttpModule dependencies initialized +0ms
[info] >  [Nest] 12236   - 2020-04-18 20:54:21   [InstanceLoader] ConfigHostModule dependencies initialized +0ms
[info] >  [Nest] 12236   - 2020-04-18 20:54:22   [InstanceLoader] ConfigModule dependencies initialized +369ms
[info] >  [Nest] 12236   - 2020-04-18 20:54:22   [InstanceLoader] StripeModule dependencies initialized +1ms
[info] >  [Nest] 12236   - 2020-04-18 20:54:22   [RoutesResolver] StripeController {/stripe}: +5ms
[info] >  [Nest] 12236   - 2020-04-18 20:54:22   [RouterExplorer] Mapped {/test, GET} route +8ms
[info] >  [Nest] 12236   - 2020-04-18 20:54:22   [RouterExplorer] Mapped {/checkout, POST} route +2ms
[info] >  [Nest] 12236   - 2020-04-18 20:54:22   [RouterExplorer] Mapped {/webhooks, POST} route +1ms
[info] >  [Nest] 12236   - 2020-04-18 20:54:22   [NestApplication] Nest application successfully started +11ms
[info] >  Nest Ready
[debug] [2020-04-18T18:54:22.094Z] [functions] Runtime ready! Sending request!
[debug] [2020-04-18T18:54:22.151Z] [runtime-status] [12236] Ephemeral server handling POST request
[debug] [2020-04-18T18:54:22.157Z] [runtime-status] [12236] Ephemeral server survived.
[info] >  New Session Config: {"payment_method_types":["card"],"success_url":"BKotfbNS5yRylZgorJWp/?purchaseResult=success&ongoingPurchaseSessionId=http://localhost:4200/subscribe/stripe-checkout","cancel_url":"BKotfbNS5yRylZgorJWp/?purchaseResult=failed","client_reference_id":"http://localhost:4200/subscribe/stripe-checkout","subscription_data":{"items":[{"plan":"plan_H7Td6f8hOE5R9F"}]}}
[info] i  functions: Finished "api" in ~3s
[debug] [2020-04-18T18:54:25.504Z] [worker-api-70f3e074-ded7-4ae7-b36d-26db3950031a]: IDLE
[debug] [2020-04-18T18:54:25.504Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2020-04-18T19:03:51.804Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2020-04-18T19:03:51.804Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-18T19:03:51.804Z] Accepted request OPTIONS /pencil-test-98d8d/us-central1/api/stripe/checkout --> api
[debug] [2020-04-18T19:03:51.805Z] [worker-pool] submitWork(triggerId=api)
[debug] [2020-04-18T19:03:51.805Z] [worker-api-7623bdfa-fabb-4033-95d8-4ab1828d43ef]: Assigning socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\20456
[debug] [2020-04-18T19:03:51.805Z] [worker-api-7623bdfa-fabb-4033-95d8-4ab1828d43ef]: BUSY
[debug] [2020-04-18T19:03:51.807Z] [runtime-status] [20456] Trigger "api" has been found, beginning invocation!
[info] i  functions: Beginning execution of "api"
[debug] [2020-04-18T19:03:51.809Z] [runtime-status] [20456] triggerDefinition {"httpsTrigger":{},"name":"api","entryPoint":"api"}
[debug] [2020-04-18T19:03:51.809Z] [runtime-status] [20456] Running api in mode HTTPS
[debug] [2020-04-18T19:03:51.810Z] [runtime-status] [20456] Attempting to listen to socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\20456
[debug] [2020-04-18T19:03:51.814Z] [functions] Runtime ready! Sending request!
[debug] [2020-04-18T19:03:51.820Z] [runtime-status] [20456] Ephemeral server handling OPTIONS request
[debug] [2020-04-18T19:03:51.823Z] [runtime-status] [20456] Ephemeral server survived.
[info] i  functions: Finished "api" in ~1s
[debug] [2020-04-18T19:03:51.824Z] [worker-api-7623bdfa-fabb-4033-95d8-4ab1828d43ef]: IDLE
[debug] [2020-04-18T19:03:51.825Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2020-04-18T19:03:51.826Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2020-04-18T19:03:51.826Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-18T19:03:51.828Z] Accepted request POST /pencil-test-98d8d/us-central1/api/stripe/checkout --> api
[debug] [2020-04-18T19:03:51.828Z] [worker-pool] submitWork(triggerId=api)
[debug] [2020-04-18T19:03:51.828Z] [worker-api-7623bdfa-fabb-4033-95d8-4ab1828d43ef]: Assigning socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\20456
[debug] [2020-04-18T19:03:51.829Z] [worker-api-7623bdfa-fabb-4033-95d8-4ab1828d43ef]: BUSY
[debug] [2020-04-18T19:03:51.836Z] [runtime-status] [20456] Trigger "api" has been found, beginning invocation!
[info] i  functions: Beginning execution of "api"
[debug] [2020-04-18T19:03:51.838Z] [runtime-status] [20456] triggerDefinition {"httpsTrigger":{},"name":"api","entryPoint":"api"}
[debug] [2020-04-18T19:03:51.838Z] [runtime-status] [20456] Running api in mode HTTPS
[debug] [2020-04-18T19:03:51.839Z] [runtime-status] [20456] Attempting to listen to socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\20456
[debug] [2020-04-18T19:03:51.841Z] [functions] Runtime ready! Sending request!
[debug] [2020-04-18T19:03:51.879Z] [runtime-status] [20456] Ephemeral server handling POST request
[debug] [2020-04-18T19:03:51.882Z] [runtime-status] [20456] Ephemeral server survived.
[info] >  New Session Config: {"payment_method_types":["card"],"success_url":"eHAGvMjIBbvHdzEVWCOp/?purchaseResult=success&ongoingPurchaseSessionId=http://localhost:4200/subscribe/stripe-checkout","cancel_url":"eHAGvMjIBbvHdzEVWCOp/?purchaseResult=failed","client_reference_id":"http://localhost:4200/subscribe/stripe-checkout","subscription_data":{"items":[{"plan":"plan_H7Td6f8hOE5R9F"}]}}
[info] i  functions: Finished "api" in ~1s
[debug] [2020-04-18T19:03:53.253Z] [worker-api-7623bdfa-fabb-4033-95d8-4ab1828d43ef]: IDLE
[debug] [2020-04-18T19:03:53.253Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2020-04-18T19:07:31.959Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2020-04-18T19:07:31.959Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-18T19:07:31.959Z] Accepted request OPTIONS /pencil-test-98d8d/us-central1/api/stripe/checkout --> api
[debug] [2020-04-18T19:07:31.959Z] [worker-pool] submitWork(triggerId=api)
[debug] [2020-04-18T19:07:31.959Z] [worker-api-7623bdfa-fabb-4033-95d8-4ab1828d43ef]: Assigning socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\20456
[debug] [2020-04-18T19:07:31.959Z] [worker-api-7623bdfa-fabb-4033-95d8-4ab1828d43ef]: BUSY
[debug] [2020-04-18T19:07:31.960Z] [runtime-status] [20456] Trigger "api" has been found, beginning invocation!
[info] i  functions: Beginning execution of "api"
[debug] [2020-04-18T19:07:31.960Z] [runtime-status] [20456] triggerDefinition {"httpsTrigger":{},"name":"api","entryPoint":"api"}
[debug] [2020-04-18T19:07:31.960Z] [runtime-status] [20456] Running api in mode HTTPS
[debug] [2020-04-18T19:07:31.960Z] [runtime-status] [20456] Attempting to listen to socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\20456
[debug] [2020-04-18T19:07:31.961Z] [functions] Runtime ready! Sending request!
[debug] [2020-04-18T19:07:31.964Z] [runtime-status] [20456] Ephemeral server handling OPTIONS request
[debug] [2020-04-18T19:07:31.965Z] [runtime-status] [20456] Ephemeral server survived.
[info] i  functions: Finished "api" in ~1s
[debug] [2020-04-18T19:07:31.971Z] [worker-api-7623bdfa-fabb-4033-95d8-4ab1828d43ef]: IDLE
[debug] [2020-04-18T19:07:31.971Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2020-04-18T19:07:31.974Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2020-04-18T19:07:31.974Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-18T19:07:31.974Z] Accepted request POST /pencil-test-98d8d/us-central1/api/stripe/checkout --> api
[debug] [2020-04-18T19:07:31.974Z] [worker-pool] submitWork(triggerId=api)
[debug] [2020-04-18T19:07:31.974Z] [worker-api-7623bdfa-fabb-4033-95d8-4ab1828d43ef]: Assigning socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\20456
[debug] [2020-04-18T19:07:31.974Z] [worker-api-7623bdfa-fabb-4033-95d8-4ab1828d43ef]: BUSY
[debug] [2020-04-18T19:07:31.974Z] [runtime-status] [20456] Trigger "api" has been found, beginning invocation!
[info] i  functions: Beginning execution of "api"
[debug] [2020-04-18T19:07:31.975Z] [runtime-status] [20456] triggerDefinition {"httpsTrigger":{},"name":"api","entryPoint":"api"}
[debug] [2020-04-18T19:07:31.975Z] [runtime-status] [20456] Running api in mode HTTPS
[debug] [2020-04-18T19:07:31.975Z] [runtime-status] [20456] Attempting to listen to socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\20456
[debug] [2020-04-18T19:07:31.976Z] [functions] Runtime ready! Sending request!
[debug] [2020-04-18T19:07:31.978Z] [runtime-status] [20456] Ephemeral server handling POST request
[debug] [2020-04-18T19:07:31.979Z] [runtime-status] [20456] Ephemeral server survived.
[info] >  New Session Config: {"payment_method_types":["card"],"success_url":"sl4k1j7yGviB0U8Xi4J0/?purchaseResult=success&ongoingPurchaseSessionId=http://localhost:4200/subscription/stripe-checkout","cancel_url":"sl4k1j7yGviB0U8Xi4J0/?purchaseResult=failed","client_reference_id":"http://localhost:4200/subscription/stripe-checkout","subscription_data":{"items":[{"plan":"plan_H7Td6f8hOE5R9F"}]}}
[info] i  functions: Finished "api" in ~1s
[debug] [2020-04-18T19:07:32.623Z] [worker-api-7623bdfa-fabb-4033-95d8-4ab1828d43ef]: IDLE
[debug] [2020-04-18T19:07:32.623Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2020-04-18T19:18:15.712Z] File C:\Applications\pencil-analytics\functions\src\stripe\stripe\stripe.service.ts changed, reloading triggers
[debug] [2020-04-18T19:18:15.725Z] File C:\Applications\pencil-analytics\functions\src\stripe\stripe\stripe.controller.ts changed, reloading triggers
[debug] [2020-04-18T19:18:16.211Z] File C:\Applications\pencil-analytics\functions\lib\stripe\stripe\stripe.service.js.map changed, reloading triggers
[debug] [2020-04-18T19:18:16.213Z] File C:\Applications\pencil-analytics\functions\lib\stripe\stripe\stripe.service.js changed, reloading triggers
[debug] [2020-04-18T19:18:16.219Z] File C:\Applications\pencil-analytics\functions\lib\stripe\stripe\stripe.service.d.ts changed, reloading triggers
[debug] [2020-04-18T19:18:16.232Z] File C:\Applications\pencil-analytics\functions\lib\stripe\stripe\stripe.controller.js.map changed, reloading triggers
[debug] [2020-04-18T19:18:16.232Z] File C:\Applications\pencil-analytics\functions\lib\stripe\stripe\stripe.controller.js changed, reloading triggers
[debug] [2020-04-18T19:18:16.236Z] File C:\Applications\pencil-analytics\functions\lib\stripe\stripe\stripe.controller.d.ts changed, reloading triggers
[debug] [2020-04-18T19:18:16.274Z] File C:\Applications\pencil-analytics\functions\lib\tsconfig.tsbuildinfo changed, reloading triggers
[debug] [2020-04-18T19:18:17.274Z] [worker-pool] Shutting down IDLE worker (~diagnostic~)
[debug] [2020-04-18T19:18:17.274Z] [worker-~diagnostic~-67005eae-71dd-4d7a-ba6c-354168777ee2]: FINISHING
[debug] [2020-04-18T19:18:17.275Z] [worker-pool] Shutting down IDLE worker (api)
[debug] [2020-04-18T19:18:17.275Z] [worker-api-7623bdfa-fabb-4033-95d8-4ab1828d43ef]: FINISHING
[debug] [2020-04-18T19:18:17.275Z] [worker-pool] Shutting down IDLE worker (api)
[debug] [2020-04-18T19:18:17.275Z] [worker-api-70f3e074-ded7-4ae7-b36d-26db3950031a]: FINISHING
[debug] [2020-04-18T19:18:17.286Z] [worker-pool] addWorker(~diagnostic~)
[debug] [2020-04-18T19:18:17.286Z] [worker-pool] Adding worker with key ~diagnostic~, total=2
[debug] [2020-04-18T19:18:17.286Z] [worker-pool] submitWork(triggerId=)
[debug] [2020-04-18T19:18:17.286Z] [worker-~diagnostic~-aa547b3a-f118-4e68-be7d-9085702e737e]: Assigning socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\5712
[debug] [2020-04-18T19:18:17.286Z] [worker-~diagnostic~-aa547b3a-f118-4e68-be7d-9085702e737e]: BUSY
[debug] [2020-04-18T19:18:17.287Z] [worker-api-7623bdfa-fabb-4033-95d8-4ab1828d43ef]: exited
[debug] [2020-04-18T19:18:17.287Z] [worker-api-7623bdfa-fabb-4033-95d8-4ab1828d43ef]: FINISHED
[debug] [2020-04-18T19:18:17.287Z] [worker-api-70f3e074-ded7-4ae7-b36d-26db3950031a]: exited
[debug] [2020-04-18T19:18:17.287Z] [worker-api-70f3e074-ded7-4ae7-b36d-26db3950031a]: FINISHED
[debug] [2020-04-18T19:18:17.287Z] [worker-~diagnostic~-67005eae-71dd-4d7a-ba6c-354168777ee2]: exited
[debug] [2020-04-18T19:18:17.287Z] [worker-~diagnostic~-67005eae-71dd-4d7a-ba6c-354168777ee2]: FINISHED
[debug] [2020-04-18T19:18:18.256Z] [runtime-status] [5712] Functions runtime initialized. {"cwd":"C:\\Applications\\pencil-analytics\\functions","node_version":"10.15.0"}
[debug] [2020-04-18T19:18:18.258Z] [runtime-status] [5712] Disabled runtime features: {"functions_config_helper":true,"network_filtering":true,"timeout":true,"memory_limiting":true,"admin_stubs":true,"pubsub_emulator":true}
[debug] [2020-04-18T19:18:18.262Z] [runtime-status] [5712] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-admin\\lib\\index.js"}
[debug] [2020-04-18T19:18:18.264Z] [runtime-status] [5712] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[debug] [2020-04-18T19:18:18.265Z] [runtime-status] [5712] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[info] >  [Nest] 5712   - 2020-04-18 21:18:19   [NestFactory] Starting Nest application...
[debug] [2020-04-18T19:18:19.232Z] [worker-~diagnostic~-aa547b3a-f118-4e68-be7d-9085702e737e]: IDLE
[info] >  [Nest] 5712   - 2020-04-18 21:18:19   [InstanceLoader] AppModule dependencies initialized +20ms
[info] >  [Nest] 5712   - 2020-04-18 21:18:19   [InstanceLoader] HttpModule dependencies initialized +1ms
[info] >  [Nest] 5712   - 2020-04-18 21:18:19   [InstanceLoader] ConfigHostModule dependencies initialized +1ms
[info] >  [Nest] 5712   - 2020-04-18 21:18:19   [InstanceLoader] ConfigModule dependencies initialized +408ms
[info] >  [Nest] 5712   - 2020-04-18 21:18:19   [InstanceLoader] StripeModule dependencies initialized +1ms
[info] >  [Nest] 5712   - 2020-04-18 21:18:19   [RoutesResolver] StripeController {/stripe}: +5ms
[info] >  [Nest] 5712   - 2020-04-18 21:18:19   [RouterExplorer] Mapped {/test, GET} route +5ms
[info] >  [Nest] 5712   - 2020-04-18 21:18:19   [RouterExplorer] Mapped {/checkout, POST} route +1ms
[info] >  [Nest] 5712   - 2020-04-18 21:18:19   [RouterExplorer] Mapped {/webhooks, POST} route +1ms
[info] >  [Nest] 5712   - 2020-04-18 21:18:19   [NestApplication] Nest application successfully started +4ms
[info] >  Nest Ready
[debug] [2020-04-18T19:19:45.593Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2020-04-18T19:19:45.593Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-18T19:19:45.593Z] Accepted request OPTIONS /pencil-test-98d8d/us-central1/api/stripe/checkout --> api
[debug] [2020-04-18T19:19:45.594Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1
[debug] [2020-04-18T19:19:45.594Z] [worker-pool] Cleaned up workers for api: 2 --> 0
[debug] [2020-04-18T19:19:45.618Z] [worker-pool] addWorker(api)
[debug] [2020-04-18T19:19:45.618Z] [worker-pool] Adding worker with key api, total=1
[debug] [2020-04-18T19:19:45.619Z] [worker-pool] submitWork(triggerId=api)
[debug] [2020-04-18T19:19:45.619Z] [worker-api-56c4083f-9050-4d4e-a910-7feb824cf5c8]: Assigning socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\21464
[debug] [2020-04-18T19:19:45.619Z] [worker-api-56c4083f-9050-4d4e-a910-7feb824cf5c8]: BUSY
[debug] [2020-04-18T19:19:46.273Z] [runtime-status] [21464] Functions runtime initialized. {"cwd":"C:\\Applications\\pencil-analytics\\functions","node_version":"10.15.0"}
[debug] [2020-04-18T19:19:46.275Z] [runtime-status] [21464] Disabled runtime features: {"functions_config_helper":true,"network_filtering":true,"timeout":true,"memory_limiting":true,"admin_stubs":true,"pubsub_emulator":true}
[debug] [2020-04-18T19:19:46.279Z] [runtime-status] [21464] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-admin\\lib\\index.js"}
[debug] [2020-04-18T19:19:46.281Z] [runtime-status] [21464] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[debug] [2020-04-18T19:19:46.283Z] [runtime-status] [21464] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[info] >  [Nest] 21464   - 2020-04-18 21:19:47   [NestFactory] Starting Nest application...
[debug] [2020-04-18T19:19:47.261Z] [runtime-status] [21464] Trigger "api" has been found, beginning invocation!
[info] i  functions: Beginning execution of "api"
[debug] [2020-04-18T19:19:47.263Z] [runtime-status] [21464] triggerDefinition {"httpsTrigger":{},"name":"api","entryPoint":"api"}
[debug] [2020-04-18T19:19:47.263Z] [runtime-status] [21464] Running api in mode HTTPS
[debug] [2020-04-18T19:19:47.264Z] [runtime-status] [21464] Attempting to listen to socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\21464
[info] >  [Nest] 21464   - 2020-04-18 21:19:47   [InstanceLoader] AppModule dependencies initialized +35ms
[info] >  [Nest] 21464   - 2020-04-18 21:19:47   [InstanceLoader] HttpModule dependencies initialized +1ms
[info] >  [Nest] 21464   - 2020-04-18 21:19:47   [InstanceLoader] ConfigHostModule dependencies initialized +1ms
[info] >  [Nest] 21464   - 2020-04-18 21:19:47   [InstanceLoader] ConfigModule dependencies initialized +438ms
[info] >  [Nest] 21464   - 2020-04-18 21:19:47   [InstanceLoader] StripeModule dependencies initialized +1ms
[info] >  [Nest] 21464   - 2020-04-18 21:19:47   [RoutesResolver] StripeController {/stripe}: +6ms
[info] >  [Nest] 21464   - 2020-04-18 21:19:47   [RouterExplorer] Mapped {/test, GET} route +4ms
[info] >  [Nest] 21464   - 2020-04-18 21:19:47   [RouterExplorer] Mapped {/checkout, POST} route +1ms
[info] >  [Nest] 21464   - 2020-04-18 21:19:47   [RouterExplorer] Mapped {/webhooks, POST} route +3ms
[info] >  [Nest] 21464   - 2020-04-18 21:19:47   [NestApplication] Nest application successfully started +7ms
[debug] [2020-04-18T19:19:47.749Z] [functions] Runtime ready! Sending request!
[info] >  Nest Ready
[debug] [2020-04-18T19:19:47.768Z] [runtime-status] [21464] Ephemeral server handling OPTIONS request
[debug] [2020-04-18T19:19:47.778Z] [runtime-status] [21464] Ephemeral server survived.
[debug] [2020-04-18T19:19:47.779Z] [work-queue] {"queueLength":1,"workRunningCount":1}
[debug] [2020-04-18T19:19:47.781Z] [work-queue] {"queueLength":0,"workRunningCount":2}
[debug] [2020-04-18T19:19:47.781Z] Accepted request POST /pencil-test-98d8d/us-central1/api/stripe/checkout --> api
[debug] [2020-04-18T19:19:47.788Z] [worker-pool] addWorker(api)
[debug] [2020-04-18T19:19:47.788Z] [worker-pool] Adding worker with key api, total=2
[debug] [2020-04-18T19:19:47.788Z] [worker-pool] submitWork(triggerId=api)
[debug] [2020-04-18T19:19:47.789Z] [worker-api-193c48ed-477a-4052-a1b3-bd1f5be41082]: Assigning socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\6608
[debug] [2020-04-18T19:19:47.789Z] [worker-api-193c48ed-477a-4052-a1b3-bd1f5be41082]: BUSY
[info] i  functions: Finished "api" in ~1s
[debug] [2020-04-18T19:19:47.804Z] [worker-api-56c4083f-9050-4d4e-a910-7feb824cf5c8]: IDLE
[debug] [2020-04-18T19:19:47.804Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-18T19:19:48.293Z] [runtime-status] [6608] Functions runtime initialized. {"cwd":"C:\\Applications\\pencil-analytics\\functions","node_version":"10.15.0"}
[debug] [2020-04-18T19:19:48.295Z] [runtime-status] [6608] Disabled runtime features: {"functions_config_helper":true,"network_filtering":true,"timeout":true,"memory_limiting":true,"admin_stubs":true,"pubsub_emulator":true}
[debug] [2020-04-18T19:19:48.299Z] [runtime-status] [6608] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-admin\\lib\\index.js"}
[debug] [2020-04-18T19:19:48.301Z] [runtime-status] [6608] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[debug] [2020-04-18T19:19:48.303Z] [runtime-status] [6608] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[info] >  [Nest] 6608   - 2020-04-18 21:19:49   [NestFactory] Starting Nest application...
[debug] [2020-04-18T19:19:49.225Z] [runtime-status] [6608] Trigger "api" has been found, beginning invocation!
[info] i  functions: Beginning execution of "api"
[debug] [2020-04-18T19:19:49.226Z] [runtime-status] [6608] triggerDefinition {"httpsTrigger":{},"name":"api","entryPoint":"api"}
[debug] [2020-04-18T19:19:49.226Z] [runtime-status] [6608] Running api in mode HTTPS
[debug] [2020-04-18T19:19:49.230Z] [runtime-status] [6608] Attempting to listen to socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\6608
[info] >  [Nest] 6608   - 2020-04-18 21:19:49   [InstanceLoader] AppModule dependencies initialized +29ms
[info] >  [Nest] 6608   - 2020-04-18 21:19:49   [InstanceLoader] HttpModule dependencies initialized +1ms
[info] >  [Nest] 6608   - 2020-04-18 21:19:49   [InstanceLoader] ConfigHostModule dependencies initialized +1ms
[info] >  [Nest] 6608   - 2020-04-18 21:19:49   [InstanceLoader] ConfigModule dependencies initialized +375ms
[info] >  [Nest] 6608   - 2020-04-18 21:19:49   [InstanceLoader] StripeModule dependencies initialized +2ms
[info] >  [Nest] 6608   - 2020-04-18 21:19:49   [RoutesResolver] StripeController {/stripe}: +7ms
[info] >  [Nest] 6608   - 2020-04-18 21:19:49   [RouterExplorer] Mapped {/test, GET} route +4ms
[info] >  [Nest] 6608   - 2020-04-18 21:19:49   [RouterExplorer] Mapped {/checkout, POST} route +2ms
[info] >  [Nest] 6608   - 2020-04-18 21:19:49   [RouterExplorer] Mapped {/webhooks, POST} route +1ms
[info] >  [Nest] 6608   - 2020-04-18 21:19:49   [NestApplication] Nest application successfully started +4ms
[debug] [2020-04-18T19:19:49.646Z] [functions] Runtime ready! Sending request!
[info] >  Nest Ready
[debug] [2020-04-18T19:19:49.689Z] [runtime-status] [6608] Ephemeral server handling POST request
[debug] [2020-04-18T19:19:49.693Z] [runtime-status] [6608] Ephemeral server survived.
[info] >  New Session Config: {"payment_method_types":["card"],"success_url":"bUhZdJYzwDuZqtdoRG9X/?purchaseResult=success&ongoingPurchaseSessionId=http://localhost:4200/subscription/stripe-checkout","cancel_url":"bUhZdJYzwDuZqtdoRG9X/?purchaseResult=failed","client_reference_id":"http://localhost:4200/subscription/stripe-checkout","subscription_data":{"items":[{"plan":"plan_H7Td6f8hOE5R9F"}]}}
[info] i  functions: Finished "api" in ~1s
[debug] [2020-04-18T19:19:51.055Z] [worker-api-193c48ed-477a-4052-a1b3-bd1f5be41082]: IDLE
[debug] [2020-04-18T19:19:51.055Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2020-04-18T19:31:49.040Z] File C:\Applications\pencil-analytics\functions\src\stripe\stripe\stripe.service.ts changed, reloading triggers
[debug] [2020-04-18T19:31:49.474Z] File C:\Applications\pencil-analytics\functions\lib\stripe\stripe\stripe.service.js.map changed, reloading triggers
[debug] [2020-04-18T19:31:49.480Z] File C:\Applications\pencil-analytics\functions\lib\stripe\stripe\stripe.service.js changed, reloading triggers
[debug] [2020-04-18T19:31:49.486Z] File C:\Applications\pencil-analytics\functions\lib\stripe\stripe\stripe.service.d.ts changed, reloading triggers
[debug] [2020-04-18T19:31:49.519Z] File C:\Applications\pencil-analytics\functions\lib\tsconfig.tsbuildinfo changed, reloading triggers
[debug] [2020-04-18T19:31:50.521Z] [worker-pool] Shutting down IDLE worker (~diagnostic~)
[debug] [2020-04-18T19:31:50.523Z] [worker-~diagnostic~-aa547b3a-f118-4e68-be7d-9085702e737e]: FINISHING
[debug] [2020-04-18T19:31:50.524Z] [worker-pool] Shutting down IDLE worker (api)
[debug] [2020-04-18T19:31:50.524Z] [worker-api-56c4083f-9050-4d4e-a910-7feb824cf5c8]: FINISHING
[debug] [2020-04-18T19:31:50.525Z] [worker-pool] Shutting down IDLE worker (api)
[debug] [2020-04-18T19:31:50.525Z] [worker-api-193c48ed-477a-4052-a1b3-bd1f5be41082]: FINISHING
[debug] [2020-04-18T19:31:50.558Z] [worker-pool] addWorker(~diagnostic~)
[debug] [2020-04-18T19:31:50.558Z] [worker-pool] Adding worker with key ~diagnostic~, total=2
[debug] [2020-04-18T19:31:50.558Z] [worker-pool] submitWork(triggerId=)
[debug] [2020-04-18T19:31:50.558Z] [worker-~diagnostic~-9cef7764-f0ea-4619-823e-3b685339fed6]: Assigning socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\10724
[debug] [2020-04-18T19:31:50.558Z] [worker-~diagnostic~-9cef7764-f0ea-4619-823e-3b685339fed6]: BUSY
[debug] [2020-04-18T19:31:50.559Z] [worker-~diagnostic~-aa547b3a-f118-4e68-be7d-9085702e737e]: exited
[debug] [2020-04-18T19:31:50.559Z] [worker-~diagnostic~-aa547b3a-f118-4e68-be7d-9085702e737e]: FINISHED
[debug] [2020-04-18T19:31:50.559Z] [worker-api-56c4083f-9050-4d4e-a910-7feb824cf5c8]: exited
[debug] [2020-04-18T19:31:50.559Z] [worker-api-56c4083f-9050-4d4e-a910-7feb824cf5c8]: FINISHED
[debug] [2020-04-18T19:31:50.560Z] [worker-api-193c48ed-477a-4052-a1b3-bd1f5be41082]: exited
[debug] [2020-04-18T19:31:50.561Z] [worker-api-193c48ed-477a-4052-a1b3-bd1f5be41082]: FINISHED
[debug] [2020-04-18T19:31:51.278Z] [runtime-status] [10724] Functions runtime initialized. {"cwd":"C:\\Applications\\pencil-analytics\\functions","node_version":"10.15.0"}
[debug] [2020-04-18T19:31:51.280Z] [runtime-status] [10724] Disabled runtime features: {"functions_config_helper":true,"network_filtering":true,"timeout":true,"memory_limiting":true,"admin_stubs":true,"pubsub_emulator":true}
[debug] [2020-04-18T19:31:51.284Z] [runtime-status] [10724] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-admin\\lib\\index.js"}
[debug] [2020-04-18T19:31:51.287Z] [runtime-status] [10724] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[debug] [2020-04-18T19:31:51.288Z] [runtime-status] [10724] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[info] >  [Nest] 10724   - 2020-04-18 21:31:52   [NestFactory] Starting Nest application...
[debug] [2020-04-18T19:31:52.373Z] [worker-~diagnostic~-9cef7764-f0ea-4619-823e-3b685339fed6]: IDLE
[info] >  [Nest] 10724   - 2020-04-18 21:31:52   [InstanceLoader] AppModule dependencies initialized +23ms
[info] >  [Nest] 10724   - 2020-04-18 21:31:52   [InstanceLoader] HttpModule dependencies initialized +1ms
[info] >  [Nest] 10724   - 2020-04-18 21:31:52   [InstanceLoader] ConfigHostModule dependencies initialized +1ms
[info] >  [Nest] 10724   - 2020-04-18 21:31:52   [InstanceLoader] ConfigModule dependencies initialized +472ms
[info] >  [Nest] 10724   - 2020-04-18 21:31:52   [InstanceLoader] StripeModule dependencies initialized +1ms
[info] >  [Nest] 10724   - 2020-04-18 21:31:52   [RoutesResolver] StripeController {/stripe}: +6ms
[info] >  [Nest] 10724   - 2020-04-18 21:31:52   [RouterExplorer] Mapped {/test, GET} route +5ms
[info] >  [Nest] 10724   - 2020-04-18 21:31:52   [RouterExplorer] Mapped {/checkout, POST} route +1ms
[info] >  [Nest] 10724   - 2020-04-18 21:31:52   [RouterExplorer] Mapped {/webhooks, POST} route +1ms
[info] >  [Nest] 10724   - 2020-04-18 21:31:52   [NestApplication] Nest application successfully started +6ms
[info] >  Nest Ready
[debug] [2020-04-18T19:32:14.012Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2020-04-18T19:32:14.012Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-18T19:32:14.012Z] Accepted request OPTIONS /pencil-test-98d8d/us-central1/api/stripe/checkout --> api
[debug] [2020-04-18T19:32:14.012Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1
[debug] [2020-04-18T19:32:14.012Z] [worker-pool] Cleaned up workers for api: 2 --> 0
[debug] [2020-04-18T19:32:14.029Z] [worker-pool] addWorker(api)
[debug] [2020-04-18T19:32:14.029Z] [worker-pool] Adding worker with key api, total=1
[debug] [2020-04-18T19:32:14.029Z] [worker-pool] submitWork(triggerId=api)
[debug] [2020-04-18T19:32:14.029Z] [worker-api-bc2df0c3-b177-4a9b-8eb1-04be34d751ee]: Assigning socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\18504
[debug] [2020-04-18T19:32:14.029Z] [worker-api-bc2df0c3-b177-4a9b-8eb1-04be34d751ee]: BUSY
[debug] [2020-04-18T19:32:14.520Z] [runtime-status] [18504] Functions runtime initialized. {"cwd":"C:\\Applications\\pencil-analytics\\functions","node_version":"10.15.0"}
[debug] [2020-04-18T19:32:14.522Z] [runtime-status] [18504] Disabled runtime features: {"functions_config_helper":true,"network_filtering":true,"timeout":true,"memory_limiting":true,"admin_stubs":true,"pubsub_emulator":true}
[debug] [2020-04-18T19:32:14.525Z] [runtime-status] [18504] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-admin\\lib\\index.js"}
[debug] [2020-04-18T19:32:14.527Z] [runtime-status] [18504] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[debug] [2020-04-18T19:32:14.528Z] [runtime-status] [18504] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[info] >  [Nest] 18504   - 2020-04-18 21:32:15   [NestFactory] Starting Nest application...
[debug] [2020-04-18T19:32:15.468Z] [runtime-status] [18504] Trigger "api" has been found, beginning invocation!
[info] i  functions: Beginning execution of "api"
[debug] [2020-04-18T19:32:15.469Z] [runtime-status] [18504] triggerDefinition {"httpsTrigger":{},"name":"api","entryPoint":"api"}
[debug] [2020-04-18T19:32:15.469Z] [runtime-status] [18504] Running api in mode HTTPS
[debug] [2020-04-18T19:32:15.473Z] [runtime-status] [18504] Attempting to listen to socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\18504
[info] >  [Nest] 18504   - 2020-04-18 21:32:15   [InstanceLoader] AppModule dependencies initialized +29ms
[info] >  [Nest] 18504   - 2020-04-18 21:32:15   [InstanceLoader] HttpModule dependencies initialized +0ms
[info] >  [Nest] 18504   - 2020-04-18 21:32:15   [InstanceLoader] ConfigHostModule dependencies initialized +1ms
[info] >  [Nest] 18504   - 2020-04-18 21:32:15   [InstanceLoader] ConfigModule dependencies initialized +441ms
[info] >  [Nest] 18504   - 2020-04-18 21:32:15   [InstanceLoader] StripeModule dependencies initialized +1ms
[info] >  [Nest] 18504   - 2020-04-18 21:32:15   [RoutesResolver] StripeController {/stripe}: +7ms
[info] >  [Nest] 18504   - 2020-04-18 21:32:15   [RouterExplorer] Mapped {/test, GET} route +4ms
[info] >  [Nest] 18504   - 2020-04-18 21:32:15   [RouterExplorer] Mapped {/checkout, POST} route +1ms
[info] >  [Nest] 18504   - 2020-04-18 21:32:15   [RouterExplorer] Mapped {/webhooks, POST} route +1ms
[info] >  [Nest] 18504   - 2020-04-18 21:32:15   [NestApplication] Nest application successfully started +3ms
[info] >  Nest Ready
[debug] [2020-04-18T19:32:15.952Z] [functions] Runtime ready! Sending request!
[debug] [2020-04-18T19:32:15.966Z] [runtime-status] [18504] Ephemeral server handling OPTIONS request
[debug] [2020-04-18T19:32:15.973Z] [runtime-status] [18504] Ephemeral server survived.
[debug] [2020-04-18T19:32:15.974Z] [work-queue] {"queueLength":1,"workRunningCount":1}
[debug] [2020-04-18T19:32:15.974Z] [work-queue] {"queueLength":0,"workRunningCount":2}
[debug] [2020-04-18T19:32:15.974Z] Accepted request POST /pencil-test-98d8d/us-central1/api/stripe/checkout --> api
[debug] [2020-04-18T19:32:15.981Z] [worker-pool] addWorker(api)
[debug] [2020-04-18T19:32:15.981Z] [worker-pool] Adding worker with key api, total=2
[debug] [2020-04-18T19:32:15.981Z] [worker-pool] submitWork(triggerId=api)
[debug] [2020-04-18T19:32:15.981Z] [worker-api-cc4f9821-9889-4a85-a66f-948ad970a7c4]: Assigning socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\14520
[debug] [2020-04-18T19:32:15.981Z] [worker-api-cc4f9821-9889-4a85-a66f-948ad970a7c4]: BUSY
[info] i  functions: Finished "api" in ~1s
[debug] [2020-04-18T19:32:15.982Z] [worker-api-bc2df0c3-b177-4a9b-8eb1-04be34d751ee]: IDLE
[debug] [2020-04-18T19:32:15.983Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-18T19:32:16.463Z] [runtime-status] [14520] Functions runtime initialized. {"cwd":"C:\\Applications\\pencil-analytics\\functions","node_version":"10.15.0"}
[debug] [2020-04-18T19:32:16.465Z] [runtime-status] [14520] Disabled runtime features: {"functions_config_helper":true,"network_filtering":true,"timeout":true,"memory_limiting":true,"admin_stubs":true,"pubsub_emulator":true}
[debug] [2020-04-18T19:32:16.469Z] [runtime-status] [14520] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-admin\\lib\\index.js"}
[debug] [2020-04-18T19:32:16.473Z] [runtime-status] [14520] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[debug] [2020-04-18T19:32:16.474Z] [runtime-status] [14520] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[info] >  [Nest] 14520   - 2020-04-18 21:32:17   [NestFactory] Starting Nest application...
[debug] [2020-04-18T19:32:17.449Z] [runtime-status] [14520] Trigger "api" has been found, beginning invocation!
[info] i  functions: Beginning execution of "api"
[debug] [2020-04-18T19:32:17.451Z] [runtime-status] [14520] triggerDefinition {"httpsTrigger":{},"name":"api","entryPoint":"api"}
[debug] [2020-04-18T19:32:17.451Z] [runtime-status] [14520] Running api in mode HTTPS
[debug] [2020-04-18T19:32:17.454Z] [runtime-status] [14520] Attempting to listen to socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\14520
[info] >  [Nest] 14520   - 2020-04-18 21:32:17   [InstanceLoader] AppModule dependencies initialized +28ms
[info] >  [Nest] 14520   - 2020-04-18 21:32:17   [InstanceLoader] HttpModule dependencies initialized +1ms
[info] >  [Nest] 14520   - 2020-04-18 21:32:17   [InstanceLoader] ConfigHostModule dependencies initialized +1ms
[info] >  [Nest] 14520   - 2020-04-18 21:32:17   [InstanceLoader] ConfigModule dependencies initialized +363ms
[info] >  [Nest] 14520   - 2020-04-18 21:32:17   [InstanceLoader] StripeModule dependencies initialized +1ms
[info] >  [Nest] 14520   - 2020-04-18 21:32:17   [RoutesResolver] StripeController {/stripe}: +6ms
[info] >  [Nest] 14520   - 2020-04-18 21:32:17   [RouterExplorer] Mapped {/test, GET} route +5ms
[info] >  [Nest] 14520   - 2020-04-18 21:32:17   [RouterExplorer] Mapped {/checkout, POST} route +1ms
[info] >  [Nest] 14520   - 2020-04-18 21:32:17   [RouterExplorer] Mapped {/webhooks, POST} route +1ms
[info] >  [Nest] 14520   - 2020-04-18 21:32:17   [NestApplication] Nest application successfully started +8ms
[debug] [2020-04-18T19:32:17.861Z] [functions] Runtime ready! Sending request!
[info] >  Nest Ready
[debug] [2020-04-18T19:32:17.895Z] [runtime-status] [14520] Ephemeral server handling POST request
[debug] [2020-04-18T19:32:17.898Z] [runtime-status] [14520] Ephemeral server survived.
[info] >  New Session Config: {"payment_method_types":["card"],"success_url":"0BWf2xqIzEXFamqMLcBJ/?purchaseResult=success&ongoingPurchaseSessionId=http://localhost:4200/subscription/stripe-checkout","cancel_url":"0BWf2xqIzEXFamqMLcBJ/?purchaseResult=failed","client_reference_id":"http://localhost:4200/subscription/stripe-checkout","subscription_data":{"items":[{"plan":"plan_H7Td6f8hOE5R9F"}]}}
[info] i  functions: Finished "api" in ~1s
[debug] [2020-04-18T19:32:19.390Z] [worker-api-cc4f9821-9889-4a85-a66f-948ad970a7c4]: IDLE
[debug] [2020-04-18T19:32:19.390Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2020-04-18T22:03:45.300Z] File C:\Applications\pencil-analytics\functions\src\stripe\stripe\stripe.controller.ts changed, reloading triggers
[debug] [2020-04-18T22:03:45.695Z] File C:\Applications\pencil-analytics\functions\lib\stripe\stripe\stripe.controller.js.map changed, reloading triggers
[debug] [2020-04-18T22:03:45.699Z] File C:\Applications\pencil-analytics\functions\lib\stripe\stripe\stripe.controller.js changed, reloading triggers
[debug] [2020-04-18T22:03:45.704Z] File C:\Applications\pencil-analytics\functions\lib\stripe\stripe\stripe.controller.d.ts changed, reloading triggers
[debug] [2020-04-18T22:03:45.746Z] File C:\Applications\pencil-analytics\functions\lib\tsconfig.tsbuildinfo changed, reloading triggers
[debug] [2020-04-18T22:03:46.747Z] [worker-pool] Shutting down IDLE worker (~diagnostic~)
[debug] [2020-04-18T22:03:46.747Z] [worker-~diagnostic~-9cef7764-f0ea-4619-823e-3b685339fed6]: FINISHING
[debug] [2020-04-18T22:03:46.747Z] [worker-pool] Shutting down IDLE worker (api)
[debug] [2020-04-18T22:03:46.747Z] [worker-api-bc2df0c3-b177-4a9b-8eb1-04be34d751ee]: FINISHING
[debug] [2020-04-18T22:03:46.747Z] [worker-pool] Shutting down IDLE worker (api)
[debug] [2020-04-18T22:03:46.748Z] [worker-api-cc4f9821-9889-4a85-a66f-948ad970a7c4]: FINISHING
[debug] [2020-04-18T22:03:46.763Z] [worker-pool] addWorker(~diagnostic~)
[debug] [2020-04-18T22:03:46.763Z] [worker-pool] Adding worker with key ~diagnostic~, total=2
[debug] [2020-04-18T22:03:46.764Z] [worker-pool] submitWork(triggerId=)
[debug] [2020-04-18T22:03:46.764Z] [worker-~diagnostic~-225e4ef2-878b-425d-bb23-cf05ac893d55]: Assigning socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\21508
[debug] [2020-04-18T22:03:46.764Z] [worker-~diagnostic~-225e4ef2-878b-425d-bb23-cf05ac893d55]: BUSY
[debug] [2020-04-18T22:03:46.764Z] [worker-api-bc2df0c3-b177-4a9b-8eb1-04be34d751ee]: exited
[debug] [2020-04-18T22:03:46.764Z] [worker-api-bc2df0c3-b177-4a9b-8eb1-04be34d751ee]: FINISHED
[debug] [2020-04-18T22:03:46.765Z] [worker-~diagnostic~-9cef7764-f0ea-4619-823e-3b685339fed6]: exited
[debug] [2020-04-18T22:03:46.765Z] [worker-~diagnostic~-9cef7764-f0ea-4619-823e-3b685339fed6]: FINISHED
[debug] [2020-04-18T22:03:46.774Z] [worker-api-cc4f9821-9889-4a85-a66f-948ad970a7c4]: exited
[debug] [2020-04-18T22:03:46.774Z] [worker-api-cc4f9821-9889-4a85-a66f-948ad970a7c4]: FINISHED
[debug] [2020-04-18T22:03:47.568Z] [runtime-status] [21508] Functions runtime initialized. {"cwd":"C:\\Applications\\pencil-analytics\\functions","node_version":"10.15.0"}
[debug] [2020-04-18T22:03:47.570Z] [runtime-status] [21508] Disabled runtime features: {"functions_config_helper":true,"network_filtering":true,"timeout":true,"memory_limiting":true,"admin_stubs":true,"pubsub_emulator":true}
[debug] [2020-04-18T22:03:47.575Z] [runtime-status] [21508] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-admin\\lib\\index.js"}
[debug] [2020-04-18T22:03:47.577Z] [runtime-status] [21508] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[debug] [2020-04-18T22:03:47.578Z] [runtime-status] [21508] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[info] >  [Nest] 21508   - 2020-04-19 00:03:48   [NestFactory] Starting Nest application...
[debug] [2020-04-18T22:03:48.635Z] [worker-~diagnostic~-225e4ef2-878b-425d-bb23-cf05ac893d55]: IDLE
[info] >  [Nest] 21508   - 2020-04-19 00:03:48   [InstanceLoader] AppModule dependencies initialized +21ms
[info] >  [Nest] 21508   - 2020-04-19 00:03:48   [InstanceLoader] HttpModule dependencies initialized +1ms
[info] >  [Nest] 21508   - 2020-04-19 00:03:48   [InstanceLoader] ConfigHostModule dependencies initialized +0ms
[info] >  [Nest] 21508   - 2020-04-19 00:03:49   [InstanceLoader] ConfigModule dependencies initialized +458ms
[info] >  [Nest] 21508   - 2020-04-19 00:03:49   [InstanceLoader] StripeModule dependencies initialized +1ms
[info] >  [Nest] 21508   - 2020-04-19 00:03:49   [RoutesResolver] StripeController {/stripe}: +6ms
[info] >  [Nest] 21508   - 2020-04-19 00:03:49   [RouterExplorer] Mapped {/test, GET} route +4ms
[info] >  [Nest] 21508   - 2020-04-19 00:03:49   [RouterExplorer] Mapped {/checkout, POST} route +3ms
[info] >  [Nest] 21508   - 2020-04-19 00:03:49   [RouterExplorer] Mapped {/webhooks, POST} route +1ms
[info] >  [Nest] 21508   - 2020-04-19 00:03:49   [NestApplication] Nest application successfully started +3ms
[info] >  Nest Ready
[debug] [2020-04-18T22:04:07.089Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2020-04-18T22:04:07.089Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-18T22:04:07.089Z] Accepted request OPTIONS /pencil-test-98d8d/us-central1/api/stripe/checkout --> api
[debug] [2020-04-18T22:04:07.089Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1
[debug] [2020-04-18T22:04:07.089Z] [worker-pool] Cleaned up workers for api: 2 --> 0
[debug] [2020-04-18T22:04:07.096Z] [worker-pool] addWorker(api)
[debug] [2020-04-18T22:04:07.096Z] [worker-pool] Adding worker with key api, total=1
[debug] [2020-04-18T22:04:07.096Z] [worker-pool] submitWork(triggerId=api)
[debug] [2020-04-18T22:04:07.096Z] [worker-api-a9b56852-4214-47ac-8a14-9c0223ce2b8f]: Assigning socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\23472
[debug] [2020-04-18T22:04:07.096Z] [worker-api-a9b56852-4214-47ac-8a14-9c0223ce2b8f]: BUSY
[debug] [2020-04-18T22:04:07.556Z] [runtime-status] [23472] Functions runtime initialized. {"cwd":"C:\\Applications\\pencil-analytics\\functions","node_version":"10.15.0"}
[debug] [2020-04-18T22:04:07.558Z] [runtime-status] [23472] Disabled runtime features: {"functions_config_helper":true,"network_filtering":true,"timeout":true,"memory_limiting":true,"admin_stubs":true,"pubsub_emulator":true}
[debug] [2020-04-18T22:04:07.561Z] [runtime-status] [23472] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-admin\\lib\\index.js"}
[debug] [2020-04-18T22:04:07.564Z] [runtime-status] [23472] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[debug] [2020-04-18T22:04:07.565Z] [runtime-status] [23472] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[info] >  [Nest] 23472   - 2020-04-19 00:04:08   [NestFactory] Starting Nest application...
[debug] [2020-04-18T22:04:08.534Z] [runtime-status] [23472] Trigger "api" has been found, beginning invocation!
[info] i  functions: Beginning execution of "api"
[debug] [2020-04-18T22:04:08.535Z] [runtime-status] [23472] triggerDefinition {"httpsTrigger":{},"name":"api","entryPoint":"api"}
[debug] [2020-04-18T22:04:08.535Z] [runtime-status] [23472] Running api in mode HTTPS
[debug] [2020-04-18T22:04:08.540Z] [runtime-status] [23472] Attempting to listen to socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\23472
[info] >  [Nest] 23472   - 2020-04-19 00:04:08   [InstanceLoader] AppModule dependencies initialized +27ms
[info] >  [Nest] 23472   - 2020-04-19 00:04:08   [InstanceLoader] HttpModule dependencies initialized +1ms
[info] >  [Nest] 23472   - 2020-04-19 00:04:08   [InstanceLoader] ConfigHostModule dependencies initialized +1ms
[info] >  [Nest] 23472   - 2020-04-19 00:04:08   [InstanceLoader] ConfigModule dependencies initialized +405ms
[info] >  [Nest] 23472   - 2020-04-19 00:04:08   [InstanceLoader] StripeModule dependencies initialized +1ms
[info] >  [Nest] 23472   - 2020-04-19 00:04:08   [RoutesResolver] StripeController {/stripe}: +5ms
[info] >  [Nest] 23472   - 2020-04-19 00:04:08   [RouterExplorer] Mapped {/test, GET} route +5ms
[info] >  [Nest] 23472   - 2020-04-19 00:04:08   [RouterExplorer] Mapped {/checkout, POST} route +2ms
[info] >  [Nest] 23472   - 2020-04-19 00:04:08   [RouterExplorer] Mapped {/webhooks, POST} route +1ms
[info] >  [Nest] 23472   - 2020-04-19 00:04:08   [NestApplication] Nest application successfully started +4ms
[debug] [2020-04-18T22:04:08.983Z] [functions] Runtime ready! Sending request!
[info] >  Nest Ready
[debug] [2020-04-18T22:04:09.004Z] [runtime-status] [23472] Ephemeral server handling OPTIONS request
[debug] [2020-04-18T22:04:09.014Z] [runtime-status] [23472] Ephemeral server survived.
[debug] [2020-04-18T22:04:09.016Z] [work-queue] {"queueLength":1,"workRunningCount":1}
[debug] [2020-04-18T22:04:09.016Z] [work-queue] {"queueLength":0,"workRunningCount":2}
[debug] [2020-04-18T22:04:09.016Z] Accepted request POST /pencil-test-98d8d/us-central1/api/stripe/checkout --> api
[debug] [2020-04-18T22:04:09.024Z] [worker-pool] addWorker(api)
[debug] [2020-04-18T22:04:09.025Z] [worker-pool] Adding worker with key api, total=2
[debug] [2020-04-18T22:04:09.025Z] [worker-pool] submitWork(triggerId=api)
[debug] [2020-04-18T22:04:09.025Z] [worker-api-a4b5a267-9aeb-4136-8b1e-2e837e910c57]: Assigning socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\15872
[debug] [2020-04-18T22:04:09.025Z] [worker-api-a4b5a267-9aeb-4136-8b1e-2e837e910c57]: BUSY
[info] i  functions: Finished "api" in ~1s
[debug] [2020-04-18T22:04:09.026Z] [worker-api-a9b56852-4214-47ac-8a14-9c0223ce2b8f]: IDLE
[debug] [2020-04-18T22:04:09.027Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-18T22:04:09.638Z] [runtime-status] [15872] Functions runtime initialized. {"cwd":"C:\\Applications\\pencil-analytics\\functions","node_version":"10.15.0"}
[debug] [2020-04-18T22:04:09.641Z] [runtime-status] [15872] Disabled runtime features: {"functions_config_helper":true,"network_filtering":true,"timeout":true,"memory_limiting":true,"admin_stubs":true,"pubsub_emulator":true}
[debug] [2020-04-18T22:04:09.648Z] [runtime-status] [15872] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-admin\\lib\\index.js"}
[debug] [2020-04-18T22:04:09.653Z] [runtime-status] [15872] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[debug] [2020-04-18T22:04:09.654Z] [runtime-status] [15872] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[info] >  [Nest] 15872   - 2020-04-19 00:04:10   [NestFactory] Starting Nest application...
[debug] [2020-04-18T22:04:10.676Z] [runtime-status] [15872] Trigger "api" has been found, beginning invocation!
[info] i  functions: Beginning execution of "api"
[debug] [2020-04-18T22:04:10.676Z] [runtime-status] [15872] triggerDefinition {"httpsTrigger":{},"name":"api","entryPoint":"api"}
[debug] [2020-04-18T22:04:10.677Z] [runtime-status] [15872] Running api in mode HTTPS
[debug] [2020-04-18T22:04:10.677Z] [runtime-status] [15872] Attempting to listen to socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\15872
[info] >  [Nest] 15872   - 2020-04-19 00:04:10   [InstanceLoader] AppModule dependencies initialized +31ms
[info] >  [Nest] 15872   - 2020-04-19 00:04:10   [InstanceLoader] HttpModule dependencies initialized +1ms
[info] >  [Nest] 15872   - 2020-04-19 00:04:10   [InstanceLoader] ConfigHostModule dependencies initialized +2ms
[info] >  [Nest] 15872   - 2020-04-19 00:04:11   [InstanceLoader] ConfigModule dependencies initialized +441ms
[info] >  [Nest] 15872   - 2020-04-19 00:04:11   [InstanceLoader] StripeModule dependencies initialized +4ms
[info] >  [Nest] 15872   - 2020-04-19 00:04:11   [RoutesResolver] StripeController {/stripe}: +5ms
[info] >  [Nest] 15872   - 2020-04-19 00:04:11   [RouterExplorer] Mapped {/test, GET} route +3ms
[info] >  [Nest] 15872   - 2020-04-19 00:04:11   [RouterExplorer] Mapped {/checkout, POST} route +1ms
[info] >  [Nest] 15872   - 2020-04-19 00:04:11   [RouterExplorer] Mapped {/webhooks, POST} route +1ms
[info] >  [Nest] 15872   - 2020-04-19 00:04:11   [NestApplication] Nest application successfully started +4ms
[debug] [2020-04-18T22:04:11.163Z] [functions] Runtime ready! Sending request!
[info] >  Nest Ready
[debug] [2020-04-18T22:04:11.236Z] [runtime-status] [15872] Ephemeral server handling POST request
[debug] [2020-04-18T22:04:11.243Z] [runtime-status] [15872] Ephemeral server survived.
[info] >  New Session Config: {"payment_method_types":["card"],"success_url":"oI3EP1lAPWPGpvO2ef5L/?purchaseResult=success&ongoingPurchaseSessionId=http://localhost:4200/subscription/stripe-checkout","cancel_url":"oI3EP1lAPWPGpvO2ef5L/?purchaseResult=failed","client_reference_id":"http://localhost:4200/subscription/stripe-checkout","subscription_data":{"items":[{"plan":"plan_H7Td6f8hOE5R9F"}]}}
[info] i  functions: Finished "api" in ~2s
[debug] [2020-04-18T22:04:12.739Z] [worker-api-a4b5a267-9aeb-4136-8b1e-2e837e910c57]: IDLE
[debug] [2020-04-18T22:04:12.739Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2020-04-18T22:26:23.839Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2020-04-18T22:26:23.839Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-18T22:26:23.839Z] Accepted request OPTIONS /pencil-test-98d8d/us-central1/api/stripe/checkout --> api
[debug] [2020-04-18T22:26:23.840Z] [worker-pool] submitWork(triggerId=api)
[debug] [2020-04-18T22:26:23.840Z] [worker-api-a9b56852-4214-47ac-8a14-9c0223ce2b8f]: Assigning socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\23472
[debug] [2020-04-18T22:26:23.840Z] [worker-api-a9b56852-4214-47ac-8a14-9c0223ce2b8f]: BUSY
[debug] [2020-04-18T22:26:23.840Z] [runtime-status] [23472] Trigger "api" has been found, beginning invocation!
[info] i  functions: Beginning execution of "api"
[debug] [2020-04-18T22:26:23.842Z] [runtime-status] [23472] triggerDefinition {"httpsTrigger":{},"name":"api","entryPoint":"api"}
[debug] [2020-04-18T22:26:23.843Z] [runtime-status] [23472] Running api in mode HTTPS
[debug] [2020-04-18T22:26:23.843Z] [runtime-status] [23472] Attempting to listen to socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\23472
[debug] [2020-04-18T22:26:23.844Z] [functions] Runtime ready! Sending request!
[debug] [2020-04-18T22:26:23.846Z] [runtime-status] [23472] Ephemeral server handling OPTIONS request
[debug] [2020-04-18T22:26:23.847Z] [runtime-status] [23472] Ephemeral server survived.
[info] i  functions: Finished "api" in ~1s
[debug] [2020-04-18T22:26:23.855Z] [work-queue] {"queueLength":1,"workRunningCount":1}
[debug] [2020-04-18T22:26:23.855Z] [work-queue] {"queueLength":0,"workRunningCount":2}
[debug] [2020-04-18T22:26:23.855Z] Accepted request POST /pencil-test-98d8d/us-central1/api/stripe/checkout --> api
[debug] [2020-04-18T22:26:23.855Z] [worker-pool] submitWork(triggerId=api)
[debug] [2020-04-18T22:26:23.855Z] [worker-api-a4b5a267-9aeb-4136-8b1e-2e837e910c57]: Assigning socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\15872
[debug] [2020-04-18T22:26:23.855Z] [worker-api-a4b5a267-9aeb-4136-8b1e-2e837e910c57]: BUSY
[debug] [2020-04-18T22:26:23.855Z] [worker-api-a9b56852-4214-47ac-8a14-9c0223ce2b8f]: IDLE
[debug] [2020-04-18T22:26:23.856Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-18T22:26:23.856Z] [runtime-status] [15872] Trigger "api" has been found, beginning invocation!
[info] i  functions: Beginning execution of "api"
[debug] [2020-04-18T22:26:23.857Z] [runtime-status] [15872] triggerDefinition {"httpsTrigger":{},"name":"api","entryPoint":"api"}
[debug] [2020-04-18T22:26:23.857Z] [runtime-status] [15872] Running api in mode HTTPS
[debug] [2020-04-18T22:26:23.857Z] [runtime-status] [15872] Attempting to listen to socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\15872
[debug] [2020-04-18T22:26:23.859Z] [functions] Runtime ready! Sending request!
[debug] [2020-04-18T22:26:23.862Z] [runtime-status] [15872] Ephemeral server handling POST request
[debug] [2020-04-18T22:26:23.862Z] [runtime-status] [15872] Ephemeral server survived.
[info] >  New Session Config: {"payment_method_types":["card"],"success_url":"MQUbHddU5nEgXoV4BveW/?purchaseResult=success&ongoingPurchaseSessionId=http://localhost:4200/subscription/stripe-checkout","cancel_url":"MQUbHddU5nEgXoV4BveW/?purchaseResult=failed","client_reference_id":"http://localhost:4200/subscription/stripe-checkout","subscription_data":{"items":[{"plan":"plan_H7Td6f8hOE5R9F"}]}}
[info] i  functions: Finished "api" in ~1s
[debug] [2020-04-18T22:26:24.814Z] [worker-api-a4b5a267-9aeb-4136-8b1e-2e837e910c57]: IDLE
[debug] [2020-04-18T22:26:24.814Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2020-04-18T22:27:30.369Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2020-04-18T22:27:30.370Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-18T22:27:30.370Z] Accepted request OPTIONS /pencil-test-98d8d/us-central1/api/stripe/checkout --> api
[debug] [2020-04-18T22:27:30.370Z] [worker-pool] submitWork(triggerId=api)
[debug] [2020-04-18T22:27:30.370Z] [worker-api-a9b56852-4214-47ac-8a14-9c0223ce2b8f]: Assigning socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\23472
[debug] [2020-04-18T22:27:30.370Z] [worker-api-a9b56852-4214-47ac-8a14-9c0223ce2b8f]: BUSY
[debug] [2020-04-18T22:27:30.370Z] [runtime-status] [23472] Trigger "api" has been found, beginning invocation!
[info] i  functions: Beginning execution of "api"
[debug] [2020-04-18T22:27:30.371Z] [runtime-status] [23472] triggerDefinition {"httpsTrigger":{},"name":"api","entryPoint":"api"}
[debug] [2020-04-18T22:27:30.371Z] [runtime-status] [23472] Running api in mode HTTPS
[debug] [2020-04-18T22:27:30.371Z] [runtime-status] [23472] Attempting to listen to socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\23472
[debug] [2020-04-18T22:27:30.372Z] [functions] Runtime ready! Sending request!
[debug] [2020-04-18T22:27:30.374Z] [runtime-status] [23472] Ephemeral server handling OPTIONS request
[debug] [2020-04-18T22:27:30.375Z] [runtime-status] [23472] Ephemeral server survived.
[info] i  functions: Finished "api" in ~1s
[debug] [2020-04-18T22:27:30.376Z] [worker-api-a9b56852-4214-47ac-8a14-9c0223ce2b8f]: IDLE
[debug] [2020-04-18T22:27:30.376Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2020-04-18T22:27:30.379Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2020-04-18T22:27:30.379Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-18T22:27:30.379Z] Accepted request POST /pencil-test-98d8d/us-central1/api/stripe/checkout --> api
[debug] [2020-04-18T22:27:30.379Z] [worker-pool] submitWork(triggerId=api)
[debug] [2020-04-18T22:27:30.379Z] [worker-api-a9b56852-4214-47ac-8a14-9c0223ce2b8f]: Assigning socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\23472
[debug] [2020-04-18T22:27:30.379Z] [worker-api-a9b56852-4214-47ac-8a14-9c0223ce2b8f]: BUSY
[debug] [2020-04-18T22:27:30.387Z] [runtime-status] [23472] Trigger "api" has been found, beginning invocation!
[info] i  functions: Beginning execution of "api"
[debug] [2020-04-18T22:27:30.388Z] [runtime-status] [23472] triggerDefinition {"httpsTrigger":{},"name":"api","entryPoint":"api"}
[debug] [2020-04-18T22:27:30.388Z] [runtime-status] [23472] Running api in mode HTTPS
[debug] [2020-04-18T22:27:30.388Z] [runtime-status] [23472] Attempting to listen to socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\23472
[debug] [2020-04-18T22:27:30.389Z] [functions] Runtime ready! Sending request!
[debug] [2020-04-18T22:27:30.405Z] [runtime-status] [23472] Ephemeral server handling POST request
[debug] [2020-04-18T22:27:30.407Z] [runtime-status] [23472] Ephemeral server survived.
[info] >  New Session Config: {"payment_method_types":["card"],"success_url":"fgnTxdh2fIjyFhN4Kqv0/?purchaseResult=success&ongoingPurchaseSessionId=http://localhost:4200/subscription/stripe-checkout","cancel_url":"fgnTxdh2fIjyFhN4Kqv0/?purchaseResult=failed","client_reference_id":"http://localhost:4200/subscription/stripe-checkout","subscription_data":{"items":[{"plan":"plan_H7Td6f8hOE5R9F"}]}}
[info] i  functions: Finished "api" in ~1s
[debug] [2020-04-18T22:27:31.814Z] [worker-api-a9b56852-4214-47ac-8a14-9c0223ce2b8f]: IDLE
[debug] [2020-04-18T22:27:31.815Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2020-04-18T22:30:25.513Z] File C:\Applications\pencil-analytics\functions\src\stripe\stripe\stripe.service.ts changed, reloading triggers
[debug] [2020-04-18T22:30:26.035Z] File C:\Applications\pencil-analytics\functions\lib\stripe\stripe\stripe.service.js.map changed, reloading triggers
[debug] [2020-04-18T22:30:26.042Z] File C:\Applications\pencil-analytics\functions\lib\stripe\stripe\stripe.service.js changed, reloading triggers
[debug] [2020-04-18T22:30:26.056Z] File C:\Applications\pencil-analytics\functions\lib\stripe\stripe\stripe.service.d.ts changed, reloading triggers
[debug] [2020-04-18T22:30:26.153Z] File C:\Applications\pencil-analytics\functions\lib\tsconfig.tsbuildinfo changed, reloading triggers
[debug] [2020-04-18T22:30:27.189Z] [worker-pool] Shutting down IDLE worker (~diagnostic~)
[debug] [2020-04-18T22:30:27.189Z] [worker-~diagnostic~-225e4ef2-878b-425d-bb23-cf05ac893d55]: FINISHING
[debug] [2020-04-18T22:30:27.189Z] [worker-pool] Shutting down IDLE worker (api)
[debug] [2020-04-18T22:30:27.189Z] [worker-api-a9b56852-4214-47ac-8a14-9c0223ce2b8f]: FINISHING
[debug] [2020-04-18T22:30:27.190Z] [worker-pool] Shutting down IDLE worker (api)
[debug] [2020-04-18T22:30:27.190Z] [worker-api-a4b5a267-9aeb-4136-8b1e-2e837e910c57]: FINISHING
[debug] [2020-04-18T22:30:27.217Z] [worker-pool] addWorker(~diagnostic~)
[debug] [2020-04-18T22:30:27.218Z] [worker-pool] Adding worker with key ~diagnostic~, total=2
[debug] [2020-04-18T22:30:27.218Z] [worker-pool] submitWork(triggerId=)
[debug] [2020-04-18T22:30:27.218Z] [worker-~diagnostic~-802b2d75-bae5-4f63-a8d1-51954bc57bc6]: Assigning socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\21080
[debug] [2020-04-18T22:30:27.218Z] [worker-~diagnostic~-802b2d75-bae5-4f63-a8d1-51954bc57bc6]: BUSY
[debug] [2020-04-18T22:30:27.222Z] [worker-api-a9b56852-4214-47ac-8a14-9c0223ce2b8f]: exited
[debug] [2020-04-18T22:30:27.222Z] [worker-api-a9b56852-4214-47ac-8a14-9c0223ce2b8f]: FINISHED
[debug] [2020-04-18T22:30:27.223Z] [worker-~diagnostic~-225e4ef2-878b-425d-bb23-cf05ac893d55]: exited
[debug] [2020-04-18T22:30:27.223Z] [worker-~diagnostic~-225e4ef2-878b-425d-bb23-cf05ac893d55]: FINISHED
[debug] [2020-04-18T22:30:27.232Z] [worker-api-a4b5a267-9aeb-4136-8b1e-2e837e910c57]: exited
[debug] [2020-04-18T22:30:27.232Z] [worker-api-a4b5a267-9aeb-4136-8b1e-2e837e910c57]: FINISHED
[debug] [2020-04-18T22:30:28.033Z] [runtime-status] [21080] Functions runtime initialized. {"cwd":"C:\\Applications\\pencil-analytics\\functions","node_version":"10.15.0"}
[debug] [2020-04-18T22:30:28.035Z] [runtime-status] [21080] Disabled runtime features: {"functions_config_helper":true,"network_filtering":true,"timeout":true,"memory_limiting":true,"admin_stubs":true,"pubsub_emulator":true}
[debug] [2020-04-18T22:30:28.041Z] [runtime-status] [21080] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-admin\\lib\\index.js"}
[debug] [2020-04-18T22:30:28.044Z] [runtime-status] [21080] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[debug] [2020-04-18T22:30:28.045Z] [runtime-status] [21080] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[info] >  [Nest] 21080   - 2020-04-19 00:30:29   [NestFactory] Starting Nest application...
[debug] [2020-04-18T22:30:29.184Z] [worker-~diagnostic~-802b2d75-bae5-4f63-a8d1-51954bc57bc6]: IDLE
[info] >  [Nest] 21080   - 2020-04-19 00:30:29   [InstanceLoader] AppModule dependencies initialized +24ms
[info] >  [Nest] 21080   - 2020-04-19 00:30:29   [InstanceLoader] HttpModule dependencies initialized +1ms
[info] >  [Nest] 21080   - 2020-04-19 00:30:29   [InstanceLoader] ConfigHostModule dependencies initialized +1ms
[info] >  [Nest] 21080   - 2020-04-19 00:30:29   [InstanceLoader] ConfigModule dependencies initialized +500ms
[info] >  [Nest] 21080   - 2020-04-19 00:30:29   [InstanceLoader] StripeModule dependencies initialized +1ms
[info] >  [Nest] 21080   - 2020-04-19 00:30:29   [RoutesResolver] StripeController {/stripe}: +6ms
[info] >  [Nest] 21080   - 2020-04-19 00:30:29   [RouterExplorer] Mapped {/test, GET} route +7ms
[info] >  [Nest] 21080   - 2020-04-19 00:30:29   [RouterExplorer] Mapped {/checkout, POST} route +1ms
[info] >  [Nest] 21080   - 2020-04-19 00:30:29   [RouterExplorer] Mapped {/webhooks, POST} route +1ms
[info] >  [Nest] 21080   - 2020-04-19 00:30:29   [NestApplication] Nest application successfully started +4ms
[info] >  Nest Ready
[debug] [2020-04-18T22:30:47.040Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2020-04-18T22:30:47.040Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-18T22:30:47.040Z] Accepted request OPTIONS /pencil-test-98d8d/us-central1/api/stripe/checkout --> api
[debug] [2020-04-18T22:30:47.041Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1
[debug] [2020-04-18T22:30:47.041Z] [worker-pool] Cleaned up workers for api: 2 --> 0
[debug] [2020-04-18T22:30:47.066Z] [worker-pool] addWorker(api)
[debug] [2020-04-18T22:30:47.066Z] [worker-pool] Adding worker with key api, total=1
[debug] [2020-04-18T22:30:47.066Z] [worker-pool] submitWork(triggerId=api)
[debug] [2020-04-18T22:30:47.066Z] [worker-api-a107f930-c165-4dcf-80f9-9da5336eceab]: Assigning socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\8188
[debug] [2020-04-18T22:30:47.066Z] [worker-api-a107f930-c165-4dcf-80f9-9da5336eceab]: BUSY
[debug] [2020-04-18T22:30:47.692Z] [runtime-status] [8188] Functions runtime initialized. {"cwd":"C:\\Applications\\pencil-analytics\\functions","node_version":"10.15.0"}
[debug] [2020-04-18T22:30:47.694Z] [runtime-status] [8188] Disabled runtime features: {"functions_config_helper":true,"network_filtering":true,"timeout":true,"memory_limiting":true,"admin_stubs":true,"pubsub_emulator":true}
[debug] [2020-04-18T22:30:47.698Z] [runtime-status] [8188] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-admin\\lib\\index.js"}
[debug] [2020-04-18T22:30:47.700Z] [runtime-status] [8188] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[debug] [2020-04-18T22:30:47.701Z] [runtime-status] [8188] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[info] >  [Nest] 8188   - 2020-04-19 00:30:48   [NestFactory] Starting Nest application...
[debug] [2020-04-18T22:30:48.638Z] [runtime-status] [8188] Trigger "api" has been found, beginning invocation!
[info] i  functions: Beginning execution of "api"
[info] >  [Nest] 8188   - 2020-04-19 00:30:48   [InstanceLoader] AppModule dependencies initialized +28ms
[info] >  [Nest] 8188   - 2020-04-19 00:30:48   [InstanceLoader] HttpModule dependencies initialized +1ms
[info] >  [Nest] 8188   - 2020-04-19 00:30:48   [InstanceLoader] ConfigHostModule dependencies initialized +1ms
[debug] [2020-04-18T22:30:48.664Z] [runtime-status] [8188] triggerDefinition {"httpsTrigger":{},"name":"api","entryPoint":"api"}
[debug] [2020-04-18T22:30:48.664Z] [runtime-status] [8188] Running api in mode HTTPS
[debug] [2020-04-18T22:30:48.664Z] [runtime-status] [8188] Attempting to listen to socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\8188
[info] >  [Nest] 8188   - 2020-04-19 00:30:49   [InstanceLoader] ConfigModule dependencies initialized +375ms
[info] >  [Nest] 8188   - 2020-04-19 00:30:49   [InstanceLoader] StripeModule dependencies initialized +1ms
[info] >  [Nest] 8188   - 2020-04-19 00:30:49   [RoutesResolver] StripeController {/stripe}: +8ms
[info] >  [Nest] 8188   - 2020-04-19 00:30:49   [RouterExplorer] Mapped {/test, GET} route +4ms
[info] >  [Nest] 8188   - 2020-04-19 00:30:49   [RouterExplorer] Mapped {/checkout, POST} route +1ms
[info] >  [Nest] 8188   - 2020-04-19 00:30:49   [RouterExplorer] Mapped {/webhooks, POST} route +1ms
[info] >  [Nest] 8188   - 2020-04-19 00:30:49   [NestApplication] Nest application successfully started +4ms
[debug] [2020-04-18T22:30:49.058Z] [functions] Runtime ready! Sending request!
[info] >  Nest Ready
[debug] [2020-04-18T22:30:49.078Z] [runtime-status] [8188] Ephemeral server handling OPTIONS request
[debug] [2020-04-18T22:30:49.087Z] [runtime-status] [8188] Ephemeral server survived.
[debug] [2020-04-18T22:30:49.090Z] [work-queue] {"queueLength":1,"workRunningCount":1}
[debug] [2020-04-18T22:30:49.090Z] [work-queue] {"queueLength":0,"workRunningCount":2}
[debug] [2020-04-18T22:30:49.090Z] Accepted request POST /pencil-test-98d8d/us-central1/api/stripe/checkout --> api
[debug] [2020-04-18T22:30:49.098Z] [worker-pool] addWorker(api)
[debug] [2020-04-18T22:30:49.098Z] [worker-pool] Adding worker with key api, total=2
[debug] [2020-04-18T22:30:49.098Z] [worker-pool] submitWork(triggerId=api)
[debug] [2020-04-18T22:30:49.098Z] [worker-api-497d76d9-d7df-4855-9ea1-7d9fdffd1962]: Assigning socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\19768
[debug] [2020-04-18T22:30:49.098Z] [worker-api-497d76d9-d7df-4855-9ea1-7d9fdffd1962]: BUSY
[info] i  functions: Finished "api" in ~1s
[debug] [2020-04-18T22:30:49.099Z] [worker-api-a107f930-c165-4dcf-80f9-9da5336eceab]: IDLE
[debug] [2020-04-18T22:30:49.099Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-18T22:30:49.611Z] [runtime-status] [19768] Functions runtime initialized. {"cwd":"C:\\Applications\\pencil-analytics\\functions","node_version":"10.15.0"}
[debug] [2020-04-18T22:30:49.611Z] [runtime-status] [19768] Disabled runtime features: {"functions_config_helper":true,"network_filtering":true,"timeout":true,"memory_limiting":true,"admin_stubs":true,"pubsub_emulator":true}
[debug] [2020-04-18T22:30:49.612Z] [runtime-status] [19768] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-admin\\lib\\index.js"}
[debug] [2020-04-18T22:30:49.612Z] [runtime-status] [19768] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[debug] [2020-04-18T22:30:49.612Z] [runtime-status] [19768] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[info] >  [Nest] 19768   - 2020-04-19 00:30:50   [NestFactory] Starting Nest application...
[debug] [2020-04-18T22:30:50.559Z] [runtime-status] [19768] Trigger "api" has been found, beginning invocation!
[info] i  functions: Beginning execution of "api"
[debug] [2020-04-18T22:30:50.571Z] [runtime-status] [19768] triggerDefinition {"httpsTrigger":{},"name":"api","entryPoint":"api"}
[debug] [2020-04-18T22:30:50.571Z] [runtime-status] [19768] Running api in mode HTTPS
[debug] [2020-04-18T22:30:50.571Z] [runtime-status] [19768] Attempting to listen to socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\19768
[info] >  [Nest] 19768   - 2020-04-19 00:30:50   [InstanceLoader] AppModule dependencies initialized +30ms
[info] >  [Nest] 19768   - 2020-04-19 00:30:50   [InstanceLoader] HttpModule dependencies initialized +1ms
[info] >  [Nest] 19768   - 2020-04-19 00:30:50   [InstanceLoader] ConfigHostModule dependencies initialized +1ms
[info] >  [Nest] 19768   - 2020-04-19 00:30:50   [InstanceLoader] ConfigModule dependencies initialized +386ms
[info] >  [Nest] 19768   - 2020-04-19 00:30:50   [InstanceLoader] StripeModule dependencies initialized +1ms
[info] >  [Nest] 19768   - 2020-04-19 00:30:50   [RoutesResolver] StripeController {/stripe}: +8ms
[info] >  [Nest] 19768   - 2020-04-19 00:30:50   [RouterExplorer] Mapped {/test, GET} route +4ms
[info] >  [Nest] 19768   - 2020-04-19 00:30:50   [RouterExplorer] Mapped {/checkout, POST} route +1ms
[info] >  [Nest] 19768   - 2020-04-19 00:30:50   [RouterExplorer] Mapped {/webhooks, POST} route +1ms
[info] >  [Nest] 19768   - 2020-04-19 00:30:50   [NestApplication] Nest application successfully started +4ms
[info] >  Nest Ready
[debug] [2020-04-18T22:30:50.992Z] [functions] Runtime ready! Sending request!
[debug] [2020-04-18T22:30:51.038Z] [runtime-status] [19768] Ephemeral server handling POST request
[debug] [2020-04-18T22:30:51.042Z] [runtime-status] [19768] Ephemeral server survived.
[info] i  functions: Finished "api" in ~1s
[debug] [2020-04-18T22:30:52.458Z] [worker-api-497d76d9-d7df-4855-9ea1-7d9fdffd1962]: IDLE
[debug] [2020-04-18T22:30:52.458Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2020-04-19T15:12:06.743Z] ----------------------------------------------------------------------
[debug] [2020-04-19T15:12:06.747Z] Command:       C:\Program Files\nodejs\node.exe C:\Users\Bjarte\AppData\Roaming\npm\node_modules\firebase-tools\lib\bin\firebase.js serve --only functions
[debug] [2020-04-19T15:12:06.748Z] CLI Version:   7.11.0
[debug] [2020-04-19T15:12:06.748Z] Platform:      win32
[debug] [2020-04-19T15:12:06.748Z] Node Version:  v10.15.0
[debug] [2020-04-19T15:12:06.750Z] Time:          Sun Apr 19 2020 17:12:06 GMT+0200 (GMT+02:00)
[debug] [2020-04-19T15:12:06.750Z] ----------------------------------------------------------------------
[debug] [2020-04-19T15:12:06.750Z] 
[debug] [2020-04-19T15:12:06.810Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2020-04-19T15:12:06.811Z] > authorizing via signed-in user
[debug] [2020-04-19T15:12:06.811Z] [iam] checking project pencil-test-98d8d for permissions ["firebase.projects.get"]
[debug] [2020-04-19T15:12:06.813Z] > refreshing access token with scopes: ["email","https://www.googleapis.com/auth/cloud-platform","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","openid"]
[debug] [2020-04-19T15:12:06.813Z] >>> HTTP REQUEST POST https://www.googleapis.com/oauth2/v3/token  
 <request body omitted>
[debug] [2020-04-19T15:12:07.919Z] <<< HTTP RESPONSE 200
[debug] [2020-04-19T15:12:07.929Z] >>> HTTP REQUEST POST https://cloudresourcemanager.googleapis.com/v1/projects/pencil-test-98d8d:testIamPermissions  

[debug] [2020-04-19T15:12:09.012Z] <<< HTTP RESPONSE 200
[debug] [2020-04-19T15:12:09.014Z] >>> HTTP REQUEST GET https://firebase.googleapis.com/v1beta1/projects/pencil-test-98d8d  
 
[debug] [2020-04-19T15:12:09.374Z] <<< HTTP RESPONSE 200
[warn] !  Your requested "node" version "8" doesn't match your global version "10"
[info] +  functions: Emulator started at http://localhost:5000
[info] i  functions: Watching "C:\Applications\pencil-analytics\functions" for Cloud Functions...
[debug] [2020-04-19T15:12:11.924Z] [worker-pool] addWorker(~diagnostic~)
[debug] [2020-04-19T15:12:11.924Z] [worker-pool] Adding worker with key ~diagnostic~, total=1
[debug] [2020-04-19T15:12:11.924Z] [worker-pool] submitWork(triggerId=)
[debug] [2020-04-19T15:12:11.925Z] [worker-~diagnostic~-6b9721d9-fa3b-47d8-b72b-04550ea07460]: Assigning socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\5960
[debug] [2020-04-19T15:12:11.925Z] [worker-~diagnostic~-6b9721d9-fa3b-47d8-b72b-04550ea07460]: BUSY
[debug] [2020-04-19T15:12:12.707Z] [runtime-status] [5960] Functions runtime initialized. {"cwd":"C:\\Applications\\pencil-analytics\\functions","node_version":"10.15.0"}
[debug] [2020-04-19T15:12:12.710Z] [runtime-status] [5960] Disabled runtime features: {"functions_config_helper":true,"network_filtering":true,"timeout":true,"memory_limiting":true,"admin_stubs":true,"pubsub_emulator":true}
[debug] [2020-04-19T15:12:12.715Z] [runtime-status] [5960] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-admin\\lib\\index.js"}
[debug] [2020-04-19T15:12:12.718Z] [runtime-status] [5960] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[debug] [2020-04-19T15:12:12.719Z] [runtime-status] [5960] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[info] >  [Nest] 5960   - 2020-04-19 17:12:17   [NestFactory] Starting Nest application...
[info] +  functions[api]: http function initialized (http://localhost:5000/pencil-test-98d8d/us-central1/api).
[debug] [2020-04-19T15:12:17.860Z] [worker-~diagnostic~-6b9721d9-fa3b-47d8-b72b-04550ea07460]: IDLE
[info] >  [Nest] 5960   - 2020-04-19 17:12:17   [InstanceLoader] AppModule dependencies initialized +37ms
[info] >  [Nest] 5960   - 2020-04-19 17:12:17   [InstanceLoader] HttpModule dependencies initialized +2ms
[info] >  [Nest] 5960   - 2020-04-19 17:12:17   [InstanceLoader] ConfigHostModule dependencies initialized +1ms
[info] >  [Nest] 5960   - 2020-04-19 17:12:21   [InstanceLoader] ConfigModule dependencies initialized +3433ms
[info] >  [Nest] 5960   - 2020-04-19 17:12:21   [InstanceLoader] StripeModule dependencies initialized +1ms
[info] >  [Nest] 5960   - 2020-04-19 17:12:21   [RoutesResolver] StripeController {/stripe}: +18ms
[info] >  [Nest] 5960   - 2020-04-19 17:12:21   [RouterExplorer] Mapped {/test, GET} route +4ms
[info] >  [Nest] 5960   - 2020-04-19 17:12:21   [RouterExplorer] Mapped {/checkout, POST} route +1ms
[info] >  [Nest] 5960   - 2020-04-19 17:12:21   [RouterExplorer] Mapped {/webhooks, POST} route +0ms
[info] >  [Nest] 5960   - 2020-04-19 17:12:21   [NestApplication] Nest application successfully started +4ms
[info] >  Nest Ready
[debug] [2020-04-19T15:19:18.879Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2020-04-19T15:19:18.880Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-19T15:19:18.880Z] Accepted request OPTIONS /pencil-test-98d8d/us-central1/api/stripe/checkout --> api
[debug] [2020-04-19T15:19:18.901Z] [worker-pool] addWorker(api)
[debug] [2020-04-19T15:19:18.901Z] [worker-pool] Adding worker with key api, total=1
[debug] [2020-04-19T15:19:18.901Z] [worker-pool] submitWork(triggerId=api)
[debug] [2020-04-19T15:19:18.901Z] [worker-api-bec00fd7-34fb-4e1d-a67f-560248ad4e88]: Assigning socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\10396
[debug] [2020-04-19T15:19:18.901Z] [worker-api-bec00fd7-34fb-4e1d-a67f-560248ad4e88]: BUSY
[debug] [2020-04-19T15:19:19.523Z] [runtime-status] [10396] Functions runtime initialized. {"cwd":"C:\\Applications\\pencil-analytics\\functions","node_version":"10.15.0"}
[debug] [2020-04-19T15:19:19.525Z] [runtime-status] [10396] Disabled runtime features: {"functions_config_helper":true,"network_filtering":true,"timeout":true,"memory_limiting":true,"admin_stubs":true,"pubsub_emulator":true}
[debug] [2020-04-19T15:19:19.530Z] [runtime-status] [10396] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-admin\\lib\\index.js"}
[debug] [2020-04-19T15:19:19.532Z] [runtime-status] [10396] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[debug] [2020-04-19T15:19:19.533Z] [runtime-status] [10396] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[info] >  [Nest] 10396   - 2020-04-19 17:19:20   [NestFactory] Starting Nest application...
[debug] [2020-04-19T15:19:20.563Z] [runtime-status] [10396] Trigger "api" has been found, beginning invocation!
[info] i  functions: Beginning execution of "api"
[debug] [2020-04-19T15:19:20.566Z] [runtime-status] [10396] triggerDefinition {"httpsTrigger":{},"name":"api","entryPoint":"api"}
[debug] [2020-04-19T15:19:20.566Z] [runtime-status] [10396] Running api in mode HTTPS
[debug] [2020-04-19T15:19:20.569Z] [runtime-status] [10396] Attempting to listen to socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\10396
[info] >  [Nest] 10396   - 2020-04-19 17:19:20   [InstanceLoader] AppModule dependencies initialized +29ms
[info] >  [Nest] 10396   - 2020-04-19 17:19:20   [InstanceLoader] HttpModule dependencies initialized +1ms
[info] >  [Nest] 10396   - 2020-04-19 17:19:20   [InstanceLoader] ConfigHostModule dependencies initialized +1ms
[info] >  [Nest] 10396   - 2020-04-19 17:19:21   [InstanceLoader] ConfigModule dependencies initialized +437ms
[info] >  [Nest] 10396   - 2020-04-19 17:19:21   [InstanceLoader] StripeModule dependencies initialized +1ms
[info] >  [Nest] 10396   - 2020-04-19 17:19:21   [RoutesResolver] StripeController {/stripe}: +7ms
[info] >  [Nest] 10396   - 2020-04-19 17:19:21   [RouterExplorer] Mapped {/test, GET} route +4ms
[info] >  [Nest] 10396   - 2020-04-19 17:19:21   [RouterExplorer] Mapped {/checkout, POST} route +1ms
[info] >  [Nest] 10396   - 2020-04-19 17:19:21   [RouterExplorer] Mapped {/webhooks, POST} route +1ms
[info] >  [Nest] 10396   - 2020-04-19 17:19:21   [NestApplication] Nest application successfully started +4ms
[info] >  Nest Ready
[debug] [2020-04-19T15:19:21.047Z] [functions] Runtime ready! Sending request!
[debug] [2020-04-19T15:19:21.063Z] [runtime-status] [10396] Ephemeral server handling OPTIONS request
[debug] [2020-04-19T15:19:21.070Z] [runtime-status] [10396] Ephemeral server survived.
[debug] [2020-04-19T15:19:21.072Z] [work-queue] {"queueLength":1,"workRunningCount":1}
[debug] [2020-04-19T15:19:21.072Z] [work-queue] {"queueLength":0,"workRunningCount":2}
[debug] [2020-04-19T15:19:21.072Z] Accepted request POST /pencil-test-98d8d/us-central1/api/stripe/checkout --> api
[debug] [2020-04-19T15:19:21.081Z] [worker-pool] addWorker(api)
[debug] [2020-04-19T15:19:21.081Z] [worker-pool] Adding worker with key api, total=2
[debug] [2020-04-19T15:19:21.081Z] [worker-pool] submitWork(triggerId=api)
[debug] [2020-04-19T15:19:21.081Z] [worker-api-3ed6d72e-22fe-4bc4-8f8d-3cdb3e2e277b]: Assigning socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\19424
[debug] [2020-04-19T15:19:21.081Z] [worker-api-3ed6d72e-22fe-4bc4-8f8d-3cdb3e2e277b]: BUSY
[info] i  functions: Finished "api" in ~1s
[debug] [2020-04-19T15:19:21.082Z] [worker-api-bec00fd7-34fb-4e1d-a67f-560248ad4e88]: IDLE
[debug] [2020-04-19T15:19:21.082Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-19T15:19:21.566Z] [runtime-status] [19424] Functions runtime initialized. {"cwd":"C:\\Applications\\pencil-analytics\\functions","node_version":"10.15.0"}
[debug] [2020-04-19T15:19:21.568Z] [runtime-status] [19424] Disabled runtime features: {"functions_config_helper":true,"network_filtering":true,"timeout":true,"memory_limiting":true,"admin_stubs":true,"pubsub_emulator":true}
[debug] [2020-04-19T15:19:21.572Z] [runtime-status] [19424] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-admin\\lib\\index.js"}
[debug] [2020-04-19T15:19:21.574Z] [runtime-status] [19424] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[debug] [2020-04-19T15:19:21.575Z] [runtime-status] [19424] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[info] >  [Nest] 19424   - 2020-04-19 17:19:22   [NestFactory] Starting Nest application...
[debug] [2020-04-19T15:19:22.488Z] [runtime-status] [19424] Trigger "api" has been found, beginning invocation!
[info] i  functions: Beginning execution of "api"
[debug] [2020-04-19T15:19:22.495Z] [runtime-status] [19424] triggerDefinition {"httpsTrigger":{},"name":"api","entryPoint":"api"}
[debug] [2020-04-19T15:19:22.495Z] [runtime-status] [19424] Running api in mode HTTPS
[debug] [2020-04-19T15:19:22.495Z] [runtime-status] [19424] Attempting to listen to socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\19424
[info] >  [Nest] 19424   - 2020-04-19 17:19:22   [InstanceLoader] AppModule dependencies initialized +28ms
[info] >  [Nest] 19424   - 2020-04-19 17:19:22   [InstanceLoader] HttpModule dependencies initialized +1ms
[info] >  [Nest] 19424   - 2020-04-19 17:19:22   [InstanceLoader] ConfigHostModule dependencies initialized +2ms
[info] >  [Nest] 19424   - 2020-04-19 17:19:22   [InstanceLoader] ConfigModule dependencies initialized +411ms
[info] >  [Nest] 19424   - 2020-04-19 17:19:22   [InstanceLoader] StripeModule dependencies initialized +1ms
[info] >  [Nest] 19424   - 2020-04-19 17:19:22   [RoutesResolver] StripeController {/stripe}: +6ms
[info] >  [Nest] 19424   - 2020-04-19 17:19:22   [RouterExplorer] Mapped {/test, GET} route +9ms
[info] >  [Nest] 19424   - 2020-04-19 17:19:22   [RouterExplorer] Mapped {/checkout, POST} route +1ms
[info] >  [Nest] 19424   - 2020-04-19 17:19:22   [RouterExplorer] Mapped {/webhooks, POST} route +1ms
[info] >  [Nest] 19424   - 2020-04-19 17:19:22   [NestApplication] Nest application successfully started +4ms
[debug] [2020-04-19T15:19:22.956Z] [functions] Runtime ready! Sending request!
[info] >  Nest Ready
[debug] [2020-04-19T15:19:23.054Z] [runtime-status] [19424] Ephemeral server handling POST request
[debug] [2020-04-19T15:19:23.060Z] [runtime-status] [19424] Ephemeral server survived.
[info] i  functions: Finished "api" in ~2s
[debug] [2020-04-19T15:19:24.724Z] [worker-api-3ed6d72e-22fe-4bc4-8f8d-3cdb3e2e277b]: IDLE
[debug] [2020-04-19T15:19:24.724Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2020-04-19T15:33:58.625Z] File C:\Applications\pencil-analytics\functions\src\stripe\stripe\stripe.service.ts changed, reloading triggers
[debug] [2020-04-19T15:33:59.143Z] File C:\Applications\pencil-analytics\functions\lib\stripe\stripe\stripe.service.js.map changed, reloading triggers
[debug] [2020-04-19T15:33:59.146Z] File C:\Applications\pencil-analytics\functions\lib\stripe\stripe\stripe.service.js changed, reloading triggers
[debug] [2020-04-19T15:33:59.153Z] File C:\Applications\pencil-analytics\functions\lib\stripe\stripe\stripe.service.d.ts changed, reloading triggers
[debug] [2020-04-19T15:33:59.189Z] File C:\Applications\pencil-analytics\functions\lib\tsconfig.tsbuildinfo changed, reloading triggers
[debug] [2020-04-19T15:34:00.190Z] [worker-pool] Shutting down IDLE worker (~diagnostic~)
[debug] [2020-04-19T15:34:00.190Z] [worker-~diagnostic~-6b9721d9-fa3b-47d8-b72b-04550ea07460]: FINISHING
[debug] [2020-04-19T15:34:00.202Z] [worker-pool] Shutting down IDLE worker (api)
[debug] [2020-04-19T15:34:00.202Z] [worker-api-bec00fd7-34fb-4e1d-a67f-560248ad4e88]: FINISHING
[debug] [2020-04-19T15:34:00.203Z] [worker-pool] Shutting down IDLE worker (api)
[debug] [2020-04-19T15:34:00.203Z] [worker-api-3ed6d72e-22fe-4bc4-8f8d-3cdb3e2e277b]: FINISHING
[debug] [2020-04-19T15:34:00.218Z] [worker-pool] addWorker(~diagnostic~)
[debug] [2020-04-19T15:34:00.218Z] [worker-pool] Adding worker with key ~diagnostic~, total=2
[debug] [2020-04-19T15:34:00.218Z] [worker-pool] submitWork(triggerId=)
[debug] [2020-04-19T15:34:00.218Z] [worker-~diagnostic~-1f514715-5a64-41dd-a269-376e6f461238]: Assigning socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\14312
[debug] [2020-04-19T15:34:00.218Z] [worker-~diagnostic~-1f514715-5a64-41dd-a269-376e6f461238]: BUSY
[debug] [2020-04-19T15:34:00.224Z] [worker-api-bec00fd7-34fb-4e1d-a67f-560248ad4e88]: exited
[debug] [2020-04-19T15:34:00.224Z] [worker-api-bec00fd7-34fb-4e1d-a67f-560248ad4e88]: FINISHED
[debug] [2020-04-19T15:34:00.224Z] [worker-api-3ed6d72e-22fe-4bc4-8f8d-3cdb3e2e277b]: exited
[debug] [2020-04-19T15:34:00.224Z] [worker-api-3ed6d72e-22fe-4bc4-8f8d-3cdb3e2e277b]: FINISHED
[debug] [2020-04-19T15:34:00.224Z] [worker-~diagnostic~-6b9721d9-fa3b-47d8-b72b-04550ea07460]: exited
[debug] [2020-04-19T15:34:00.224Z] [worker-~diagnostic~-6b9721d9-fa3b-47d8-b72b-04550ea07460]: FINISHED
[debug] [2020-04-19T15:34:02.392Z] [runtime-status] [14312] Functions runtime initialized. {"cwd":"C:\\Applications\\pencil-analytics\\functions","node_version":"10.15.0"}
[debug] [2020-04-19T15:34:02.396Z] [runtime-status] [14312] Disabled runtime features: {"functions_config_helper":true,"network_filtering":true,"timeout":true,"memory_limiting":true,"admin_stubs":true,"pubsub_emulator":true}
[debug] [2020-04-19T15:34:02.424Z] [runtime-status] [14312] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-admin\\lib\\index.js"}
[debug] [2020-04-19T15:34:02.440Z] [runtime-status] [14312] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[debug] [2020-04-19T15:34:02.443Z] [runtime-status] [14312] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[info] >  [Nest] 14312   - 2020-04-19 17:34:08   [NestFactory] Starting Nest application...
[debug] [2020-04-19T15:34:08.297Z] [worker-~diagnostic~-1f514715-5a64-41dd-a269-376e6f461238]: IDLE
[info] >  [Nest] 14312   - 2020-04-19 17:34:08   [InstanceLoader] AppModule dependencies initialized +22ms
[info] >  [Nest] 14312   - 2020-04-19 17:34:08   [InstanceLoader] HttpModule dependencies initialized +1ms
[info] >  [Nest] 14312   - 2020-04-19 17:34:08   [InstanceLoader] ConfigHostModule dependencies initialized +1ms
[info] >  [Nest] 14312   - 2020-04-19 17:34:11   [InstanceLoader] ConfigModule dependencies initialized +3244ms
[info] >  [Nest] 14312   - 2020-04-19 17:34:11   [InstanceLoader] StripeModule dependencies initialized +1ms
[info] >  [Nest] 14312   - 2020-04-19 17:34:11   [RoutesResolver] StripeController {/stripe}: +6ms
[info] >  [Nest] 14312   - 2020-04-19 17:34:11   [RouterExplorer] Mapped {/test, GET} route +3ms
[info] >  [Nest] 14312   - 2020-04-19 17:34:11   [RouterExplorer] Mapped {/checkout, POST} route +1ms
[info] >  [Nest] 14312   - 2020-04-19 17:34:11   [RouterExplorer] Mapped {/webhooks, POST} route +1ms
[info] >  [Nest] 14312   - 2020-04-19 17:34:11   [NestApplication] Nest application successfully started +5ms
[info] >  Nest Ready
[debug] [2020-04-19T15:52:04.220Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2020-04-19T15:52:04.220Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-19T15:52:04.221Z] Accepted request OPTIONS /pencil-test-98d8d/us-central1/api/stripe/checkout --> api
[debug] [2020-04-19T15:52:04.221Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1
[debug] [2020-04-19T15:52:04.221Z] [worker-pool] Cleaned up workers for api: 2 --> 0
[debug] [2020-04-19T15:52:04.234Z] [worker-pool] addWorker(api)
[debug] [2020-04-19T15:52:04.234Z] [worker-pool] Adding worker with key api, total=1
[debug] [2020-04-19T15:52:04.234Z] [worker-pool] submitWork(triggerId=api)
[debug] [2020-04-19T15:52:04.235Z] [worker-api-3cf36c99-c83c-41d1-9866-9591e84c07f8]: Assigning socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\11092
[debug] [2020-04-19T15:52:04.235Z] [worker-api-3cf36c99-c83c-41d1-9866-9591e84c07f8]: BUSY
[debug] [2020-04-19T15:52:04.793Z] [runtime-status] [11092] Functions runtime initialized. {"cwd":"C:\\Applications\\pencil-analytics\\functions","node_version":"10.15.0"}
[debug] [2020-04-19T15:52:04.795Z] [runtime-status] [11092] Disabled runtime features: {"functions_config_helper":true,"network_filtering":true,"timeout":true,"memory_limiting":true,"admin_stubs":true,"pubsub_emulator":true}
[debug] [2020-04-19T15:52:04.799Z] [runtime-status] [11092] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-admin\\lib\\index.js"}
[debug] [2020-04-19T15:52:04.802Z] [runtime-status] [11092] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[debug] [2020-04-19T15:52:04.803Z] [runtime-status] [11092] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[info] >  [Nest] 11092   - 2020-04-19 17:52:05   [NestFactory] Starting Nest application...
[debug] [2020-04-19T15:52:05.787Z] [runtime-status] [11092] Trigger "api" has been found, beginning invocation!
[info] i  functions: Beginning execution of "api"
[debug] [2020-04-19T15:52:05.790Z] [runtime-status] [11092] triggerDefinition {"httpsTrigger":{},"name":"api","entryPoint":"api"}
[debug] [2020-04-19T15:52:05.791Z] [runtime-status] [11092] Running api in mode HTTPS
[debug] [2020-04-19T15:52:05.792Z] [runtime-status] [11092] Attempting to listen to socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\11092
[info] >  [Nest] 11092   - 2020-04-19 17:52:05   [InstanceLoader] AppModule dependencies initialized +29ms
[info] >  [Nest] 11092   - 2020-04-19 17:52:05   [InstanceLoader] HttpModule dependencies initialized +1ms
[info] >  [Nest] 11092   - 2020-04-19 17:52:05   [InstanceLoader] ConfigHostModule dependencies initialized +1ms
[info] >  [Nest] 11092   - 2020-04-19 17:52:06   [InstanceLoader] ConfigModule dependencies initialized +496ms
[info] >  [Nest] 11092   - 2020-04-19 17:52:06   [InstanceLoader] StripeModule dependencies initialized +1ms
[info] >  [Nest] 11092   - 2020-04-19 17:52:06   [RoutesResolver] StripeController {/stripe}: +5ms
[info] >  [Nest] 11092   - 2020-04-19 17:52:06   [RouterExplorer] Mapped {/test, GET} route +4ms
[info] >  [Nest] 11092   - 2020-04-19 17:52:06   [RouterExplorer] Mapped {/checkout, POST} route +1ms
[info] >  [Nest] 11092   - 2020-04-19 17:52:06   [RouterExplorer] Mapped {/webhooks, POST} route +2ms
[info] >  [Nest] 11092   - 2020-04-19 17:52:06   [NestApplication] Nest application successfully started +7ms
[debug] [2020-04-19T15:52:06.333Z] [functions] Runtime ready! Sending request!
[info] >  Nest Ready
[debug] [2020-04-19T15:52:06.353Z] [runtime-status] [11092] Ephemeral server handling OPTIONS request
[debug] [2020-04-19T15:52:06.358Z] [runtime-status] [11092] Ephemeral server survived.
[info] i  functions: Finished "api" in ~1s
[debug] [2020-04-19T15:52:06.361Z] [work-queue] {"queueLength":1,"workRunningCount":1}
[debug] [2020-04-19T15:52:06.361Z] [work-queue] {"queueLength":0,"workRunningCount":2}
[debug] [2020-04-19T15:52:06.361Z] Accepted request POST /pencil-test-98d8d/us-central1/api/stripe/checkout --> api
[debug] [2020-04-19T15:52:06.369Z] [worker-pool] addWorker(api)
[debug] [2020-04-19T15:52:06.369Z] [worker-pool] Adding worker with key api, total=2
[debug] [2020-04-19T15:52:06.370Z] [worker-pool] submitWork(triggerId=api)
[debug] [2020-04-19T15:52:06.370Z] [worker-api-61b7e03b-9dcf-4c0f-bf16-b4c1a2be48c2]: Assigning socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\21804
[debug] [2020-04-19T15:52:06.370Z] [worker-api-61b7e03b-9dcf-4c0f-bf16-b4c1a2be48c2]: BUSY
[debug] [2020-04-19T15:52:06.370Z] [worker-api-3cf36c99-c83c-41d1-9866-9591e84c07f8]: IDLE
[debug] [2020-04-19T15:52:06.370Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-19T15:52:06.834Z] [runtime-status] [21804] Functions runtime initialized. {"cwd":"C:\\Applications\\pencil-analytics\\functions","node_version":"10.15.0"}
[debug] [2020-04-19T15:52:06.836Z] [runtime-status] [21804] Disabled runtime features: {"functions_config_helper":true,"network_filtering":true,"timeout":true,"memory_limiting":true,"admin_stubs":true,"pubsub_emulator":true}
[debug] [2020-04-19T15:52:06.840Z] [runtime-status] [21804] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-admin\\lib\\index.js"}
[debug] [2020-04-19T15:52:06.842Z] [runtime-status] [21804] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[debug] [2020-04-19T15:52:06.843Z] [runtime-status] [21804] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[info] >  [Nest] 21804   - 2020-04-19 17:52:07   [NestFactory] Starting Nest application...
[debug] [2020-04-19T15:52:07.858Z] [runtime-status] [21804] Trigger "api" has been found, beginning invocation!
[info] i  functions: Beginning execution of "api"
[debug] [2020-04-19T15:52:07.866Z] [runtime-status] [21804] triggerDefinition {"httpsTrigger":{},"name":"api","entryPoint":"api"}
[debug] [2020-04-19T15:52:07.866Z] [runtime-status] [21804] Running api in mode HTTPS
[debug] [2020-04-19T15:52:07.866Z] [runtime-status] [21804] Attempting to listen to socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\21804
[info] >  [Nest] 21804   - 2020-04-19 17:52:07   [InstanceLoader] AppModule dependencies initialized +29ms
[info] >  [Nest] 21804   - 2020-04-19 17:52:07   [InstanceLoader] HttpModule dependencies initialized +1ms
[info] >  [Nest] 21804   - 2020-04-19 17:52:07   [InstanceLoader] ConfigHostModule dependencies initialized +1ms
[info] >  [Nest] 21804   - 2020-04-19 17:52:08   [InstanceLoader] ConfigModule dependencies initialized +446ms
[info] >  [Nest] 21804   - 2020-04-19 17:52:08   [InstanceLoader] StripeModule dependencies initialized +1ms
[info] >  [Nest] 21804   - 2020-04-19 17:52:08   [RoutesResolver] StripeController {/stripe}: +9ms
[info] >  [Nest] 21804   - 2020-04-19 17:52:08   [RouterExplorer] Mapped {/test, GET} route +3ms
[info] >  [Nest] 21804   - 2020-04-19 17:52:08   [RouterExplorer] Mapped {/checkout, POST} route +1ms
[info] >  [Nest] 21804   - 2020-04-19 17:52:08   [RouterExplorer] Mapped {/webhooks, POST} route +1ms
[debug] [2020-04-19T15:52:08.352Z] [functions] Runtime ready! Sending request!
[info] >  [Nest] 21804   - 2020-04-19 17:52:08   [NestApplication] Nest application successfully started +5ms
[info] >  Nest Ready
[debug] [2020-04-19T15:52:08.466Z] [runtime-status] [21804] Ephemeral server handling POST request
[debug] [2020-04-19T15:52:08.474Z] [runtime-status] [21804] Ephemeral server survived.
[info] i  functions: Finished "api" in ~2s
[debug] [2020-04-19T15:52:09.954Z] [worker-api-61b7e03b-9dcf-4c0f-bf16-b4c1a2be48c2]: IDLE
[debug] [2020-04-19T15:52:09.954Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2020-04-19T15:53:56.371Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2020-04-19T15:53:56.371Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-19T15:53:56.372Z] Accepted request OPTIONS /pencil-test-98d8d/us-central1/api/stripe/checkout --> api
[debug] [2020-04-19T15:53:56.372Z] [worker-pool] submitWork(triggerId=api)
[debug] [2020-04-19T15:53:56.372Z] [worker-api-3cf36c99-c83c-41d1-9866-9591e84c07f8]: Assigning socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\11092
[debug] [2020-04-19T15:53:56.372Z] [worker-api-3cf36c99-c83c-41d1-9866-9591e84c07f8]: BUSY
[debug] [2020-04-19T15:53:56.374Z] [runtime-status] [11092] Trigger "api" has been found, beginning invocation!
[info] i  functions: Beginning execution of "api"
[debug] [2020-04-19T15:53:56.378Z] [runtime-status] [11092] triggerDefinition {"httpsTrigger":{},"name":"api","entryPoint":"api"}
[debug] [2020-04-19T15:53:56.378Z] [runtime-status] [11092] Running api in mode HTTPS
[debug] [2020-04-19T15:53:56.379Z] [runtime-status] [11092] Attempting to listen to socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\11092
[debug] [2020-04-19T15:53:56.383Z] [functions] Runtime ready! Sending request!
[debug] [2020-04-19T15:53:56.394Z] [runtime-status] [11092] Ephemeral server handling OPTIONS request
[debug] [2020-04-19T15:53:56.397Z] [runtime-status] [11092] Ephemeral server survived.
[info] i  functions: Finished "api" in ~1s
[debug] [2020-04-19T15:53:56.410Z] [worker-api-3cf36c99-c83c-41d1-9866-9591e84c07f8]: IDLE
[debug] [2020-04-19T15:53:56.411Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2020-04-19T15:53:56.411Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2020-04-19T15:53:56.411Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-19T15:53:56.411Z] Accepted request POST /pencil-test-98d8d/us-central1/api/stripe/checkout --> api
[debug] [2020-04-19T15:53:56.411Z] [worker-pool] submitWork(triggerId=api)
[debug] [2020-04-19T15:53:56.412Z] [worker-api-3cf36c99-c83c-41d1-9866-9591e84c07f8]: Assigning socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\11092
[debug] [2020-04-19T15:53:56.412Z] [worker-api-3cf36c99-c83c-41d1-9866-9591e84c07f8]: BUSY
[debug] [2020-04-19T15:53:56.412Z] [runtime-status] [11092] Trigger "api" has been found, beginning invocation!
[info] i  functions: Beginning execution of "api"
[debug] [2020-04-19T15:53:56.414Z] [runtime-status] [11092] triggerDefinition {"httpsTrigger":{},"name":"api","entryPoint":"api"}
[debug] [2020-04-19T15:53:56.414Z] [runtime-status] [11092] Running api in mode HTTPS
[debug] [2020-04-19T15:53:56.414Z] [runtime-status] [11092] Attempting to listen to socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\11092
[debug] [2020-04-19T15:53:56.416Z] [functions] Runtime ready! Sending request!
[debug] [2020-04-19T15:53:56.437Z] [runtime-status] [11092] Ephemeral server handling POST request
[debug] [2020-04-19T15:53:56.439Z] [runtime-status] [11092] Ephemeral server survived.
[info] i  functions: Finished "api" in ~1s
[debug] [2020-04-19T15:53:57.796Z] [worker-api-3cf36c99-c83c-41d1-9866-9591e84c07f8]: IDLE
[debug] [2020-04-19T15:53:57.796Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2020-04-19T16:01:51.411Z] File C:\Applications\pencil-analytics\functions\development.env changed, reloading triggers
[debug] [2020-04-19T16:01:51.499Z] File C:\Applications\pencil-analytics\functions\src\stripe\stripe\stripe.service.ts changed, reloading triggers
[debug] [2020-04-19T16:01:51.961Z] File C:\Applications\pencil-analytics\functions\lib\stripe\stripe\stripe.service.js.map changed, reloading triggers
[debug] [2020-04-19T16:01:51.962Z] File C:\Applications\pencil-analytics\functions\lib\stripe\stripe\stripe.service.js changed, reloading triggers
[debug] [2020-04-19T16:01:51.984Z] File C:\Applications\pencil-analytics\functions\lib\stripe\stripe\stripe.service.d.ts changed, reloading triggers
[debug] [2020-04-19T16:01:52.057Z] File C:\Applications\pencil-analytics\functions\lib\tsconfig.tsbuildinfo changed, reloading triggers
[debug] [2020-04-19T16:01:53.058Z] [worker-pool] Shutting down IDLE worker (~diagnostic~)
[debug] [2020-04-19T16:01:53.058Z] [worker-~diagnostic~-1f514715-5a64-41dd-a269-376e6f461238]: FINISHING
[debug] [2020-04-19T16:01:53.058Z] [worker-pool] Shutting down IDLE worker (api)
[debug] [2020-04-19T16:01:53.058Z] [worker-api-3cf36c99-c83c-41d1-9866-9591e84c07f8]: FINISHING
[debug] [2020-04-19T16:01:53.058Z] [worker-pool] Shutting down IDLE worker (api)
[debug] [2020-04-19T16:01:53.059Z] [worker-api-61b7e03b-9dcf-4c0f-bf16-b4c1a2be48c2]: FINISHING
[debug] [2020-04-19T16:01:53.068Z] [worker-pool] addWorker(~diagnostic~)
[debug] [2020-04-19T16:01:53.068Z] [worker-pool] Adding worker with key ~diagnostic~, total=2
[debug] [2020-04-19T16:01:53.068Z] [worker-pool] submitWork(triggerId=)
[debug] [2020-04-19T16:01:53.068Z] [worker-~diagnostic~-551d71e2-c158-42ad-9355-ee2699d0e84e]: Assigning socketPath: \\?\pipe\C:\Applications\pencil-analytics\functions\17596
[debug] [2020-04-19T16:01:53.068Z] [worker-~diagnostic~-551d71e2-c158-42ad-9355-ee2699d0e84e]: BUSY
[debug] [2020-04-19T16:01:53.076Z] [worker-api-61b7e03b-9dcf-4c0f-bf16-b4c1a2be48c2]: exited
[debug] [2020-04-19T16:01:53.076Z] [worker-api-61b7e03b-9dcf-4c0f-bf16-b4c1a2be48c2]: FINISHED
[debug] [2020-04-19T16:01:53.076Z] [worker-api-3cf36c99-c83c-41d1-9866-9591e84c07f8]: exited
[debug] [2020-04-19T16:01:53.076Z] [worker-api-3cf36c99-c83c-41d1-9866-9591e84c07f8]: FINISHED
[debug] [2020-04-19T16:01:53.076Z] [worker-~diagnostic~-1f514715-5a64-41dd-a269-376e6f461238]: exited
[debug] [2020-04-19T16:01:53.076Z] [worker-~diagnostic~-1f514715-5a64-41dd-a269-376e6f461238]: FINISHED
[debug] [2020-04-19T16:01:53.784Z] [runtime-status] [17596] Functions runtime initialized. {"cwd":"C:\\Applications\\pencil-analytics\\functions","node_version":"10.15.0"}
[debug] [2020-04-19T16:01:53.786Z] [runtime-status] [17596] Disabled runtime features: {"functions_config_helper":true,"network_filtering":true,"timeout":true,"memory_limiting":true,"admin_stubs":true,"pubsub_emulator":true}
[debug] [2020-04-19T16:01:53.790Z] [runtime-status] [17596] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.10.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-admin\\lib\\index.js"}
[debug] [2020-04-19T16:01:53.793Z] [runtime-status] [17596] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[debug] [2020-04-19T16:01:53.794Z] [runtime-status] [17596] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"C:\\Applications\\pencil-analytics\\functions\\node_modules\\firebase-functions\\lib\\index.js"}
[info] >  [Nest] 17596   - 2020-04-19 18:01:54   [NestFactory] Starting Nest application...
[debug] [2020-04-19T16:01:54.809Z] [worker-~diagnostic~-551d71e2-c158-42ad-9355-ee2699d0e84e]: IDLE
[info] >  [Nest] 17596   - 2020-04-19 18:01:54   [InstanceLoader] AppModule dependencies initialized +22ms
[info] >  [Nest] 17596   - 2020-04-19 18:01:54   [InstanceLoader] HttpModule dependencies initialized +1ms
[info] >  [Nest] 17596   - 2020-04-19 18:01:54   [InstanceLoader] ConfigHostModule dependencies initialized +1ms
[info] >  [Nest] 17596   - 2020-04-19 18:01:55   [InstanceLoader] ConfigModule dependencies initialized +434ms
[info] >  [Nest] 17596   - 2020-04-19 18:01:55   [InstanceLoader] StripeModule dependencies initialized +1ms
[info] >  [Nest] 17596   - 2020-04-19 18:01:55   [RoutesResolver] StripeController {/stripe}: +6ms
[info] >  [Nest] 17596   - 2020-04-19 18:01:55   [RouterExplorer] Mapped {/test, GET} route +4ms
[info] >  [Nest] 17596   - 2020-04-19 18:01:55   [RouterExplorer] Mapped {/checkout, POST} route +3ms
[info] >  [Nest] 17596   - 2020-04-19 18:01:55   [RouterExplorer] Mapped {/webhooks, POST} route +1ms
[info] >  [Nest] 17596   - 2020-04-19 18:01:55   [NestApplication] Nest application successfully started +4ms
[info] >  Nest Ready
